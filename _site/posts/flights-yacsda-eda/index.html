<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-05-09">

<title>datenwerk - flights-yacsda-eda</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">datenwerk</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">Ans Werk, Daten!</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../Hinweise.html"> 
<span class="menu-text">Hinweise</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../English.html"> 
<span class="menu-text">English</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/sebastiansauer/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#hintergrund-und-ziel" id="toc-hintergrund-und-ziel" class="nav-link active" data-scroll-target="#hintergrund-und-ziel"><span class="header-section-number">1</span> Hintergrund und Ziel</a></li>
  <li><a href="#pakete-laden" id="toc-pakete-laden" class="nav-link" data-scroll-target="#pakete-laden"><span class="header-section-number">2</span> Pakete laden</a></li>
  <li><a href="#daten-laden" id="toc-daten-laden" class="nav-link" data-scroll-target="#daten-laden"><span class="header-section-number">3</span> Daten laden</a></li>
  <li><a href="#was-ist-verspätung" id="toc-was-ist-verspätung" class="nav-link" data-scroll-target="#was-ist-verspätung"><span class="header-section-number">4</span> Was ist Verspätung?</a>
  <ul class="collapse">
  <li><a href="#wie-ähnlich-sind-ankunfts--und-abflugsverspätung" id="toc-wie-ähnlich-sind-ankunfts--und-abflugsverspätung" class="nav-link" data-scroll-target="#wie-ähnlich-sind-ankunfts--und-abflugsverspätung"><span class="header-section-number">4.1</span> Wie ähnlich sind Ankunfts- und Abflugsverspätung?</a>
  <ul class="collapse">
  <li><a href="#diagramm-mit-dataexplorer" id="toc-diagramm-mit-dataexplorer" class="nav-link" data-scroll-target="#diagramm-mit-dataexplorer"><span class="header-section-number">4.1.1</span> Diagramm mit DataExplorer</a></li>
  <li><a href="#diagramm-mit-ggplot" id="toc-diagramm-mit-ggplot" class="nav-link" data-scroll-target="#diagramm-mit-ggplot"><span class="header-section-number">4.1.2</span> Diagramm mit ggplot</a></li>
  <li><a href="#statistiken" id="toc-statistiken" class="nav-link" data-scroll-target="#statistiken"><span class="header-section-number">4.1.3</span> Statistiken</a></li>
  <li><a href="#vertiefung-z-skalierung" id="toc-vertiefung-z-skalierung" class="nav-link" data-scroll-target="#vertiefung-z-skalierung"><span class="header-section-number">4.1.4</span> Vertiefung: z-Skalierung</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#verteilung-der-verspätung" id="toc-verteilung-der-verspätung" class="nav-link" data-scroll-target="#verteilung-der-verspätung"><span class="header-section-number">5</span> Verteilung der Verspätung</a>
  <ul class="collapse">
  <li><a href="#visualisierung" id="toc-visualisierung" class="nav-link" data-scroll-target="#visualisierung"><span class="header-section-number">5.1</span> Visualisierung</a>
  <ul class="collapse">
  <li><a href="#vertiefung-wiederholung-mit-across" id="toc-vertiefung-wiederholung-mit-across" class="nav-link" data-scroll-target="#vertiefung-wiederholung-mit-across"><span class="header-section-number">5.1.1</span> Vertiefung: Wiederholung mit <code>across</code></a></li>
  </ul></li>
  <li><a href="#flights2-extremwerte-der-verspätung-definieren" id="toc-flights2-extremwerte-der-verspätung-definieren" class="nav-link" data-scroll-target="#flights2-extremwerte-der-verspätung-definieren"><span class="header-section-number">5.2</span> flights2: Extremwerte (der Verspätung) definieren</a>
  <ul class="collapse">
  <li><a href="#boxplot-methode" id="toc-boxplot-methode" class="nav-link" data-scroll-target="#boxplot-methode"><span class="header-section-number">5.2.1</span> Boxplot-Methode</a></li>
  </ul></li>
  <li><a href="#fehlende-werte-berechnen" id="toc-fehlende-werte-berechnen" class="nav-link" data-scroll-target="#fehlende-werte-berechnen"><span class="header-section-number">5.3</span> Fehlende Werte berechnen</a>
  <ul class="collapse">
  <li><a href="#vertiefung-across" id="toc-vertiefung-across" class="nav-link" data-scroll-target="#vertiefung-across"><span class="header-section-number">5.3.1</span> Vertiefung: across</a></li>
  </ul></li>
  <li><a href="#flights3" id="toc-flights3" class="nav-link" data-scroll-target="#flights3"><span class="header-section-number">5.4</span> flights3</a></li>
  </ul></li>
  <li><a href="#deskriptive-statistiken" id="toc-deskriptive-statistiken" class="nav-link" data-scroll-target="#deskriptive-statistiken"><span class="header-section-number">6</span> Deskriptive Statistiken</a>
  <ul class="collapse">
  <li><a href="#mit-summarise" id="toc-mit-summarise" class="nav-link" data-scroll-target="#mit-summarise"><span class="header-section-number">6.1</span> Mit <code>summarise</code></a></li>
  <li><a href="#mit-describe_distribution" id="toc-mit-describe_distribution" class="nav-link" data-scroll-target="#mit-describe_distribution"><span class="header-section-number">6.2</span> Mit <code>describe_distribution</code></a></li>
  </ul></li>
  <li><a href="#korrelate-von-verspätung" id="toc-korrelate-von-verspätung" class="nav-link" data-scroll-target="#korrelate-von-verspätung"><span class="header-section-number">7</span> Korrelate von Verspätung</a>
  <ul class="collapse">
  <li><a href="#metrische-prädiktoren" id="toc-metrische-prädiktoren" class="nav-link" data-scroll-target="#metrische-prädiktoren"><span class="header-section-number">7.1</span> Metrische Prädiktoren</a>
  <ul class="collapse">
  <li><a href="#nur-mit-cor" id="toc-nur-mit-cor" class="nav-link" data-scroll-target="#nur-mit-cor"><span class="header-section-number">7.1.1</span> Nur mit <code>cor</code></a></li>
  <li><a href="#mit-easystats" id="toc-mit-easystats" class="nav-link" data-scroll-target="#mit-easystats"><span class="header-section-number">7.1.2</span> Mit <code>easystats</code></a></li>
  <li><a href="#vertiefung-mit-across" id="toc-vertiefung-mit-across" class="nav-link" data-scroll-target="#vertiefung-mit-across"><span class="header-section-number">7.1.3</span> Vertiefung: Mit <code>across</code></a></li>
  </ul></li>
  <li><a href="#nominale-prädiktoren" id="toc-nominale-prädiktoren" class="nav-link" data-scroll-target="#nominale-prädiktoren"><span class="header-section-number">7.2</span> Nominale Prädiktoren</a>
  <ul class="collapse">
  <li><a href="#welche-nominalen-prädiktoren-gibt-es" id="toc-welche-nominalen-prädiktoren-gibt-es" class="nav-link" data-scroll-target="#welche-nominalen-prädiktoren-gibt-es"><span class="header-section-number">7.2.1</span> Welche nominalen Prädiktoren gibt es?</a></li>
  <li><a href="#carrier" id="toc-carrier" class="nav-link" data-scroll-target="#carrier"><span class="header-section-number">7.2.2</span> Carrier</a></li>
  <li><a href="#visualisierung-von-carrier" id="toc-visualisierung-von-carrier" class="nav-link" data-scroll-target="#visualisierung-von-carrier"><span class="header-section-number">7.2.3</span> Visualisierung von <code>carrier</code></a></li>
  <li><a href="#mit-dataexplorer-1" id="toc-mit-dataexplorer-1" class="nav-link" data-scroll-target="#mit-dataexplorer-1"><span class="header-section-number">7.2.4</span> Mit <code>DataExplorer</code></a></li>
  <li><a href="#mit-ggplot-1" id="toc-mit-ggplot-1" class="nav-link" data-scroll-target="#mit-ggplot-1"><span class="header-section-number">7.2.5</span> Mit <code>ggplot</code></a></li>
  <li><a href="#vertiefung-achsen-labels-anpassen" id="toc-vertiefung-achsen-labels-anpassen" class="nav-link" data-scroll-target="#vertiefung-achsen-labels-anpassen"><span class="header-section-number">7.2.6</span> Vertiefung: Achsen-Labels anpassen</a></li>
  <li><a href="#lumpsensammler-kategorie" id="toc-lumpsensammler-kategorie" class="nav-link" data-scroll-target="#lumpsensammler-kategorie"><span class="header-section-number">7.2.7</span> “Lumpsensammler-Kategorie”</a></li>
  <li><a href="#visualisierung-der-lumpensammler" id="toc-visualisierung-der-lumpensammler" class="nav-link" data-scroll-target="#visualisierung-der-lumpensammler"><span class="header-section-number">7.2.8</span> Visualisierung der Lumpensammler</a></li>
  </ul></li>
  <li><a href="#korrelation-von-carrier-mit-verspätung" id="toc-korrelation-von-carrier-mit-verspätung" class="nav-link" data-scroll-target="#korrelation-von-carrier-mit-verspätung"><span class="header-section-number">7.3</span> Korrelation von <code>carrier</code> mit Verspätung</a>
  <ul class="collapse">
  <li><a href="#hour" id="toc-hour" class="nav-link" data-scroll-target="#hour"><span class="header-section-number">7.3.1</span> <code>Hour</code></a></li>
  <li><a href="#origin" id="toc-origin" class="nav-link" data-scroll-target="#origin"><span class="header-section-number">7.3.2</span> <code>Origin</code></a></li>
  </ul></li>
  <li><a href="#drei-variablen-origin-hour-dep_delay" id="toc-drei-variablen-origin-hour-dep_delay" class="nav-link" data-scroll-target="#drei-variablen-origin-hour-dep_delay"><span class="header-section-number">7.4</span> Drei Variablen: <code>Origin</code>, <code>hour</code>, <code>dep_delay</code></a></li>
  <li><a href="#vertiefung-alle-nominale-variablen" id="toc-vertiefung-alle-nominale-variablen" class="nav-link" data-scroll-target="#vertiefung-alle-nominale-variablen"><span class="header-section-number">7.5</span> Vertiefung: Alle nominale Variablen</a>
  <ul class="collapse">
  <li><a href="#flights4" id="toc-flights4" class="nav-link" data-scroll-target="#flights4"><span class="header-section-number">7.5.1</span> flights4</a></li>
  <li><a href="#visualisierung-im-grid" id="toc-visualisierung-im-grid" class="nav-link" data-scroll-target="#visualisierung-im-grid"><span class="header-section-number">7.5.2</span> Visualisierung im Grid</a></li>
  </ul></li>
  <li><a href="#anzahl-von-flüge" id="toc-anzahl-von-flüge" class="nav-link" data-scroll-target="#anzahl-von-flüge"><span class="header-section-number">7.6</span> Anzahl von Flüge</a>
  <ul class="collapse">
  <li><a href="#vorbereitung" id="toc-vorbereitung" class="nav-link" data-scroll-target="#vorbereitung"><span class="header-section-number">7.6.1</span> Vorbereitung</a></li>
  <li><a href="#visualisierung-mit-ggplot" id="toc-visualisierung-mit-ggplot" class="nav-link" data-scroll-target="#visualisierung-mit-ggplot"><span class="header-section-number">7.6.2</span> Visualisierung mit ggplot</a></li>
  <li><a href="#visualisierung-mit-ggpubr" id="toc-visualisierung-mit-ggpubr" class="nav-link" data-scroll-target="#visualisierung-mit-ggpubr"><span class="header-section-number">7.6.3</span> Visualisierung mit ggpubr</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#fazit" id="toc-fazit" class="nav-link" data-scroll-target="#fazit"><span class="header-section-number">8</span> Fazit</a></li>
  <li><a href="#achtung" id="toc-achtung" class="nav-link" data-scroll-target="#achtung"><span class="header-section-number">9</span> Achtung</a></li>
  <li><a href="#reproduzierbarkeit" id="toc-reproduzierbarkeit" class="nav-link" data-scroll-target="#reproduzierbarkeit"><span class="header-section-number">10</span> Reproduzierbarkeit</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">flights-yacsda-eda</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
  <div class="quarto-categories">
    <div class="quarto-category">eda</div>
    <div class="quarto-category">yacsda</div>
    <div class="quarto-category">variability</div>
    <div class="quarto-category">association</div>
  </div>
  </div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">May 9, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="hintergrund-und-ziel" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Hintergrund und Ziel</h1>
<p>Diese Fallstudie zeigt einige mögliche/typische Schritte der explorativen Datenanalyse (EDA) im Hinblick auf die Forschungsfrage “<em>Welche Variablen steht in Zusammenhang mit Flugverspätungen?</em>”.</p>
</section>
<section id="pakete-laden" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Pakete laden</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)  <span class="co"># data wrangling</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(fastDummies)  <span class="co"># nur für "Dummyisierung"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(easystats)  <span class="co"># komfortabel Statistiken ausrechnen</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DataExplorer)  <span class="co"># Daten visualisieren</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggpubr)  <span class="co"># Daten visualisieren</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="daten-laden" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Daten laden</h1>
<p>Der Datensatz kann z.B. hier bezogen werden:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>flights <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://vincentarelbundock.github.io/Rdatasets/csv/nycflights13/flights.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Alternativ findet man den Datensatz auch im Paket <code>nycflights13</code> (das man vorab installiert haben muss).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(flights, <span class="at">package =</span> <span class="st">"nycflights13"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Der Datensatz ist relativ groß:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 336776     19</code></pre>
</div>
</div>
<p>Das sind 19 Variablen, über 300.000 Zeilen.</p>
</section>
<section id="was-ist-verspätung" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Was ist Verspätung?</h1>
<p>Schauen wir uns den Datensatz mal näher an, um die Zielvariable “Verspätung” zu beleuchten.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 336,776
Columns: 19
$ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
$ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
$ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …
$ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …
$ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…
$ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…
$ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…
$ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…
$ carrier        &lt;chr&gt; "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "B6", "…
$ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…
$ tailnum        &lt;chr&gt; "N14228", "N24211", "N619AA", "N804JB", "N668DN", "N394…
$ origin         &lt;chr&gt; "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", "LGA",…
$ dest           &lt;chr&gt; "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", "IAD",…
$ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…
$ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …
$ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…
$ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…
$ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…</code></pre>
</div>
</div>
<p>Es gibt zwei Spalten, die auf Verspätung hinzielen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, arr_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">dep_delay</th>
<th style="text-align: right;">arr_delay</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">33</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-18</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-6</td>
<td style="text-align: right;">-25</td>
</tr>
<tr class="even">
<td style="text-align: right;">-4</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Man könnte auch schreiben, alternativ:</p>
<ul>
<li>Hey R,</li>
<li>Nimm die Tabelle <code>flights</code> und dann</li>
<li>wähle alle Spalten aus, die den Text “delay” enthalten und dann</li>
<li>zeige den Anfang (“Kopf”) der Tabelle</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"delay"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">dep_delay</th>
<th style="text-align: right;">arr_delay</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">11</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: right;">20</td>
</tr>
<tr class="odd">
<td style="text-align: right;">2</td>
<td style="text-align: right;">33</td>
</tr>
<tr class="even">
<td style="text-align: right;">-1</td>
<td style="text-align: right;">-18</td>
</tr>
<tr class="odd">
<td style="text-align: right;">-6</td>
<td style="text-align: right;">-25</td>
</tr>
<tr class="even">
<td style="text-align: right;">-4</td>
<td style="text-align: right;">12</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Ein Blick in die Hilfe lässt uns mehr lernen, was die Spalten bedeuten: <code>help(flights)</code> (wenn das Paket <code>nycflights13</code> geladen ist; alternativ kann man z.B. <a href="https://vincentarelbundock.github.io/Rdatasets/doc/nycflights13/flights.html">hier</a> nachlesen):</p>
<pre><code>dep_delay, arr_delay

Departure and arrival delays, in minutes. 
Negative times represent early departures/arrivals.</code></pre>
<section id="wie-ähnlich-sind-ankunfts--und-abflugsverspätung" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="wie-ähnlich-sind-ankunfts--und-abflugsverspätung"><span class="header-section-number">4.1</span> Wie ähnlich sind Ankunfts- und Abflugsverspätung?</h2>
<p>Da der Datensatz so groß ist, ziehen wir eine Stichprobe (mit <code>sample_n</code>), dann geht alles schneller. Hier <em>nicht</em> wichtig, nur um etwas Zeit beim Plotten zu sparen. In der Praxis würde ich in an dieser Stelle keine Stichprobe ziehen, bzw. mit dem Gesamtdatensatz weiterarbeiten (was wir ja auch im Folgenden tun).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>flights_sample <span class="ot">&lt;-</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">1000</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="diagramm-mit-dataexplorer" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="diagramm-mit-dataexplorer"><span class="header-section-number">4.1.1</span> Diagramm mit DataExplorer</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>flights_sample <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, arr_delay) <span class="sc">|&gt;</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatterplot</span>(<span class="at">by =</span> <span class="st">"arr_delay"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="diagramm-mit-ggplot" class="level3" data-number="4.1.2">
<h3 data-number="4.1.2" class="anchored" data-anchor-id="diagramm-mit-ggplot"><span class="header-section-number">4.1.2</span> Diagramm mit ggplot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>flights_sample <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> dep_delay, <span class="at">x =</span> arr_delay) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="statistiken" class="level3" data-number="4.1.3">
<h3 data-number="4.1.3" class="anchored" data-anchor-id="statistiken"><span class="header-section-number">4.1.3</span> Statistiken</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(dep_delay, arr_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">sd</span>(dep_delay),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sd</span>(arr_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">sd(dep_delay)</th>
<th style="text-align: right;">sd(arr_delay)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">40.06569</td>
<td style="text-align: right;">44.63329</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Das sind ca. 10% Differenz in der Skalierung; wir können die Skalierung komplett angleichen, um Abweichungen, die auf unterschiedlichen Mustern beruhen, besser zu sehen. Dazu hilft uns die z-Transformation.</p>
<p>Die beiden Variablen scheinen ziemlich stark korreliert zu sein.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(dep_delay, arr_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">cor</span>(dep_delay, arr_delay))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">cor(dep_delay, arr_delay)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0.9148028</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Ja, sind sie. Dann ist es vielleicht egal, welche der beiden Variablen wir verwenden. Nehmen wir <code>dep_delay</code>.</p>
</section>
<section id="vertiefung-z-skalierung" class="level3" data-number="4.1.4">
<h3 data-number="4.1.4" class="anchored" data-anchor-id="vertiefung-z-skalierung"><span class="header-section-number">4.1.4</span> Vertiefung: z-Skalierung</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"delay"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dep_delay =</span> <span class="fu">scale</span>(dep_delay),  <span class="co"># z-Transformation</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">arr_delay =</span> <span class="fu">scale</span>(arr_delay)) <span class="sc">%&gt;%</span>   <span class="co"># z-Transformation</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> arr_delay, <span class="at">y =</span> dep_delay) <span class="sc">+</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>() <span class="sc">+</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"grey60"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><code>bin2d</code> wurde hier nur aus dem Grund verwendet, da das Plotten von ein paar Hunderttausend Punkte recht lange dauert. <code>bin2d</code> hingegen ist sehr schnell.</p>
</section>
</section>
</section>
<section id="verteilung-der-verspätung" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Verteilung der Verspätung</h1>
<section id="visualisierung" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="visualisierung"><span class="header-section-number">5.1</span> Visualisierung</h2>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Mit DataExplorer</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Mit ggplot</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Ein sehr langer rechter Rand; die meisten Flüge sind nicht/kaum verspätet; aber einige wenige sind sehr stark verspätet.</p>
<p>Zentrale deskriptive Statistiken könnte man sich mit <code>summary</code> ausgeben lassen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay)) <span class="sc">%&gt;%</span>  <span class="co"># keine fehlenden Werte</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_mean =</span> <span class="fu">mean</span>(dep_delay),</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">depdelay_sd =</span> <span class="fu">sd</span>(dep_delay),</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">depdelay_md =</span> <span class="fu">median</span>(dep_delay),</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">depdelay_iqr =</span> <span class="fu">IQR</span>(dep_delay)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">depdelay_mean</th>
<th style="text-align: right;">depdelay_sd</th>
<th style="text-align: right;">depdelay_md</th>
<th style="text-align: right;">depdelay_iqr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">12.63907</td>
<td style="text-align: right;">40.21006</td>
<td style="text-align: right;">-2</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="vertiefung-wiederholung-mit-across" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="vertiefung-wiederholung-mit-across"><span class="header-section-number">5.1.1</span> Vertiefung: Wiederholung mit <code>across</code></h3>
<p>Oder man benutzt den Befehl <code>across</code>, der es erlaubt, eine oder mehrere Funktionen auf eine oder mehrere Spalten wiederholtanzuwenden (Man spricht von einer “Schleife”). In diesem Beispiel wenden wir mehrere Funktionen (adressiert mit <code>.fns</code>) auf eine Spalte (<code>dep_delay</code>), adressiert mit dem Argument <code>.cols</code> an. Außerdem kann man die Namen der resultierenden Spalten bestimmen mit dem Argument <code>.names</code>. In der geschweiften Klammer steht eine interne Variable, die den Namen der jeweils berechneten Funktion (<code>{fn}</code>) an den Namen der neu erstellten Spalte anfügt; in der Ausgabe sieht man das gut.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.cols =</span> dep_delay,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="fu">list</span>(<span class="at">mean =</span> mean, </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">md =</span> median, </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">sd =</span> sd, </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>                <span class="at">iqr =</span> IQR), <span class="at">na.rm =</span> <span class="cn">TRUE</span>,</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.names =</span> <span class="st">"depdelay_{fn}"</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">depdelay_mean</th>
<th style="text-align: right;">depdelay_md</th>
<th style="text-align: right;">depdelay_sd</th>
<th style="text-align: right;">depdelay_iqr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">12.63907</td>
<td style="text-align: right;">-2</td>
<td style="text-align: right;">40.21006</td>
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
</section>
<section id="flights2-extremwerte-der-verspätung-definieren" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="flights2-extremwerte-der-verspätung-definieren"><span class="header-section-number">5.2</span> flights2: Extremwerte (der Verspätung) definieren</h2>
<p>Es gibt keinen sicheren Weg, mit Extremwerten umzugehen. Häufig macht es Sinn, die Ergebnisse mehrerer Analysen zu vergleichen mit, oder ohne Extremwerten.</p>
<!-- [Quelle dieses Abschnitts](https://data-se.netlify.app/2021/03/08/eda-zu-flugversp%C3%A4tungen/#flights2-extremwerte-definieren) -->
<p>“Wann ist ein Flug <em>sehr</em> verspätet?</p>
<section id="boxplot-methode" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="boxplot-methode"><span class="header-section-number">5.2.1</span> Boxplot-Methode</h3>
<p>Eine Möglichkeit ist die “Boxplot-Methode”: Entferne alle Flüge, die mehr verspätet sind als als das 1.5-fache der IQR über dem 3. Quartil (75. Perzentil): <span class="math inline">\(q75+1.5iqr\)</span></p>
<p>Berechnen wir zunächst das 75. Perzentil (3. Quartil):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">q75 =</span> <span class="fu">quantile</span>(dep_delay, </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">prob =</span> .<span class="dv">75</span>, </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">q75</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">11</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Das sind also etwa 11 Minuten, die die Grenzlinie zwischen den 75% weniger bzw. den 25% stärker verspäteten Flügen markieren.</p>
<p>Dann berechnen wir den IQR:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_iqr =</span> <span class="fu">IQR</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">depdelay_iqr</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Der Grenzwert liegt dem zufolge bei:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>grenzwert <span class="ot">&lt;-</span> <span class="dv">11</span> <span class="sc">+</span> <span class="fl">1.5</span><span class="sc">*</span><span class="dv">16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Das ist kein “gottgegebener” Wert, sondern <em>ein</em> pragmatischer Versuch, einen Grenzwert zu finden. Die Nützlichkeit dieses Grenzwerts müsste sich noch erweisen. Viele andere Grenzwerte lassen sich verteidigen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_extreme =</span> <span class="fu">case_when</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    dep_delay <span class="sc">&gt;</span> <span class="dv">11</span> <span class="sc">+</span> <span class="fl">1.5</span> <span class="sc">*</span> <span class="dv">16</span> <span class="sc">~</span> <span class="cn">TRUE</span>, <span class="co"># Verspätung &gt; 35 Min.</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    dep_delay <span class="sc">&lt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="cn">FALSE</span>  <span class="co"># in den anderen Fällen (&lt;= 35 Min.), dann kein Extremwert</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="fehlende-werte-berechnen" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="fehlende-werte-berechnen"><span class="header-section-number">5.3</span> Fehlende Werte berechnen</h2>
<p>Wie viele fehlende Werte gibt es eigentlich in <code>dep_delay</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe_distribution</span>(dep_delay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 13%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 9%">
<col style="width: 13%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">IQR</th>
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Max</th>
<th style="text-align: right;">Skewness</th>
<th style="text-align: right;">Kurtosis</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">n_Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">12.63907</td>
<td style="text-align: right;">40.21006</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">-43</td>
<td style="text-align: right;">1301</td>
<td style="text-align: right;">4.802541</td>
<td style="text-align: right;">43.95012</td>
<td style="text-align: right;">328521</td>
<td style="text-align: right;">8255</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Alternativ, und weniger komfortabel könnte man sagen</p>
<ul>
<li>Hey R,</li>
<li>nimm die Tabelle <code>flights</code> und dann</li>
<li>fasse die Spalte <code>dep_delay</code> zu einer Zahl zusammen und zwar</li>
<li>anhand der <em>Summe</em> (<code>sum</code>) der fehlenden Werten (<code>is.na</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(dep_delay)))  <span class="co"># fehlende Werte zählen</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">sum(is.na(dep_delay))</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">8255</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Wie viele Fälle gingen verloren, wenn wir die Fälle mit fehlenden Werten bei <code>dep_delay</code> entfernten?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 328521</code></pre>
</div>
</div>
<p>Und wenn wir <em>alle</em> fehlenden Werte entfernen würden?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 327346</code></pre>
</div>
</div>
<p>Wir verlieren nicht viele Fälle mehr, wenn wir die fehlenden Werte aller Variablen (Spalten) entfernen. Also machen wir das mal.</p>
<section id="vertiefung-across" class="level3" data-number="5.3.1">
<h3 data-number="5.3.1" class="anchored" data-anchor-id="vertiefung-across"><span class="header-section-number">5.3.1</span> Vertiefung: across</h3>
<p>So bekommt man die fehlenden Werte für alle Spalten auf einmal:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.x))))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 3%">
<col style="width: 3%">
<col style="width: 2%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 4%">
<col style="width: 3%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 6%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">year</th>
<th style="text-align: right;">month</th>
<th style="text-align: right;">day</th>
<th style="text-align: right;">dep_time</th>
<th style="text-align: right;">sched_dep_time</th>
<th style="text-align: right;">dep_delay</th>
<th style="text-align: right;">arr_time</th>
<th style="text-align: right;">sched_arr_time</th>
<th style="text-align: right;">arr_delay</th>
<th style="text-align: right;">carrier</th>
<th style="text-align: right;">flight</th>
<th style="text-align: right;">tailnum</th>
<th style="text-align: right;">origin</th>
<th style="text-align: right;">dest</th>
<th style="text-align: right;">air_time</th>
<th style="text-align: right;">distance</th>
<th style="text-align: right;">hour</th>
<th style="text-align: right;">minute</th>
<th style="text-align: right;">time_hour</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8255</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">8255</td>
<td style="text-align: right;">8713</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9430</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2512</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">9430</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Ehrlicherweise muss man sagen, dass man mit <code>describe_distribution</code> auch komfortabel die fehlenden Werte für alle Spalten bekommt.</p>
</section>
</section>
<section id="flights3" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="flights3"><span class="header-section-number">5.4</span> flights3</h2>
<p>Achtung: dieses Vorgehen hier ist gefährlich. U.U. verliert man sehr viele Zeilen (Beobachtungen).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>flights3 <span class="ot">&lt;-</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>year)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Die Spalte <code>year</code> ist kontant (immer der Wert “2013”); daher ist die Spalte nutzlos, sie birgt keine Information. Wir können sie gefahrlos löschen.</p>
</section>
</section>
<section id="deskriptive-statistiken" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Deskriptive Statistiken</h1>
<section id="mit-summarise" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="mit-summarise"><span class="header-section-number">6.1</span> Mit <code>summarise</code></h2>
<p>Das kann machen mit <code>summarise</code>. Einfach, kann aber viel Tipperei bedeuten:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(dep_delay),</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sd</span>(dep_delay),</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mean</span>(arr_delay),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sd</span>(arr_delay))  <span class="co"># und so weiter</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">mean(dep_delay)</th>
<th style="text-align: right;">sd(dep_delay)</th>
<th style="text-align: right;">mean(arr_delay)</th>
<th style="text-align: right;">sd(arr_delay)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="mit-describe_distribution" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="mit-describe_distribution"><span class="header-section-number">6.2</span> Mit <code>describe_distribution</code></h2>
<p><code>describe_distribution</code> ist sehr praktisch; man bekommt viele Statistiken auf einmal gezeigt; das spart viel Tipperei.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe_distribution</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 16%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 7%">
<col style="width: 10%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Variable</th>
<th style="text-align: right;">Mean</th>
<th style="text-align: right;">SD</th>
<th style="text-align: right;">IQR</th>
<th style="text-align: right;">Min</th>
<th style="text-align: right;">Max</th>
<th style="text-align: right;">Skewness</th>
<th style="text-align: right;">Kurtosis</th>
<th style="text-align: right;">n</th>
<th style="text-align: right;">n_Missing</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: right;">2013.000000</td>
<td style="text-align: right;">0.000000</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">2013</td>
<td style="text-align: right;">2013</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">NaN</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: right;">6.548510</td>
<td style="text-align: right;">3.414457</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">-0.0133999</td>
<td style="text-align: right;">-1.1869501</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">day</td>
<td style="text-align: right;">15.710787</td>
<td style="text-align: right;">8.768607</td>
<td style="text-align: right;">15</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">0.0077445</td>
<td style="text-align: right;">-1.1859454</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_time</td>
<td style="text-align: right;">1349.109947</td>
<td style="text-align: right;">488.281791</td>
<td style="text-align: right;">837</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2400</td>
<td style="text-align: right;">-0.0247435</td>
<td style="text-align: right;">-1.0883200</td>
<td style="text-align: right;">328521</td>
<td style="text-align: right;">8255</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: right;">1344.254840</td>
<td style="text-align: right;">467.335756</td>
<td style="text-align: right;">823</td>
<td style="text-align: right;">106</td>
<td style="text-align: right;">2359</td>
<td style="text-align: right;">-0.0058581</td>
<td style="text-align: right;">-1.1979031</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">12.639070</td>
<td style="text-align: right;">40.210061</td>
<td style="text-align: right;">16</td>
<td style="text-align: right;">-43</td>
<td style="text-align: right;">1301</td>
<td style="text-align: right;">4.8025405</td>
<td style="text-align: right;">43.9501160</td>
<td style="text-align: right;">328521</td>
<td style="text-align: right;">8255</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">1502.054999</td>
<td style="text-align: right;">533.264132</td>
<td style="text-align: right;">836</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2400</td>
<td style="text-align: right;">-0.4678191</td>
<td style="text-align: right;">-0.1926344</td>
<td style="text-align: right;">328063</td>
<td style="text-align: right;">8713</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">1536.380220</td>
<td style="text-align: right;">497.457141</td>
<td style="text-align: right;">821</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2359</td>
<td style="text-align: right;">-0.3531381</td>
<td style="text-align: right;">-0.3822478</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">6.895377</td>
<td style="text-align: right;">44.633292</td>
<td style="text-align: right;">31</td>
<td style="text-align: right;">-86</td>
<td style="text-align: right;">1272</td>
<td style="text-align: right;">3.7168175</td>
<td style="text-align: right;">29.2330440</td>
<td style="text-align: right;">327346</td>
<td style="text-align: right;">9430</td>
</tr>
<tr class="even">
<td style="text-align: left;">flight</td>
<td style="text-align: right;">1971.923620</td>
<td style="text-align: right;">1632.471938</td>
<td style="text-align: right;">2912</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">8500</td>
<td style="text-align: right;">0.6616036</td>
<td style="text-align: right;">-0.8485607</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">150.686460</td>
<td style="text-align: right;">93.688305</td>
<td style="text-align: right;">110</td>
<td style="text-align: right;">20</td>
<td style="text-align: right;">695</td>
<td style="text-align: right;">1.0707052</td>
<td style="text-align: right;">0.8630770</td>
<td style="text-align: right;">327346</td>
<td style="text-align: right;">9430</td>
</tr>
<tr class="even">
<td style="text-align: left;">distance</td>
<td style="text-align: right;">1039.912604</td>
<td style="text-align: right;">733.233033</td>
<td style="text-align: right;">887</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">4983</td>
<td style="text-align: right;">1.1286902</td>
<td style="text-align: right;">1.1936399</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hour</td>
<td style="text-align: right;">13.180247</td>
<td style="text-align: right;">4.661316</td>
<td style="text-align: right;">8</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">23</td>
<td style="text-align: right;">-0.0005427</td>
<td style="text-align: right;">-1.2064161</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">minute</td>
<td style="text-align: right;">26.230100</td>
<td style="text-align: right;">19.300846</td>
<td style="text-align: right;">36</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">0.0929309</td>
<td style="text-align: right;">-1.2350180</td>
<td style="text-align: right;">336776</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- ## Mit `skimr`  -->
<!-- Das Paket `skimr` mit der Funktion `skim` ist sehr ähnlich zu `describe_distribution`. Allerdings gibt `skim` auch eine Beschreibung zu den  -->
</section>
</section>
<section id="korrelate-von-verspätung" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Korrelate von Verspätung</h1>
<p>Schauen wir, welche Variablen mit <code>dep_delay</code>, der Verspätung der Flüge also, korrelieren.</p>
<section id="metrische-prädiktoren" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="metrische-prädiktoren"><span class="header-section-number">7.1</span> Metrische Prädiktoren</h2>
<section id="nur-mit-cor" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="nur-mit-cor"><span class="header-section-number">7.1.1</span> Nur mit <code>cor</code></h3>
<p>Am einfachsten geht es so. Der Nachteil ist mehr (viel) Tipperei:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span>  <span class="co"># wähle alle numerischen Spalten</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cor_month =</span> <span class="fu">cor</span>(dep_delay, month),</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">cor_day =</span> <span class="fu">cor</span>(dep_delay, day),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">cor_dep_time =</span> <span class="fu">cor</span>(dep_delay, dep_time))  <span class="co"># etc</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">cor_month</th>
<th style="text-align: right;">cor_day</th>
<th style="text-align: right;">cor_dep_time</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">-0.0200547</td>
<td style="text-align: right;">0.0005914</td>
<td style="text-align: right;">0.2596127</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="mit-easystats" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2" class="anchored" data-anchor-id="mit-easystats"><span class="header-section-number">7.1.2</span> Mit <code>easystats</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlation</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 11%">
<col style="width: 11%">
<col style="width: 8%">
<col style="width: 3%">
<col style="width: 8%">
<col style="width: 8%">
<col style="width: 10%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 15%">
<col style="width: 5%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Parameter1</th>
<th style="text-align: left;">Parameter2</th>
<th style="text-align: right;">r</th>
<th style="text-align: right;">CI</th>
<th style="text-align: right;">CI_low</th>
<th style="text-align: right;">CI_high</th>
<th style="text-align: right;">t</th>
<th style="text-align: right;">df_error</th>
<th style="text-align: right;">p</th>
<th style="text-align: left;">Method</th>
<th style="text-align: right;">n_Obs</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">month</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">day</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">dep_time</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">year</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">year</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">NA</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: left;">day</td>
<td style="text-align: right;">0.0029423</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0004350</td>
<td style="text-align: right;">0.0063197</td>
<td style="text-align: right;">1.7075186</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">dep_time</td>
<td style="text-align: right;">-0.0039324</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0073519</td>
<td style="text-align: right;">-0.0005129</td>
<td style="text-align: right;">-2.2539453</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.3388037</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: right;">-0.0045726</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0079499</td>
<td style="text-align: right;">-0.0011953</td>
<td style="text-align: right;">-2.6536338</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.1274143</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">-0.0200570</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0234749</td>
<td style="text-align: right;">-0.0166386</td>
<td style="text-align: right;">-11.4983104</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">-0.0025199</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0059418</td>
<td style="text-align: right;">0.0009020</td>
<td style="text-align: right;">-1.4433357</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">-0.0041727</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0075500</td>
<td style="text-align: right;">-0.0007954</td>
<td style="text-align: right;">-2.4215548</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.2318219</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">-0.0173820</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0208064</td>
<td style="text-align: right;">-0.0139572</td>
<td style="text-align: right;">-9.9464509</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">-0.0008341</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0042114</td>
<td style="text-align: right;">0.0025433</td>
<td style="text-align: right;">-0.4840347</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">0.0109242</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0074988</td>
<td style="text-align: right;">0.0143493</td>
<td style="text-align: right;">6.2505247</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">0.0216356</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0182596</td>
<td style="text-align: right;">0.0250112</td>
<td style="text-align: right;">12.5585894</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">month</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">-0.0052274</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0086046</td>
<td style="text-align: right;">-0.0018501</td>
<td style="text-align: right;">-3.0336183</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0410819</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0155277</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0121509</td>
<td style="text-align: right;">0.0189040</td>
<td style="text-align: right;">9.0121387</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">dep_time</td>
<td style="text-align: right;">-0.0004674</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0038869</td>
<td style="text-align: right;">0.0029522</td>
<td style="text-align: right;">-0.2678812</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">day</td>
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: right;">-0.0000144</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0033917</td>
<td style="text-align: right;">0.0033630</td>
<td style="text-align: right;">-0.0083485</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">0.0004200</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0029995</td>
<td style="text-align: right;">0.0038395</td>
<td style="text-align: right;">0.2407375</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">day</td>
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">-0.0055369</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0089587</td>
<td style="text-align: right;">-0.0021151</td>
<td style="text-align: right;">-3.1714238</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0273074</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">-0.0024028</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0057801</td>
<td style="text-align: right;">0.0009746</td>
<td style="text-align: right;">-1.3943765</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">day</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">-0.0003192</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0037448</td>
<td style="text-align: right;">0.0031065</td>
<td style="text-align: right;">-0.1826024</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">-0.0017908</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0051681</td>
<td style="text-align: right;">0.0015866</td>
<td style="text-align: right;">-1.0392164</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">day</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">0.0022364</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0011893</td>
<td style="text-align: right;">0.0056620</td>
<td style="text-align: right;">1.2795263</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">0.0030413</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0003361</td>
<td style="text-align: right;">0.0064186</td>
<td style="text-align: right;">1.7649426</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">day</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">-0.0000553</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0034326</td>
<td style="text-align: right;">0.0033221</td>
<td style="text-align: right;">-0.0320789</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0009867</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0023907</td>
<td style="text-align: right;">0.0043640</td>
<td style="text-align: right;">0.5725883</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">1.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: right;">0.9546169</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.9543125</td>
<td style="text-align: right;">0.9549192</td>
<td style="text-align: right;">1837.0937739</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">0.2602312</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.2570404</td>
<td style="text-align: right;">0.2634164</td>
<td style="text-align: right;">154.4779649</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">0.6607789</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.6588467</td>
<td style="text-align: right;">0.6627023</td>
<td style="text-align: right;">504.2386087</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">0.7846824</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.7833648</td>
<td style="text-align: right;">0.7859929</td>
<td style="text-align: right;">725.5275036</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">0.2323057</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.2290624</td>
<td style="text-align: right;">0.2355439</td>
<td style="text-align: right;">136.6497146</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0419571</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0385431</td>
<td style="text-align: right;">0.0453701</td>
<td style="text-align: right;">24.0695668</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">-0.0146195</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0180442</td>
<td style="text-align: right;">-0.0111944</td>
<td style="text-align: right;">-8.3652793</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">-0.0139982</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0174169</td>
<td style="text-align: right;">-0.0105792</td>
<td style="text-align: right;">-8.0240834</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.9533056</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.9529927</td>
<td style="text-align: right;">0.9536165</td>
<td style="text-align: right;">1809.2355940</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_time</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0915767</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0881848</td>
<td style="text-align: right;">0.0949665</td>
<td style="text-align: right;">52.7101121</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">0.1988867</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.1956002</td>
<td style="text-align: right;">0.2021688</td>
<td style="text-align: right;">116.3188193</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">0.6426802</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.6406672</td>
<td style="text-align: right;">0.6446843</td>
<td style="text-align: right;">480.4710020</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">0.7833425</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.7820341</td>
<td style="text-align: right;">0.7846440</td>
<td style="text-align: right;">731.3355602</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">0.1738962</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.1705721</td>
<td style="text-align: right;">0.1772163</td>
<td style="text-align: right;">101.0322717</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0364947</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0331214</td>
<td style="text-align: right;">0.0398672</td>
<td style="text-align: right;">21.1928124</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">-0.0155321</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0189568</td>
<td style="text-align: right;">-0.0121071</td>
<td style="text-align: right;">-8.8876246</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">-0.0179950</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0213710</td>
<td style="text-align: right;">-0.0146185</td>
<td style="text-align: right;">-10.4445684</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.9991483</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.9991425</td>
<td style="text-align: right;">0.9991540</td>
<td style="text-align: right;">14051.7706130</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0829598</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0796047</td>
<td style="text-align: right;">0.0863129</td>
<td style="text-align: right;">48.3099293</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">0.0287288</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0253094</td>
<td style="text-align: right;">0.0321476</td>
<td style="text-align: right;">16.4616791</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">0.1604885</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.1571552</td>
<td style="text-align: right;">0.1638181</td>
<td style="text-align: right;">93.1945228</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">0.9148028</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.9142422</td>
<td style="text-align: right;">0.9153599</td>
<td style="text-align: right;">1295.8504088</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0547337</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0513238</td>
<td style="text-align: right;">0.0581424</td>
<td style="text-align: right;">31.4185914</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">-0.0224051</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0258288</td>
<td style="text-align: right;">-0.0189809</td>
<td style="text-align: right;">-12.8220570</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">-0.0216708</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0250885</td>
<td style="text-align: right;">-0.0182526</td>
<td style="text-align: right;">-12.4238721</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.1982259</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.1949385</td>
<td style="text-align: right;">0.2015089</td>
<td style="text-align: right;">115.9165150</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0284409</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0250238</td>
<td style="text-align: right;">0.0318573</td>
<td style="text-align: right;">16.3079309</td>
<td style="text-align: right;">328519</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328521</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">0.7889971</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.7877018</td>
<td style="text-align: right;">0.7902853</td>
<td style="text-align: right;">735.5354750</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">0.0244821</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0210582</td>
<td style="text-align: right;">0.0279055</td>
<td style="text-align: right;">14.0114093</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0250418</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0216217</td>
<td style="text-align: right;">0.0284613</td>
<td style="text-align: right;">14.3475801</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">0.0542960</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0508798</td>
<td style="text-align: right;">0.0577110</td>
<td style="text-align: right;">31.1108134</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">0.0469912</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0435763</td>
<td style="text-align: right;">0.0504051</td>
<td style="text-align: right;">26.9447568</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.6426514</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.6406383</td>
<td style="text-align: right;">0.6446556</td>
<td style="text-align: right;">480.4342878</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_time</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0409691</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0375524</td>
<td style="text-align: right;">0.0443848</td>
<td style="text-align: right;">23.4854231</td>
<td style="text-align: right;">328061</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">328063</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">0.1332613</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.1298949</td>
<td style="text-align: right;">0.1366246</td>
<td style="text-align: right;">76.9302376</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0215937</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0182176</td>
<td style="text-align: right;">0.0249692</td>
<td style="text-align: right;">12.5342010</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">0.0789183</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0755131</td>
<td style="text-align: right;">0.0823217</td>
<td style="text-align: right;">45.2935710</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">0.0687259</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0653637</td>
<td style="text-align: right;">0.0720865</td>
<td style="text-align: right;">39.9777082</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.7832825</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.7819738</td>
<td style="text-align: right;">0.7845843</td>
<td style="text-align: right;">731.1906842</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0503212</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0469518</td>
<td style="text-align: right;">0.0536895</td>
<td style="text-align: right;">29.2395738</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0728621</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0694537</td>
<td style="text-align: right;">0.0762687</td>
<td style="text-align: right;">41.7983960</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">-0.0352971</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0387181</td>
<td style="text-align: right;">-0.0318753</td>
<td style="text-align: right;">-20.2074620</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">-0.0618678</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0652796</td>
<td style="text-align: right;">-0.0584545</td>
<td style="text-align: right;">-35.4649465</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.1734556</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.1701310</td>
<td style="text-align: right;">0.1767762</td>
<td style="text-align: right;">100.7683213</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0215222</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0180979</td>
<td style="text-align: right;">0.0249460</td>
<td style="text-align: right;">12.3165691</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">flight</td>
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">-0.4728384</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.4754938</td>
<td style="text-align: right;">-0.4701743</td>
<td style="text-align: right;">-307.0191395</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flight</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">-0.4841654</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.4867468</td>
<td style="text-align: right;">-0.4815755</td>
<td style="text-align: right;">-321.1194483</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">flight</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.0358380</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0324646</td>
<td style="text-align: right;">0.0392106</td>
<td style="text-align: right;">20.8109689</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flight</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0181366</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0147602</td>
<td style="text-align: right;">0.0215127</td>
<td style="text-align: right;">10.5268290</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">air_time</td>
<td style="text-align: left;">distance</td>
<td style="text-align: right;">0.9906496</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.9905857</td>
<td style="text-align: right;">0.9907132</td>
<td style="text-align: right;">4154.4244720</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">air_time</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">-0.0162773</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0197018</td>
<td style="text-align: right;">-0.0128523</td>
<td style="text-align: right;">-9.3141118</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="even">
<td style="text-align: left;">air_time</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0170318</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0136070</td>
<td style="text-align: right;">0.0204563</td>
<td style="text-align: right;">9.7459979</td>
<td style="text-align: right;">327344</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">327346</td>
</tr>
<tr class="odd">
<td style="text-align: left;">distance</td>
<td style="text-align: left;">hour</td>
<td style="text-align: right;">-0.0188605</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">-0.0222364</td>
<td style="text-align: right;">-0.0154841</td>
<td style="text-align: right;">-10.9470924</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="even">
<td style="text-align: left;">distance</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0197798</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0164035</td>
<td style="text-align: right;">0.0231556</td>
<td style="text-align: right;">11.4809042</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hour</td>
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0417676</td>
<td style="text-align: right;">0.95</td>
<td style="text-align: right;">0.0383957</td>
<td style="text-align: right;">0.0451386</td>
<td style="text-align: right;">24.2598646</td>
<td style="text-align: right;">336774</td>
<td style="text-align: right;">0.0000000</td>
<td style="text-align: left;">Pearson correlation</td>
<td style="text-align: right;">336776</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="vertiefung-mit-across" class="level3" data-number="7.1.3">
<h3 data-number="7.1.3" class="anchored" data-anchor-id="vertiefung-mit-across"><span class="header-section-number">7.1.3</span> Vertiefung: Mit <code>across</code></h3>
<p>Berechnen wir die Korrelationen jetzt mit dem Befehl <code>across</code>. Der Punkt <code>.</code> spricht hier jeweils eine Spalte an, die von <code>across</code> ausgewählt wurde. Der Effekt ist, dass eine Korrelation von jeder Spalte mit <code>dep_delay</code> berechnet wird.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span>  <span class="co"># nur die numerischen Spalten auswählen</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">cor</span>(., dep_delay))) <span class="sc">%&gt;%</span> </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()) <span class="sc">%&gt;%</span>  <span class="co"># von breit auf lang</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>value)  <span class="co"># absteigend sortieren</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: right;">value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">dep_delay</td>
<td style="text-align: right;">1.0000000</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_delay</td>
<td style="text-align: right;">0.9148028</td>
</tr>
<tr class="odd">
<td style="text-align: left;">dep_time</td>
<td style="text-align: right;">0.2596127</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_dep_time</td>
<td style="text-align: right;">0.1989235</td>
</tr>
<tr class="odd">
<td style="text-align: left;">hour</td>
<td style="text-align: right;">0.1982692</td>
</tr>
<tr class="even">
<td style="text-align: left;">sched_arr_time</td>
<td style="text-align: right;">0.1604972</td>
</tr>
<tr class="odd">
<td style="text-align: left;">flight</td>
<td style="text-align: right;">0.0539697</td>
</tr>
<tr class="even">
<td style="text-align: left;">arr_time</td>
<td style="text-align: right;">0.0294210</td>
</tr>
<tr class="odd">
<td style="text-align: left;">minute</td>
<td style="text-align: right;">0.0282514</td>
</tr>
<tr class="even">
<td style="text-align: left;">day</td>
<td style="text-align: right;">0.0005914</td>
</tr>
<tr class="odd">
<td style="text-align: left;">month</td>
<td style="text-align: right;">-0.0200547</td>
</tr>
<tr class="even">
<td style="text-align: left;">distance</td>
<td style="text-align: right;">-0.0216809</td>
</tr>
<tr class="odd">
<td style="text-align: left;">air_time</td>
<td style="text-align: right;">-0.0224051</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- ### Mit `correlate`  -->
<!-- Oder so, das ist vielleicht einfacher: -->
<!-- ```{r} -->
<!-- flights2 %>%  -->
<!--   select(where(is.numeric)) %>%  # alle metrischen Variablen, aber sonst keine -->
<!--   correlate() %>%   # korreliere, was du hast -->
<!--   focus(dep_delay) %>%  # beschränke (fokussiere) dich auf `dep_delay` -->
<!--   arrange(-dep_delay) -->
<!-- ``` -->
</section>
</section>
<section id="nominale-prädiktoren" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="nominale-prädiktoren"><span class="header-section-number">7.2</span> Nominale Prädiktoren</h2>
<section id="welche-nominalen-prädiktoren-gibt-es" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="welche-nominalen-prädiktoren-gibt-es"><span class="header-section-number">7.2.1</span> Welche nominalen Prädiktoren gibt es?</h3>
<p>Hey R, wähle alle nicht numerischen Spalten aus und sage mir deren Namen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="fu">negate</span>(is.numeric))) <span class="sc">%&gt;%</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "carrier"    "tailnum"    "origin"     "dest"       "time_hour" 
[6] "is_extreme"</code></pre>
</div>
</div>
<p>Jetzt kann man für jede nominale Variable die Anzahl der unterschiedlichen Ausprägungen abfragen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n_distinct</span>(carrier))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: right;">n_distinct(carrier)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">16</td>
</tr>
</tbody>
</table>
</div>
</div>
<!-- ```{r} -->
<!-- flights2 %>%  -->
<!--   select(where(negate(is.numeric))) %>%  -->
<!--   summarise(across( -->
<!--     .cols = everything(), -->
<!--     .fns = list(ndist = n_distinct) -->
<!--   )) %>%  -->
<!--   pivot_longer(everything()) -->
<!-- ``` -->
<!-- Geht auch mit `skim`, s. oben, ist einfacher. -->
</section>
<section id="carrier" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="carrier"><span class="header-section-number">7.2.2</span> Carrier</h3>
<p><code>carrier</code> meint die Fluggesellschaft, die den jeweiligen Flug durchgeführt hat. Da stellen sich eine Reihe interessanter Fragen:</p>
<ul>
<li>Wie viele verschiedene Fluggesellschaften gibt es?</li>
<li>Wie viele Flüge hat jede davon ausgeführt?</li>
<li>Welche Fluggesellschaft hat die meisten Flüge ausgeführt?</li>
<li>Gibt es große Unterschiede in de Zahl der ausgeführten Flüge.</li>
<li>Wer hat eigentlich die flüssige Seife erfunden?</li>
</ul>
<p>Fragen über Fragen…</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>flights2_count <span class="ot">&lt;-</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(carrier, <span class="at">sort =</span> <span class="cn">TRUE</span>) </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>flights2_count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">carrier</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">UA</td>
<td style="text-align: right;">58665</td>
</tr>
<tr class="even">
<td style="text-align: left;">B6</td>
<td style="text-align: right;">54635</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EV</td>
<td style="text-align: right;">54173</td>
</tr>
<tr class="even">
<td style="text-align: left;">DL</td>
<td style="text-align: right;">48110</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AA</td>
<td style="text-align: right;">32729</td>
</tr>
<tr class="even">
<td style="text-align: left;">MQ</td>
<td style="text-align: right;">26397</td>
</tr>
<tr class="odd">
<td style="text-align: left;">US</td>
<td style="text-align: right;">20536</td>
</tr>
<tr class="even">
<td style="text-align: left;">9E</td>
<td style="text-align: right;">18460</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WN</td>
<td style="text-align: right;">12275</td>
</tr>
<tr class="even">
<td style="text-align: left;">VX</td>
<td style="text-align: right;">5162</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FL</td>
<td style="text-align: right;">3260</td>
</tr>
<tr class="even">
<td style="text-align: left;">AS</td>
<td style="text-align: right;">714</td>
</tr>
<tr class="odd">
<td style="text-align: left;">F9</td>
<td style="text-align: right;">685</td>
</tr>
<tr class="even">
<td style="text-align: left;">YV</td>
<td style="text-align: right;">601</td>
</tr>
<tr class="odd">
<td style="text-align: left;">HA</td>
<td style="text-align: right;">342</td>
</tr>
<tr class="even">
<td style="text-align: left;">OO</td>
<td style="text-align: right;">32</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Wir brauchen eine Visualisierung dazu; das beantwortet vielleicht einen Teil der obigen Fragen.</p>
</section>
<section id="visualisierung-von-carrier" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="visualisierung-von-carrier"><span class="header-section-number">7.2.3</span> Visualisierung von <code>carrier</code></h3>
</section>
<section id="mit-dataexplorer-1" class="level3" data-number="7.2.4">
<h3 data-number="7.2.4" class="anchored" data-anchor-id="mit-dataexplorer-1"><span class="header-section-number">7.2.4</span> Mit <code>DataExplorer</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>flights2_count <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatterplot</span>(<span class="at">by =</span> <span class="st">"n"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-ggplot-1" class="level3" data-number="7.2.5">
<h3 data-number="7.2.5" class="anchored" data-anchor-id="mit-ggplot-1"><span class="header-section-number">7.2.5</span> Mit <code>ggplot</code></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  flights2_count <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> carrier, <span class="at">x =</span> n) <span class="sc">+</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>plot1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Wir müssen die Werte von <code>carrier</code> sortieren anhand der Anzahl der Flüge, sonst ist es zu unübersichtlich.</p>
</section>
<section id="vertiefung-achsen-labels-anpassen" class="level3" data-number="7.2.6">
<h3 data-number="7.2.6" class="anchored" data-anchor-id="vertiefung-achsen-labels-anpassen"><span class="header-section-number">7.2.6</span> Vertiefung: Achsen-Labels anpassen</h3>
<p><em>Dieser Abschnitt ist zur Vertiefung, er ist nicht inhaltlich wichtig</em></p>
<p>Sagen wir, wir möchten die Labels der X-Achse anpassen, und zwar möchten wir die Werte 25.000, 50.000, und 75.0000.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>plot1 <span class="sc">+</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25000</span>, <span class="dv">50000</span>, <span class="dv">75000</span>),</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100000</span>),</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"keine"</span>, <span class="st">"wenig"</span>, <span class="st">"mittel"</span>, <span class="st">"viel"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Hm, schön sieht es noch nicht aus; die <code>limits</code> machen nicht unbedingt Sinn. Die <code>labels</code> sind auch wenig sinnvoll.</p>
<p>Mehr zum Thema “Achsen aufhübschen” findet sich z.B. <a href="https://rkabacoff.github.io/datavis/Customizing.html#axes">hier</a>.</p>
</section>
<section id="lumpsensammler-kategorie" class="level3" data-number="7.2.7">
<h3 data-number="7.2.7" class="anchored" data-anchor-id="lumpsensammler-kategorie"><span class="header-section-number">7.2.7</span> “Lumpsensammler-Kategorie”</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a>  flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">carrier =</span> <span class="fu">factor</span>(carrier)) <span class="sc">%&gt;%</span>   <span class="co"># nicht `character`, sondern `factor` wollen</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">carrier_lump =</span> <span class="fu">fct_lump</span>(carrier, <span class="at">n =</span> <span class="dv">8</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hier fassen wir mit <code>fct_lump</code> alle Stufen von <code>carrier</code> zu <em>acht</em> Stufen (daher <code>n = 8</code>) zusammen <em>plus</em> einer “<em>Lump</em>ensammler-Kategorie” zusammen. Dazu muss die Variable aber als <code>factor</code> vorliegen, was wir in der Zeile davor erledigt haben.</p>
<p>Jetzt haben wir noch nur 9 (8 plus Lumpensammler-Gruppe) Gruppen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>flights2_lump_count <span class="ot">&lt;-</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select(carrier) %&gt;% </span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(carrier_lump = fct_lump(carrier, n = 8)) |&gt; </span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(carrier_lump, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>flights2_lump_count</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">carrier_lump</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">UA</td>
<td style="text-align: right;">58665</td>
</tr>
<tr class="even">
<td style="text-align: left;">B6</td>
<td style="text-align: right;">54635</td>
</tr>
<tr class="odd">
<td style="text-align: left;">EV</td>
<td style="text-align: right;">54173</td>
</tr>
<tr class="even">
<td style="text-align: left;">DL</td>
<td style="text-align: right;">48110</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AA</td>
<td style="text-align: right;">32729</td>
</tr>
<tr class="even">
<td style="text-align: left;">MQ</td>
<td style="text-align: right;">26397</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other</td>
<td style="text-align: right;">23071</td>
</tr>
<tr class="even">
<td style="text-align: left;">US</td>
<td style="text-align: right;">20536</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9E</td>
<td style="text-align: right;">18460</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="visualisierung-der-lumpensammler" class="level3" data-number="7.2.8">
<h3 data-number="7.2.8" class="anchored" data-anchor-id="visualisierung-der-lumpensammler"><span class="header-section-number">7.2.8</span> Visualisierung der Lumpensammler</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>flights2_count <span class="ot">&lt;-</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  flights2_count <span class="sc">|&gt;</span> </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">carrier =</span>  <span class="fu">fct_reorder</span>(carrier, n)) <span class="sc">|&gt;</span> </span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(carrier, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mit <code>fct_reorder</code> haben wir die Werte von <code>carrier</code> (UA, B6, AA, …) sortiert und zwar anhand der Werte von <code>n</code>, also anhand der Häufigkeit. Es resultiert eine Rangfolge: <code>UA &gt; B6 &gt; EV &gt; DL &gt; ...</code> etc. (Nur) Mit einer sortierten Faktorvariable lässt sich entsprechendes Diagramm gut sortiert darstellen.</p>
<section id="mit-ggplot-2" class="level4" data-number="7.2.8.1">
<h4 data-number="7.2.8.1" class="anchored" data-anchor-id="mit-ggplot-2"><span class="header-section-number">7.2.8.1</span> Mit ggplot</h4>
<p>Liniendiagramm:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>flights2_lump_count <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> carrier_lump, <span class="at">x =</span> n) <span class="sc">+</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Ah, schon besser. Aber recht informationsarm, das Diagramm. Informationsreicher als das Liniendiagramm ist ein Boxplot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> carrier_lump, </span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Eine alternative Darstellung wäre ein <a href="https://rdrr.io/cran/lvplot/man/geom_lv.html">Letter Value Plot</a>.</p>
<p>Schauen wir uns mal die Mediane genauer an:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier_lump) <span class="sc">%&gt;%</span> </span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dep_delay =</span> <span class="fu">median</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(dep_delay)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">carrier_lump</th>
<th style="text-align: right;">dep_delay</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">US</td>
<td style="text-align: right;">-5</td>
</tr>
<tr class="even">
<td style="text-align: left;">MQ</td>
<td style="text-align: right;">-4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">9E</td>
<td style="text-align: right;">-3</td>
</tr>
<tr class="even">
<td style="text-align: left;">AA</td>
<td style="text-align: right;">-3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DL</td>
<td style="text-align: right;">-3</td>
</tr>
<tr class="even">
<td style="text-align: left;">EV</td>
<td style="text-align: right;">-3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">B6</td>
<td style="text-align: right;">-2</td>
</tr>
<tr class="even">
<td style="text-align: left;">UA</td>
<td style="text-align: right;">-1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Other</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Die Reihenfolge entspricht der dem obigen Diagramm.</p>
</section>
</section>
</section>
<section id="korrelation-von-carrier-mit-verspätung" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="korrelation-von-carrier-mit-verspätung"><span class="header-section-number">7.3</span> Korrelation von <code>carrier</code> mit Verspätung</h2>
<p>Hier mit “Dummysierung” aller nicht-numerischer Spalten. Ein Beispiel zur Verdeutlichung:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span> </span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a>  flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">originJFK =</span> <span class="fu">case_when</span>(</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>      origin <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># "1" wenn JFK, </span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>      origin <span class="sc">!=</span> <span class="st">"JFK"</span> <span class="sc">~</span> <span class="dv">0</span>   <span class="co"># ansonsten 0</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>    ),  </span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">originLGA =</span> <span class="fu">case_when</span>(</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a>      origin <span class="sc">==</span> <span class="st">"LGA"</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># "1" wenn LGA,</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>,  <span class="co"># in allen anderen Fällen ("TRUE") 0</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, originJFK, originLGA) <span class="sc">%&gt;%</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">origin</th>
<th style="text-align: right;">originJFK</th>
<th style="text-align: right;">originLGA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">EWR</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">LGA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JFK</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">JFK</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LGA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Diese Art der Umwandlung von mehrstufig-nominal in eine binäre Variable (0-1-Variable, oder “Indikatorvariable”) kann man sich auch z.B. mit der Funktion <code>dummy_cols()</code> (aus dem Paket <code>fastDummies</code>) bewerkstelligen lassen:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dummy_cols</span>() <span class="sc">%&gt;%</span>  <span class="co"># aus dem Paket `fastDummies`</span></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># slice(1:6)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">origin</th>
<th style="text-align: right;">dep_delay</th>
<th style="text-align: right;">origin_EWR</th>
<th style="text-align: right;">origin_JFK</th>
<th style="text-align: right;">origin_LGA</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">EWR</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">LGA</td>
<td style="text-align: right;">4</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="odd">
<td style="text-align: left;">JFK</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">JFK</td>
<td style="text-align: right;">-1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">LGA</td>
<td style="text-align: right;">-6</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">EWR</td>
<td style="text-align: right;">-4</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Mit den “dummyisierten” Spalten können wir jetzt Korrelationen rechnen, denn jetzt haben wir Zahlen. <em>Achtung</em>: Die Variablen bleiben nominalskaliert, trotz der 0-1-Transformation. Auf diese Art Korrelationen zu berechnen ist nur für dummysierte Variablen (“Indikatorvariablen”) sinnvoll. Die Schiefe der Verteilung begrenzt hier übrigens die Stärke der Korrelation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dummy_cols</span>() <span class="sc">%&gt;%</span>   <span class="co"># "Dummysierung"</span></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>dep_delay,</span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"carrier"</span>,</span>
<span id="cb54-7"><a href="#cb54-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb54-8"><a href="#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb54-9"><a href="#cb54-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cor_depdelay_carrier =</span> <span class="fu">cor</span>(dep_delay, value,</span>
<span id="cb54-10"><a href="#cb54-10" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">use =</span> <span class="st">"complete.obs"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-11"><a href="#cb54-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="fu">abs</span>(cor_depdelay_carrier)) <span class="sc">%&gt;%</span> </span>
<span id="cb54-12"><a href="#cb54-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">abs</span>(cor_depdelay_carrier) <span class="sc">&gt;</span> <span class="fl">0.10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table>
<thead>
<tr class="header">
<th style="text-align: left;">carrier</th>
<th style="text-align: right;">cor_depdelay_carrier</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
</div>
</div>
<p>Keine Korrelation war (im Betrag) größer als 0.1. Also gab es nur vernachlässigbare Korrelationen und im Output wurde daher nichts angezeigt.</p>
<p>Zur Erinnerung: Es ist nicht unbedingt nötig, die “Dummyisierung” durchzuführen, ein einfaches Vergleichen der Mittelwerte (oder Mediane) mit ihrer Streuung führt zu einem ähnlichen Ergebnis. Die Regression mit <code>lm</code> führt für Sie automatisch die Dummyisierung durch.</p>
<section id="hour" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="hour"><span class="header-section-number">7.3.1</span> <code>Hour</code></h3>
<section id="mit-ggplot-3" class="level4" data-number="7.3.1.1">
<h4 data-number="7.3.1.1" class="anchored" data-anchor-id="mit-ggplot-3"><span class="header-section-number">7.3.1.1</span> Mit ggplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(hour, dep_delay,</span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>                      <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> dep_delay) <span class="sc">+</span></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-dataexplorer-2" class="level4" data-number="7.3.1.2">
<h4 data-number="7.3.1.2" class="anchored" data-anchor-id="mit-dataexplorer-2"><span class="header-section-number">7.3.1.2</span> Mit DataExplorer</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_boxplot</span>(<span class="at">by =</span> <span class="st">"hour"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="origin" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="origin"><span class="header-section-number">7.3.2</span> <code>Origin</code></h3>
<section id="mit-ggplot-4" class="level4" data-number="7.3.2.1">
<h4 data-number="7.3.2.1" class="anchored" data-anchor-id="mit-ggplot-4"><span class="header-section-number">7.3.2.1</span> Mit ggplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-dataexplorer-3" class="level4" data-number="7.3.2.2">
<h4 data-number="7.3.2.2" class="anchored" data-anchor-id="mit-dataexplorer-3"><span class="header-section-number">7.3.2.2</span> Mit DataExplorer</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_boxplot</span>(<span class="at">by =</span> <span class="st">"origin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="drei-variablen-origin-hour-dep_delay" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="drei-variablen-origin-hour-dep_delay"><span class="header-section-number">7.4</span> Drei Variablen: <code>Origin</code>, <code>hour</code>, <code>dep_delay</code></h2>
<section id="mit-ggplot-5" class="level4" data-number="7.4.0.1">
<h4 data-number="7.4.0.1" class="anchored" data-anchor-id="mit-ggplot-5"><span class="header-section-number">7.4.0.1</span> Mit ggplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour, <span class="at">levels =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">23</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> hour, <span class="at">y =</span> dep_delay) <span class="sc">+</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> origin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="mit-ggpubr" class="level4" data-number="7.4.0.2">
<h4 data-number="7.4.0.2" class="anchored" data-anchor-id="mit-ggpubr"><span class="header-section-number">7.4.0.2</span> Mit ggpubr</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour, <span class="at">levels =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">23</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggboxplot</span>(<span class="at">x =</span> <span class="st">"hour"</span>, <span class="at">y =</span> <span class="st">"dep_delay"</span>, <span class="at">facet.by =</span> <span class="st">"origin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="vertiefung-alle-nominale-variablen" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="vertiefung-alle-nominale-variablen"><span class="header-section-number">7.5</span> Vertiefung: Alle nominale Variablen</h2>
<p>Natürlich könnte man “händisch” alle nominalskalierten Variablen explizit benennen, etwa so:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(carrier, tailnum, origin, dest, time_hour) <span class="sc">%&gt;%</span> </span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">carrier</th>
<th style="text-align: left;">tailnum</th>
<th style="text-align: left;">origin</th>
<th style="text-align: left;">dest</th>
<th style="text-align: left;">time_hour</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">UA</td>
<td style="text-align: left;">N14228</td>
<td style="text-align: left;">EWR</td>
<td style="text-align: left;">IAH</td>
<td style="text-align: left;">2013-01-01 05:00:00</td>
</tr>
<tr class="even">
<td style="text-align: left;">UA</td>
<td style="text-align: left;">N24211</td>
<td style="text-align: left;">LGA</td>
<td style="text-align: left;">IAH</td>
<td style="text-align: left;">2013-01-01 05:00:00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">AA</td>
<td style="text-align: left;">N619AA</td>
<td style="text-align: left;">JFK</td>
<td style="text-align: left;">MIA</td>
<td style="text-align: left;">2013-01-01 05:00:00</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Aber es geht auch etwas “cooler” mit weniger Tipperei:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">is.numeric</span>(.))) <span class="sc">%&gt;%</span>  <span class="co"># wähle alle nicht-numerischen Spalten</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "carrier"    "tailnum"    "origin"     "dest"       "time_hour" 
[6] "is_extreme"</code></pre>
</div>
</div>
<section id="flights4" class="level3" data-number="7.5.1">
<h3 data-number="7.5.1" class="anchored" data-anchor-id="flights4"><span class="header-section-number">7.5.1</span> flights4</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>flights4 <span class="ot">&lt;-</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest =</span> <span class="fu">fct_lump_prop</span>(dest, <span class="at">prop =</span> .<span class="dv">025</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Mit <code>fct_lump_prop</code> fassen wir alle Stufen zu einer zusammen, die jeweils weniger als 2.5% der Fääle ausmachen.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest, <span class="at">sort =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">dest</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Other</td>
<td style="text-align: right;">172061</td>
</tr>
<tr class="even">
<td style="text-align: left;">ATL</td>
<td style="text-align: right;">16837</td>
</tr>
<tr class="odd">
<td style="text-align: left;">ORD</td>
<td style="text-align: right;">16566</td>
</tr>
<tr class="even">
<td style="text-align: left;">LAX</td>
<td style="text-align: right;">16026</td>
</tr>
<tr class="odd">
<td style="text-align: left;">BOS</td>
<td style="text-align: right;">15022</td>
</tr>
<tr class="even">
<td style="text-align: left;">MCO</td>
<td style="text-align: right;">13967</td>
</tr>
<tr class="odd">
<td style="text-align: left;">CLT</td>
<td style="text-align: right;">13674</td>
</tr>
<tr class="even">
<td style="text-align: left;">SFO</td>
<td style="text-align: right;">13173</td>
</tr>
<tr class="odd">
<td style="text-align: left;">FLL</td>
<td style="text-align: right;">11897</td>
</tr>
<tr class="even">
<td style="text-align: left;">MIA</td>
<td style="text-align: right;">11593</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DCA</td>
<td style="text-align: right;">9111</td>
</tr>
<tr class="even">
<td style="text-align: left;">DTW</td>
<td style="text-align: right;">9031</td>
</tr>
<tr class="odd">
<td style="text-align: left;">DFW</td>
<td style="text-align: right;">8388</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="visualisierung-im-grid" class="level3" data-number="7.5.2">
<h3 data-number="7.5.2" class="anchored" data-anchor-id="visualisierung-im-grid"><span class="header-section-number">7.5.2</span> Visualisierung im Grid</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_md =</span> <span class="fu">median</span>(dep_delay, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> depdelay_md, <span class="at">color =</span> origin) <span class="sc">+</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(dest <span class="sc">~</span> carrier) <span class="sc">+</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Puh, das Diagramm ist nicht sehr aussagekräftig. Vielleicht besser als Tabelle?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_md =</span> <span class="fu">median</span>(dep_delay, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 128 × 4
# Groups:   dest, origin [37]
   dest  origin carrier depdelay_md
   &lt;fct&gt; &lt;chr&gt;  &lt;chr&gt;         &lt;dbl&gt;
 1 ATL   EWR    9E               -6
 2 ATL   EWR    DL               -3
 3 ATL   EWR    EV               -2
 4 ATL   EWR    UA               -1
 5 ATL   JFK    9E               -2
 6 ATL   JFK    DL               -1
 7 ATL   LGA    DL               -3
 8 ATL   LGA    EV               30
 9 ATL   LGA    FL                0
10 ATL   LGA    MQ               -4
# ℹ 118 more rows</code></pre>
</div>
</div>
<p>Hm, ist auch nicht gerade nützlich.</p>
<p>Das Beispiel zeigt, dass die Datenvisualisierung bei einer größeren Zahl an Dimensionen und/oder vielen Werten an ihre Grenzen kommen kann.</p>
</section>
</section>
<section id="anzahl-von-flüge" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="anzahl-von-flüge"><span class="header-section-number">7.6</span> Anzahl von Flüge</h2>
<section id="vorbereitung" class="level3" data-number="7.6.1">
<h3 data-number="7.6.1" class="anchored" data-anchor-id="vorbereitung"><span class="header-section-number">7.6.1</span> Vorbereitung</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>flights4_sum <span class="ot">&lt;-</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month, origin) <span class="sc">%&gt;%</span> </span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">delay_md =</span> <span class="fu">median</span>(dep_delay),</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">delay_iqr =</span> <span class="fu">IQR</span>(dep_delay),</span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">delay_n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month),</span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>         <span class="at">delay_n =</span> <span class="fu">as.numeric</span>(delay_n))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="visualisierung-mit-ggplot" class="level3" data-number="7.6.2">
<h3 data-number="7.6.2" class="anchored" data-anchor-id="visualisierung-mit-ggplot"><span class="header-section-number">7.6.2</span> Visualisierung mit ggplot</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month)) <span class="sc">%&gt;%</span> </span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> dep_delay, <span class="at">color =</span> origin) <span class="sc">+</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> flights4_sum, </span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">y =</span> delay_md,</span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">x =</span> month)) <span class="sc">+</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> origin)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="visualisierung-mit-ggpubr" class="level3" data-number="7.6.3">
<h3 data-number="7.6.3" class="anchored" data-anchor-id="visualisierung-mit-ggpubr"><span class="header-section-number">7.6.3</span> Visualisierung mit ggpubr</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month)) <span class="sc">%&gt;%</span> </span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggviolin</span>(<span class="at">x =</span> <span class="st">"month"</span>, <span class="at">y =</span> <span class="st">"dep_delay"</span>, <span class="at">facet.by =</span> <span class="st">"origin"</span>,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"origin"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="index_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="fazit" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Fazit</h1>
<p>Keine heiße Spur bisher. Allerdings erlaubt explorative Datenanalyse nur die gleichzeitige Betrachtung von zwei bis drei, vielleicht vier Variablen. Sind die Zusammenhänge komplizierter in dem Sinne, dass mehrere Variablen für einen Effekt zusammenwirken, so ist es mit explorativen Methoden schwer zu finden.</p>
<p>Der nächste logische Schritt: Wir müssen modellieren. Mit Modellierungsmethoden lassen sich auch hochdimensionale Zusammenhänge finden.</p>
</section>
<section id="achtung" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Achtung</h1>
<p>Diese Analyse ist rein explorativ in dem Sinne, dass keine Hypothesen getestet werden. Es ist damit zu rechnen, dass falsch-positive Befunde auftauchen. Alle Ergebnisse sollten anhand neuer Daten validiert werden.</p>
</section>
<section id="reproduzierbarkeit" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Reproduzierbarkeit</h1>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>─ Session info ───────────────────────────────────────────────────────────────────────────────────────────────────────
 setting  value
 version  R version 4.4.0 (2024-04-24 ucrt)
 os       Windows 11 x64 (build 22631)
 system   x86_64, mingw32
 ui       RTerm
 language (EN)
 collate  German_Germany.utf8
 ctype    German_Germany.utf8
 tz       Europe/Berlin
 date     2024-10-07
 pandoc   3.2 @ C:/Program Files/RStudio/resources/app/bin/quarto/bin/tools/ (via rmarkdown)

─ Packages ───────────────────────────────────────────────────────────────────────────────────────────────────────────
 package      * version date (UTC) lib source
 abind          1.4-5   2016-07-21 [1] CRAN (R 4.4.0)
 backports      1.4.1   2021-12-13 [1] CRAN (R 4.4.0)
 bayestestR   * 0.14.0  2024-07-24 [1] CRAN (R 4.4.1)
 broom          1.0.5   2023-06-09 [1] CRAN (R 4.4.0)
 cachem         1.0.8   2023-05-01 [1] CRAN (R 4.4.0)
 car            3.1-2   2023-03-30 [1] CRAN (R 4.4.0)
 carData        3.0-5   2022-01-06 [1] CRAN (R 4.4.0)
 cli            3.6.2   2023-12-11 [1] CRAN (R 4.4.0)
 codetools      0.2-20  2024-03-31 [1] CRAN (R 4.4.0)
 colorspace     2.1-0   2023-01-23 [1] CRAN (R 4.4.0)
 correlation  * 0.8.5   2024-06-16 [1] CRAN (R 4.4.1)
 data.table     1.15.4  2024-03-30 [1] CRAN (R 4.4.0)
 DataExplorer * 0.8.3   2024-01-24 [1] CRAN (R 4.4.0)
 datawizard   * 0.13.0  2024-10-05 [1] CRAN (R 4.4.1)
 devtools       2.4.5   2022-10-11 [1] CRAN (R 4.4.0)
 digest         0.6.35  2024-03-11 [1] CRAN (R 4.4.0)
 dplyr        * 1.1.4   2023-11-17 [1] CRAN (R 4.4.0)
 easystats    * 0.7.3   2024-07-22 [1] CRAN (R 4.4.1)
 effectsize   * 0.8.9   2024-07-03 [1] CRAN (R 4.4.1)
 ellipsis       0.3.2   2021-04-29 [1] CRAN (R 4.4.0)
 evaluate       0.23    2023-11-01 [1] CRAN (R 4.4.0)
 fansi          1.0.6   2023-12-08 [1] CRAN (R 4.4.0)
 farver         2.1.2   2024-05-13 [1] CRAN (R 4.4.0)
 fastDummies  * 1.7.4   2024-08-16 [1] CRAN (R 4.4.1)
 fastmap        1.1.1   2023-02-24 [1] CRAN (R 4.4.0)
 forcats      * 1.0.0   2023-01-29 [1] CRAN (R 4.4.0)
 fs             1.6.4   2024-04-25 [1] CRAN (R 4.4.0)
 generics       0.1.3   2022-07-05 [1] CRAN (R 4.4.0)
 ggplot2      * 3.5.1   2024-04-23 [1] CRAN (R 4.4.0)
 ggpubr       * 0.6.0   2023-02-10 [1] CRAN (R 4.4.0)
 ggsignif       0.6.4   2022-10-13 [1] CRAN (R 4.4.0)
 glue           1.7.0   2024-01-09 [1] CRAN (R 4.4.0)
 gridExtra      2.3     2017-09-09 [1] CRAN (R 4.4.0)
 gtable         0.3.5   2024-04-22 [1] CRAN (R 4.4.0)
 hms            1.1.3   2023-03-21 [1] CRAN (R 4.4.0)
 htmltools      0.5.8.1 2024-04-04 [1] CRAN (R 4.4.0)
 htmlwidgets    1.6.4   2023-12-06 [1] CRAN (R 4.4.0)
 httpuv         1.6.15  2024-03-26 [1] CRAN (R 4.4.0)
 igraph         2.0.3   2024-03-13 [1] CRAN (R 4.4.0)
 insight      * 0.20.5  2024-10-02 [1] CRAN (R 4.4.1)
 jsonlite       1.8.8   2023-12-04 [1] CRAN (R 4.4.0)
 knitr          1.46    2024-04-06 [1] CRAN (R 4.4.0)
 labeling       0.4.3   2023-08-29 [1] CRAN (R 4.4.0)
 later          1.3.2   2023-12-06 [1] CRAN (R 4.4.0)
 lifecycle      1.0.4   2023-11-07 [1] CRAN (R 4.4.0)
 lubridate    * 1.9.3   2023-09-27 [1] CRAN (R 4.4.0)
 magrittr       2.0.3   2022-03-30 [1] CRAN (R 4.4.0)
 memoise        2.0.1   2021-11-26 [1] CRAN (R 4.4.0)
 mime           0.12    2021-09-28 [1] CRAN (R 4.4.0)
 miniUI         0.1.1.1 2018-05-18 [1] CRAN (R 4.4.0)
 modelbased   * 0.8.8   2024-06-11 [1] CRAN (R 4.4.1)
 munsell        0.5.1   2024-04-01 [1] CRAN (R 4.4.0)
 networkD3      0.4     2017-03-18 [1] CRAN (R 4.4.0)
 parameters   * 0.22.2  2024-09-03 [1] CRAN (R 4.4.1)
 performance  * 0.12.3  2024-09-02 [1] CRAN (R 4.4.1)
 pillar         1.9.0   2023-03-22 [1] CRAN (R 4.4.0)
 pkgbuild       1.4.4   2024-03-17 [1] CRAN (R 4.4.0)
 pkgconfig      2.0.3   2019-09-22 [1] CRAN (R 4.4.0)
 pkgload        1.3.4   2024-01-16 [1] CRAN (R 4.4.0)
 printr       * 0.3     2023-03-08 [1] CRAN (R 4.4.1)
 profvis        0.3.8   2023-05-02 [1] CRAN (R 4.4.0)
 promises       1.3.0   2024-04-05 [1] CRAN (R 4.4.0)
 purrr        * 1.0.2   2023-08-10 [1] CRAN (R 4.4.0)
 R6             2.5.1   2021-08-19 [1] CRAN (R 4.4.0)
 Rcpp           1.0.12  2024-01-09 [1] CRAN (R 4.4.0)
 readr        * 2.1.5   2024-01-10 [1] CRAN (R 4.4.0)
 remotes        2.5.0   2024-03-17 [1] CRAN (R 4.4.0)
 report       * 0.5.9   2024-07-10 [1] CRAN (R 4.4.1)
 rlang          1.1.4   2024-06-04 [1] CRAN (R 4.4.1)
 rmarkdown      2.26    2024-03-05 [1] CRAN (R 4.4.0)
 rstatix        0.7.2   2023-02-01 [1] CRAN (R 4.4.0)
 rstudioapi     0.16.0  2024-03-24 [1] CRAN (R 4.4.0)
 scales         1.3.0   2023-11-28 [1] CRAN (R 4.4.0)
 see          * 0.9.0   2024-09-06 [1] CRAN (R 4.4.1)
 sessioninfo    1.2.2   2021-12-06 [1] CRAN (R 4.4.0)
 shiny          1.8.1.1 2024-04-02 [1] CRAN (R 4.4.0)
 stringi        1.8.4   2024-05-06 [1] CRAN (R 4.4.0)
 stringr      * 1.5.1   2023-11-14 [1] CRAN (R 4.4.0)
 tibble       * 3.2.1   2023-03-20 [1] CRAN (R 4.4.0)
 tidyr        * 1.3.1   2024-01-24 [1] CRAN (R 4.4.0)
 tidyselect     1.2.1   2024-03-11 [1] CRAN (R 4.4.0)
 tidyverse    * 2.0.0   2023-02-22 [1] CRAN (R 4.4.0)
 timechange     0.3.0   2024-01-18 [1] CRAN (R 4.4.0)
 tzdb           0.4.0   2023-05-12 [1] CRAN (R 4.4.0)
 urlchecker     1.0.1   2021-11-30 [1] CRAN (R 4.4.0)
 usethis        2.2.3   2024-02-19 [1] CRAN (R 4.4.0)
 utf8           1.2.4   2023-10-22 [1] CRAN (R 4.4.0)
 vctrs          0.6.5   2023-12-01 [1] CRAN (R 4.4.0)
 withr          3.0.1   2024-07-31 [1] CRAN (R 4.4.1)
 xfun           0.43    2024-03-25 [1] CRAN (R 4.4.0)
 xtable         1.8-4   2019-04-21 [1] CRAN (R 4.4.0)
 yaml           2.3.8   2023-12-11 [1] CRAN (R 4.4.0)

 [1] C:/Users/sebastian.sauer/AppData/Local/Programs/R/R-4.4.0/library

──────────────────────────────────────────────────────────────────────────────────────────────────────────────────────</code></pre>
</div>
</div>


<!-- -->

</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb73" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> 2024-05-09  # HEUTIGES DATUM EINTRAGEN</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="an">draft:</span><span class="co"> FALSE   # ACHTUNG DRAFT STEHT AUF TRUE!</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> flights-yacsda-eda </span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co">  eval: true </span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> arrow </span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a><span class="an">cache:</span><span class="co"> true</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> true</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a><span class="an">number-sections:</span><span class="co"> true</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a><span class="an">extype:</span><span class="co"> string</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a><span class="an">exsolution:</span><span class="co"> ""</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a><span class="an">exshuffle:</span><span class="co"> no</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="an">categories:</span></span>
<span id="cb73-15"><a href="#cb73-15" aria-hidden="true" tabindex="-1"></a><span class="co">- eda  # ENTER CATEGORIES HERE</span></span>
<span id="cb73-16"><a href="#cb73-16" aria-hidden="true" tabindex="-1"></a><span class="co">- yacsda</span></span>
<span id="cb73-17"><a href="#cb73-17" aria-hidden="true" tabindex="-1"></a><span class="co">- variability</span></span>
<span id="cb73-18"><a href="#cb73-18" aria-hidden="true" tabindex="-1"></a><span class="co">- association</span></span>
<span id="cb73-19"><a href="#cb73-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-20"><a href="#cb73-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-21"><a href="#cb73-21" aria-hidden="true" tabindex="-1"></a><span class="an">bibliography:</span><span class="co"> "../../library-ses.bib"</span></span>
<span id="cb73-22"><a href="#cb73-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-23"><a href="#cb73-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-24"><a href="#cb73-24" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb73-25"><a href="#cb73-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-26"><a href="#cb73-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-27"><a href="#cb73-27" aria-hidden="true" tabindex="-1"></a><span class="fu"># Hintergrund und Ziel</span></span>
<span id="cb73-28"><a href="#cb73-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-29"><a href="#cb73-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-30"><a href="#cb73-30" aria-hidden="true" tabindex="-1"></a>Diese Fallstudie zeigt einige mögliche/typische Schritte der explorativen Datenanalyse (EDA) im Hinblick auf die Forschungsfrage "*Welche Variablen steht in Zusammenhang mit Flugverspätungen?*".</span>
<span id="cb73-31"><a href="#cb73-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-32"><a href="#cb73-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-33"><a href="#cb73-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-34"><a href="#cb73-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-35"><a href="#cb73-35" aria-hidden="true" tabindex="-1"></a><span class="fu"># Pakete laden</span></span>
<span id="cb73-36"><a href="#cb73-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-37"><a href="#cb73-37" aria-hidden="true" tabindex="-1"></a><span class="in">```{r load-libs, message = FALSE, warning = FALSE}</span></span>
<span id="cb73-38"><a href="#cb73-38" aria-hidden="true" tabindex="-1"></a><span class="in">library(tidyverse)  # data wrangling</span></span>
<span id="cb73-39"><a href="#cb73-39" aria-hidden="true" tabindex="-1"></a><span class="in">library(fastDummies)  # nur für "Dummyisierung"</span></span>
<span id="cb73-40"><a href="#cb73-40" aria-hidden="true" tabindex="-1"></a><span class="in">library(easystats)  # komfortabel Statistiken ausrechnen</span></span>
<span id="cb73-41"><a href="#cb73-41" aria-hidden="true" tabindex="-1"></a><span class="in">library(DataExplorer)  # Daten visualisieren</span></span>
<span id="cb73-42"><a href="#cb73-42" aria-hidden="true" tabindex="-1"></a><span class="in">library(ggpubr)  # Daten visualisieren</span></span>
<span id="cb73-43"><a href="#cb73-43" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-44"><a href="#cb73-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-45"><a href="#cb73-45" aria-hidden="true" tabindex="-1"></a><span class="in">```{r load-libs-hidden, message = FALSE, warning = FALSE, include=FALSE}</span></span>
<span id="cb73-46"><a href="#cb73-46" aria-hidden="true" tabindex="-1"></a><span class="in">library(printr)</span></span>
<span id="cb73-47"><a href="#cb73-47" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-48"><a href="#cb73-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-49"><a href="#cb73-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-50"><a href="#cb73-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-51"><a href="#cb73-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-52"><a href="#cb73-52" aria-hidden="true" tabindex="-1"></a><span class="fu"># Daten laden</span></span>
<span id="cb73-53"><a href="#cb73-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-54"><a href="#cb73-54" aria-hidden="true" tabindex="-1"></a>Der Datensatz kann z.B. hier bezogen werden:</span>
<span id="cb73-55"><a href="#cb73-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-56"><a href="#cb73-56" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = FALSE}</span></span>
<span id="cb73-57"><a href="#cb73-57" aria-hidden="true" tabindex="-1"></a><span class="in">flights &lt;- read.csv("https://vincentarelbundock.github.io/Rdatasets/csv/nycflights13/flights.csv")</span></span>
<span id="cb73-58"><a href="#cb73-58" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-59"><a href="#cb73-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-60"><a href="#cb73-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-61"><a href="#cb73-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-62"><a href="#cb73-62" aria-hidden="true" tabindex="-1"></a>Alternativ findet man den Datensatz auch im Paket <span class="in">`nycflights13`</span> (das man vorab installiert haben muss).</span>
<span id="cb73-63"><a href="#cb73-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-64"><a href="#cb73-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-65"><a href="#cb73-65" aria-hidden="true" tabindex="-1"></a><span class="in">```{r eval = TRUE}</span></span>
<span id="cb73-66"><a href="#cb73-66" aria-hidden="true" tabindex="-1"></a><span class="in">data(flights, package = "nycflights13")</span></span>
<span id="cb73-67"><a href="#cb73-67" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-68"><a href="#cb73-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-69"><a href="#cb73-69" aria-hidden="true" tabindex="-1"></a>Der Datensatz ist relativ groß:</span>
<span id="cb73-70"><a href="#cb73-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-73"><a href="#cb73-73" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-74"><a href="#cb73-74" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(flights)</span>
<span id="cb73-75"><a href="#cb73-75" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-76"><a href="#cb73-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-77"><a href="#cb73-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-78"><a href="#cb73-78" aria-hidden="true" tabindex="-1"></a>Das sind 19 Variablen, über 300.000 Zeilen.</span>
<span id="cb73-79"><a href="#cb73-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-80"><a href="#cb73-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-81"><a href="#cb73-81" aria-hidden="true" tabindex="-1"></a><span class="fu"># Was ist Verspätung?</span></span>
<span id="cb73-82"><a href="#cb73-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-83"><a href="#cb73-83" aria-hidden="true" tabindex="-1"></a>Schauen wir uns den Datensatz mal näher an, um die Zielvariable "Verspätung" zu beleuchten.</span>
<span id="cb73-84"><a href="#cb73-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-87"><a href="#cb73-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-88"><a href="#cb73-88" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(flights)</span>
<span id="cb73-89"><a href="#cb73-89" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-90"><a href="#cb73-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-91"><a href="#cb73-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-92"><a href="#cb73-92" aria-hidden="true" tabindex="-1"></a>Es gibt zwei Spalten, die auf Verspätung hinzielen:</span>
<span id="cb73-93"><a href="#cb73-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-96"><a href="#cb73-96" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-97"><a href="#cb73-97" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-98"><a href="#cb73-98" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, arr_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-99"><a href="#cb73-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb73-100"><a href="#cb73-100" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-101"><a href="#cb73-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-102"><a href="#cb73-102" aria-hidden="true" tabindex="-1"></a>Man könnte auch schreiben, alternativ:</span>
<span id="cb73-103"><a href="#cb73-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-104"><a href="#cb73-104" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Hey R,</span>
<span id="cb73-105"><a href="#cb73-105" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Nimm die Tabelle <span class="in">`flights`</span> und dann</span>
<span id="cb73-106"><a href="#cb73-106" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>wähle alle Spalten aus, die den Text "delay" enthalten und dann</span>
<span id="cb73-107"><a href="#cb73-107" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>zeige den Anfang ("Kopf") der Tabelle</span>
<span id="cb73-108"><a href="#cb73-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-111"><a href="#cb73-111" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-112"><a href="#cb73-112" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-113"><a href="#cb73-113" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"delay"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-114"><a href="#cb73-114" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="cb73-115"><a href="#cb73-115" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-116"><a href="#cb73-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-117"><a href="#cb73-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-118"><a href="#cb73-118" aria-hidden="true" tabindex="-1"></a>Ein Blick in die Hilfe lässt uns mehr lernen, was die Spalten bedeuten: <span class="in">`help(flights)`</span> (wenn das Paket <span class="in">`nycflights13`</span> geladen ist; alternativ kann man z.B. <span class="co">[</span><span class="ot">hier</span><span class="co">](https://vincentarelbundock.github.io/Rdatasets/doc/nycflights13/flights.html)</span> nachlesen):</span>
<span id="cb73-119"><a href="#cb73-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-120"><a href="#cb73-120" aria-hidden="true" tabindex="-1"></a><span class="in">````</span></span>
<span id="cb73-121"><a href="#cb73-121" aria-hidden="true" tabindex="-1"></a><span class="in">dep_delay, arr_delay</span></span>
<span id="cb73-122"><a href="#cb73-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-123"><a href="#cb73-123" aria-hidden="true" tabindex="-1"></a><span class="in">Departure and arrival delays, in minutes. </span></span>
<span id="cb73-124"><a href="#cb73-124" aria-hidden="true" tabindex="-1"></a><span class="in">Negative times represent early departures/arrivals.</span></span>
<span id="cb73-125"><a href="#cb73-125" aria-hidden="true" tabindex="-1"></a><span class="in">````</span></span>
<span id="cb73-126"><a href="#cb73-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-127"><a href="#cb73-127" aria-hidden="true" tabindex="-1"></a><span class="fu">## Wie ähnlich sind Ankunfts- und Abflugsverspätung?</span></span>
<span id="cb73-128"><a href="#cb73-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-129"><a href="#cb73-129" aria-hidden="true" tabindex="-1"></a>Da der Datensatz so groß ist, ziehen wir eine Stichprobe (mit <span class="in">`sample_n`</span>), dann geht alles schneller. Hier *nicht* wichtig, nur um etwas Zeit beim Plotten zu sparen. In der Praxis würde ich in an dieser Stelle keine Stichprobe ziehen, bzw. mit dem Gesamtdatensatz weiterarbeiten (was wir ja auch im Folgenden tun).</span>
<span id="cb73-130"><a href="#cb73-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-133"><a href="#cb73-133" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-134"><a href="#cb73-134" aria-hidden="true" tabindex="-1"></a>flights_sample <span class="ot">&lt;-</span> </span>
<span id="cb73-135"><a href="#cb73-135" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb73-136"><a href="#cb73-136" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_n</span>(<span class="at">size =</span> <span class="dv">1000</span>) </span>
<span id="cb73-137"><a href="#cb73-137" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-138"><a href="#cb73-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-139"><a href="#cb73-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-140"><a href="#cb73-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-141"><a href="#cb73-141" aria-hidden="true" tabindex="-1"></a><span class="fu">### Diagramm mit DataExplorer</span></span>
<span id="cb73-142"><a href="#cb73-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-145"><a href="#cb73-145" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-146"><a href="#cb73-146" aria-hidden="true" tabindex="-1"></a>flights_sample <span class="sc">|&gt;</span> </span>
<span id="cb73-147"><a href="#cb73-147" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, arr_delay) <span class="sc">|&gt;</span> </span>
<span id="cb73-148"><a href="#cb73-148" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatterplot</span>(<span class="at">by =</span> <span class="st">"arr_delay"</span>)</span>
<span id="cb73-149"><a href="#cb73-149" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-150"><a href="#cb73-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-151"><a href="#cb73-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-152"><a href="#cb73-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-153"><a href="#cb73-153" aria-hidden="true" tabindex="-1"></a><span class="fu">### Diagramm mit ggplot</span></span>
<span id="cb73-154"><a href="#cb73-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-157"><a href="#cb73-157" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-158"><a href="#cb73-158" aria-hidden="true" tabindex="-1"></a>flights_sample <span class="sc">|&gt;</span> </span>
<span id="cb73-159"><a href="#cb73-159" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-160"><a href="#cb73-160" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> dep_delay, <span class="at">x =</span> arr_delay) <span class="sc">+</span></span>
<span id="cb73-161"><a href="#cb73-161" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb73-162"><a href="#cb73-162" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-163"><a href="#cb73-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-164"><a href="#cb73-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-165"><a href="#cb73-165" aria-hidden="true" tabindex="-1"></a><span class="fu">### Statistiken</span></span>
<span id="cb73-166"><a href="#cb73-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-167"><a href="#cb73-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-170"><a href="#cb73-170" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-171"><a href="#cb73-171" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb73-172"><a href="#cb73-172" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(dep_delay, arr_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-173"><a href="#cb73-173" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">sd</span>(dep_delay),</span>
<span id="cb73-174"><a href="#cb73-174" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sd</span>(arr_delay))</span>
<span id="cb73-175"><a href="#cb73-175" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-176"><a href="#cb73-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-177"><a href="#cb73-177" aria-hidden="true" tabindex="-1"></a>Das sind ca. 10% Differenz in der Skalierung; wir können die Skalierung komplett angleichen, um Abweichungen, die auf unterschiedlichen Mustern beruhen, besser zu sehen. Dazu hilft uns die z-Transformation.</span>
<span id="cb73-178"><a href="#cb73-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-179"><a href="#cb73-179" aria-hidden="true" tabindex="-1"></a>Die beiden Variablen scheinen ziemlich stark korreliert zu sein.</span>
<span id="cb73-180"><a href="#cb73-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-183"><a href="#cb73-183" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-184"><a href="#cb73-184" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-185"><a href="#cb73-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(dep_delay, arr_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-186"><a href="#cb73-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">cor</span>(dep_delay, arr_delay))</span>
<span id="cb73-187"><a href="#cb73-187" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-188"><a href="#cb73-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-189"><a href="#cb73-189" aria-hidden="true" tabindex="-1"></a>Ja, sind sie. Dann ist es vielleicht egal, welche der beiden Variablen wir verwenden. Nehmen wir <span class="in">`dep_delay`</span>.</span>
<span id="cb73-190"><a href="#cb73-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-191"><a href="#cb73-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-192"><a href="#cb73-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-193"><a href="#cb73-193" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vertiefung: z-Skalierung</span></span>
<span id="cb73-194"><a href="#cb73-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-195"><a href="#cb73-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-196"><a href="#cb73-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-197"><a href="#cb73-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-200"><a href="#cb73-200" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-201"><a href="#cb73-201" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-202"><a href="#cb73-202" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">contains</span>(<span class="st">"delay"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-203"><a href="#cb73-203" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-204"><a href="#cb73-204" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dep_delay =</span> <span class="fu">scale</span>(dep_delay),  <span class="co"># z-Transformation</span></span>
<span id="cb73-205"><a href="#cb73-205" aria-hidden="true" tabindex="-1"></a>         <span class="at">arr_delay =</span> <span class="fu">scale</span>(arr_delay)) <span class="sc">%&gt;%</span>   <span class="co"># z-Transformation</span></span>
<span id="cb73-206"><a href="#cb73-206" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-207"><a href="#cb73-207" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> arr_delay, <span class="at">y =</span> dep_delay) <span class="sc">+</span></span>
<span id="cb73-208"><a href="#cb73-208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin2d</span>() <span class="sc">+</span></span>
<span id="cb73-209"><a href="#cb73-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_abline</span>(<span class="at">linetype =</span> <span class="st">"dashed"</span>,</span>
<span id="cb73-210"><a href="#cb73-210" aria-hidden="true" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">"grey60"</span>)</span>
<span id="cb73-211"><a href="#cb73-211" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-212"><a href="#cb73-212" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-213"><a href="#cb73-213" aria-hidden="true" tabindex="-1"></a><span class="in">`bin2d`</span> wurde hier nur aus dem Grund verwendet, da das Plotten von ein paar Hunderttausend Punkte recht lange dauert. <span class="in">`bin2d`</span> hingegen ist sehr schnell.</span>
<span id="cb73-214"><a href="#cb73-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-215"><a href="#cb73-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-216"><a href="#cb73-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-217"><a href="#cb73-217" aria-hidden="true" tabindex="-1"></a><span class="fu"># Verteilung der Verspätung</span></span>
<span id="cb73-218"><a href="#cb73-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-219"><a href="#cb73-219" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualisierung</span></span>
<span id="cb73-220"><a href="#cb73-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-221"><a href="#cb73-221" aria-hidden="true" tabindex="-1"></a>:::{.panel-tabset}</span>
<span id="cb73-222"><a href="#cb73-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-223"><a href="#cb73-223" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mit DataExplorer</span></span>
<span id="cb73-224"><a href="#cb73-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-227"><a href="#cb73-227" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-228"><a href="#cb73-228" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb73-229"><a href="#cb73-229" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay) <span class="sc">|&gt;</span> </span>
<span id="cb73-230"><a href="#cb73-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_density</span>()</span>
<span id="cb73-231"><a href="#cb73-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-232"><a href="#cb73-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-233"><a href="#cb73-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-234"><a href="#cb73-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-235"><a href="#cb73-235" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mit ggplot</span></span>
<span id="cb73-236"><a href="#cb73-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-239"><a href="#cb73-239" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-240"><a href="#cb73-240" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-241"><a href="#cb73-241" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-242"><a href="#cb73-242" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-243"><a href="#cb73-243" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span>
<span id="cb73-244"><a href="#cb73-244" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-245"><a href="#cb73-245" aria-hidden="true" tabindex="-1"></a>:::</span>
<span id="cb73-246"><a href="#cb73-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-247"><a href="#cb73-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-248"><a href="#cb73-248" aria-hidden="true" tabindex="-1"></a>Ein sehr langer rechter Rand; die meisten Flüge sind nicht/kaum verspätet; aber einige wenige sind sehr stark verspätet.</span>
<span id="cb73-249"><a href="#cb73-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-250"><a href="#cb73-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-251"><a href="#cb73-251" aria-hidden="true" tabindex="-1"></a>Zentrale deskriptive Statistiken könnte man sich mit <span class="in">`summary`</span> ausgeben lassen:</span>
<span id="cb73-252"><a href="#cb73-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-253"><a href="#cb73-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-256"><a href="#cb73-256" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-257"><a href="#cb73-257" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span></span>
<span id="cb73-258"><a href="#cb73-258" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(dep_delay)) <span class="sc">%&gt;%</span>  <span class="co"># keine fehlenden Werte</span></span>
<span id="cb73-259"><a href="#cb73-259" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_mean =</span> <span class="fu">mean</span>(dep_delay),</span>
<span id="cb73-260"><a href="#cb73-260" aria-hidden="true" tabindex="-1"></a>            <span class="at">depdelay_sd =</span> <span class="fu">sd</span>(dep_delay),</span>
<span id="cb73-261"><a href="#cb73-261" aria-hidden="true" tabindex="-1"></a>            <span class="at">depdelay_md =</span> <span class="fu">median</span>(dep_delay),</span>
<span id="cb73-262"><a href="#cb73-262" aria-hidden="true" tabindex="-1"></a>            <span class="at">depdelay_iqr =</span> <span class="fu">IQR</span>(dep_delay)) </span>
<span id="cb73-263"><a href="#cb73-263" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-264"><a href="#cb73-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-265"><a href="#cb73-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-266"><a href="#cb73-266" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vertiefung: Wiederholung mit `across`</span></span>
<span id="cb73-267"><a href="#cb73-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-268"><a href="#cb73-268" aria-hidden="true" tabindex="-1"></a>Oder man benutzt den Befehl <span class="in">`across`</span>, der es erlaubt, eine oder mehrere Funktionen auf eine oder mehrere Spalten wiederholtanzuwenden (Man spricht von einer "Schleife"). In diesem Beispiel wenden wir mehrere Funktionen (adressiert mit <span class="in">`.fns`</span>) auf eine Spalte (<span class="in">`dep_delay`</span>), adressiert mit dem Argument <span class="in">`.cols`</span> an. Außerdem kann man die Namen der resultierenden Spalten bestimmen mit dem Argument <span class="in">`.names`</span>. In der geschweiften Klammer steht eine interne Variable, die den Namen der jeweils berechneten Funktion (<span class="in">`{fn}`</span>) an den Namen der neu erstellten Spalte anfügt; in der Ausgabe sieht man das gut.</span>
<span id="cb73-269"><a href="#cb73-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-270"><a href="#cb73-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-273"><a href="#cb73-273" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-274"><a href="#cb73-274" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-275"><a href="#cb73-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb73-276"><a href="#cb73-276" aria-hidden="true" tabindex="-1"></a>    <span class="at">.cols =</span> dep_delay,</span>
<span id="cb73-277"><a href="#cb73-277" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="fu">list</span>(<span class="at">mean =</span> mean, </span>
<span id="cb73-278"><a href="#cb73-278" aria-hidden="true" tabindex="-1"></a>                <span class="at">md =</span> median, </span>
<span id="cb73-279"><a href="#cb73-279" aria-hidden="true" tabindex="-1"></a>                <span class="at">sd =</span> sd, </span>
<span id="cb73-280"><a href="#cb73-280" aria-hidden="true" tabindex="-1"></a>                <span class="at">iqr =</span> IQR), <span class="at">na.rm =</span> <span class="cn">TRUE</span>,</span>
<span id="cb73-281"><a href="#cb73-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">.names =</span> <span class="st">"depdelay_{fn}"</span></span>
<span id="cb73-282"><a href="#cb73-282" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb73-283"><a href="#cb73-283" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-284"><a href="#cb73-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-285"><a href="#cb73-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-286"><a href="#cb73-286" aria-hidden="true" tabindex="-1"></a><span class="fu">## flights2: Extremwerte (der Verspätung) definieren</span></span>
<span id="cb73-287"><a href="#cb73-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-288"><a href="#cb73-288" aria-hidden="true" tabindex="-1"></a>Es gibt keinen sicheren Weg, mit Extremwerten umzugehen. Häufig macht es Sinn, die Ergebnisse mehrerer Analysen zu vergleichen mit, oder ohne Extremwerten. </span>
<span id="cb73-289"><a href="#cb73-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-290"><a href="#cb73-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-291"><a href="#cb73-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-292"><a href="#cb73-292" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- [Quelle dieses Abschnitts](https://data-se.netlify.app/2021/03/08/eda-zu-flugversp%C3%A4tungen/#flights2-extremwerte-definieren) --&gt;</span></span>
<span id="cb73-293"><a href="#cb73-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-294"><a href="#cb73-294" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-295"><a href="#cb73-295" aria-hidden="true" tabindex="-1"></a>"Wann ist ein Flug *sehr* verspätet?</span>
<span id="cb73-296"><a href="#cb73-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-297"><a href="#cb73-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-298"><a href="#cb73-298" aria-hidden="true" tabindex="-1"></a><span class="fu">### Boxplot-Methode</span></span>
<span id="cb73-299"><a href="#cb73-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-300"><a href="#cb73-300" aria-hidden="true" tabindex="-1"></a>Eine Möglichkeit ist die "Boxplot-Methode": Entferne alle Flüge, die mehr verspätet sind als als das 1.5-fache der IQR über dem 3. Quartil (75. Perzentil): $q75+1.5iqr$</span>
<span id="cb73-301"><a href="#cb73-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-302"><a href="#cb73-302" aria-hidden="true" tabindex="-1"></a>Berechnen wir zunächst das 75. Perzentil (3. Quartil):</span>
<span id="cb73-303"><a href="#cb73-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-306"><a href="#cb73-306" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-307"><a href="#cb73-307" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-308"><a href="#cb73-308" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">q75 =</span> <span class="fu">quantile</span>(dep_delay, </span>
<span id="cb73-309"><a href="#cb73-309" aria-hidden="true" tabindex="-1"></a>                           <span class="at">prob =</span> .<span class="dv">75</span>, </span>
<span id="cb73-310"><a href="#cb73-310" aria-hidden="true" tabindex="-1"></a>                           <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb73-311"><a href="#cb73-311" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-312"><a href="#cb73-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-313"><a href="#cb73-313" aria-hidden="true" tabindex="-1"></a>Das sind also etwa 11 Minuten, die die Grenzlinie zwischen den 75% weniger bzw. den 25% stärker verspäteten Flügen markieren.</span>
<span id="cb73-314"><a href="#cb73-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-315"><a href="#cb73-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-316"><a href="#cb73-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-317"><a href="#cb73-317" aria-hidden="true" tabindex="-1"></a>Dann berechnen wir den IQR:</span>
<span id="cb73-318"><a href="#cb73-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-319"><a href="#cb73-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-322"><a href="#cb73-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-323"><a href="#cb73-323" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-324"><a href="#cb73-324" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_iqr =</span> <span class="fu">IQR</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb73-325"><a href="#cb73-325" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-326"><a href="#cb73-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-327"><a href="#cb73-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-328"><a href="#cb73-328" aria-hidden="true" tabindex="-1"></a>Der Grenzwert liegt dem zufolge bei:</span>
<span id="cb73-329"><a href="#cb73-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-332"><a href="#cb73-332" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-333"><a href="#cb73-333" aria-hidden="true" tabindex="-1"></a>grenzwert <span class="ot">&lt;-</span> <span class="dv">11</span> <span class="sc">+</span> <span class="fl">1.5</span><span class="sc">*</span><span class="dv">16</span></span>
<span id="cb73-334"><a href="#cb73-334" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-335"><a href="#cb73-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-336"><a href="#cb73-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-337"><a href="#cb73-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-338"><a href="#cb73-338" aria-hidden="true" tabindex="-1"></a>Das ist kein "gottgegebener" Wert, sondern *ein* pragmatischer Versuch, einen Grenzwert zu finden. </span>
<span id="cb73-339"><a href="#cb73-339" aria-hidden="true" tabindex="-1"></a>Die Nützlichkeit dieses Grenzwerts müsste sich noch erweisen.</span>
<span id="cb73-340"><a href="#cb73-340" aria-hidden="true" tabindex="-1"></a>Viele andere Grenzwerte lassen sich verteidigen.</span>
<span id="cb73-341"><a href="#cb73-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-342"><a href="#cb73-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-343"><a href="#cb73-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-344"><a href="#cb73-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-345"><a href="#cb73-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-348"><a href="#cb73-348" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-349"><a href="#cb73-349" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span></span>
<span id="cb73-350"><a href="#cb73-350" aria-hidden="true" tabindex="-1"></a>  flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-351"><a href="#cb73-351" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">is_extreme =</span> <span class="fu">case_when</span>(</span>
<span id="cb73-352"><a href="#cb73-352" aria-hidden="true" tabindex="-1"></a>    dep_delay <span class="sc">&gt;</span> <span class="dv">11</span> <span class="sc">+</span> <span class="fl">1.5</span> <span class="sc">*</span> <span class="dv">16</span> <span class="sc">~</span> <span class="cn">TRUE</span>, <span class="co"># Verspätung &gt; 35 Min.</span></span>
<span id="cb73-353"><a href="#cb73-353" aria-hidden="true" tabindex="-1"></a>    dep_delay <span class="sc">&lt;=</span> <span class="dv">35</span> <span class="sc">~</span> <span class="cn">FALSE</span>  <span class="co"># in den anderen Fällen (&lt;= 35 Min.), dann kein Extremwert</span></span>
<span id="cb73-354"><a href="#cb73-354" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb73-355"><a href="#cb73-355" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-356"><a href="#cb73-356" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-357"><a href="#cb73-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-358"><a href="#cb73-358" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-359"><a href="#cb73-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-360"><a href="#cb73-360" aria-hidden="true" tabindex="-1"></a><span class="fu">## Fehlende Werte berechnen</span></span>
<span id="cb73-361"><a href="#cb73-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-362"><a href="#cb73-362" aria-hidden="true" tabindex="-1"></a>Wie viele fehlende Werte gibt es eigentlich in <span class="in">`dep_delay`</span>?</span>
<span id="cb73-363"><a href="#cb73-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-364"><a href="#cb73-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-367"><a href="#cb73-367" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-368"><a href="#cb73-368" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb73-369"><a href="#cb73-369" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe_distribution</span>(dep_delay)</span>
<span id="cb73-370"><a href="#cb73-370" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-371"><a href="#cb73-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-372"><a href="#cb73-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-373"><a href="#cb73-373" aria-hidden="true" tabindex="-1"></a>Alternativ, und weniger komfortabel könnte man sagen</span>
<span id="cb73-374"><a href="#cb73-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-375"><a href="#cb73-375" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Hey R,</span>
<span id="cb73-376"><a href="#cb73-376" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>nimm die Tabelle <span class="in">`flights`</span> und dann</span>
<span id="cb73-377"><a href="#cb73-377" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>fasse die Spalte <span class="in">`dep_delay`</span> zu einer Zahl zusammen und zwar</span>
<span id="cb73-378"><a href="#cb73-378" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>anhand der *Summe* (<span class="in">`sum`</span>) der fehlenden Werten (<span class="in">`is.na`</span>)</span>
<span id="cb73-379"><a href="#cb73-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-380"><a href="#cb73-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-383"><a href="#cb73-383" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-384"><a href="#cb73-384" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-385"><a href="#cb73-385" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">sum</span>(<span class="fu">is.na</span>(dep_delay)))  <span class="co"># fehlende Werte zählen</span></span>
<span id="cb73-386"><a href="#cb73-386" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-387"><a href="#cb73-387" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-388"><a href="#cb73-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-389"><a href="#cb73-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-390"><a href="#cb73-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-391"><a href="#cb73-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-392"><a href="#cb73-392" aria-hidden="true" tabindex="-1"></a>Wie viele Fälle gingen verloren, wenn wir die Fälle mit fehlenden Werten bei <span class="in">`dep_delay`</span> entfernten?</span>
<span id="cb73-393"><a href="#cb73-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-396"><a href="#cb73-396" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-397"><a href="#cb73-397" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-398"><a href="#cb73-398" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-399"><a href="#cb73-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb73-400"><a href="#cb73-400" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-401"><a href="#cb73-401" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-402"><a href="#cb73-402" aria-hidden="true" tabindex="-1"></a>Und wenn wir *alle* fehlenden Werte entfernen würden?</span>
<span id="cb73-403"><a href="#cb73-403" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-406"><a href="#cb73-406" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-407"><a href="#cb73-407" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-408"><a href="#cb73-408" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-409"><a href="#cb73-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">nrow</span>()</span>
<span id="cb73-410"><a href="#cb73-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-411"><a href="#cb73-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-412"><a href="#cb73-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-413"><a href="#cb73-413" aria-hidden="true" tabindex="-1"></a>Wir verlieren nicht viele Fälle mehr, wenn wir die fehlenden Werte aller Variablen (Spalten) entfernen. Also machen wir das mal.</span>
<span id="cb73-414"><a href="#cb73-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-415"><a href="#cb73-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-416"><a href="#cb73-416" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vertiefung: across</span></span>
<span id="cb73-417"><a href="#cb73-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-418"><a href="#cb73-418" aria-hidden="true" tabindex="-1"></a>So bekommt man die fehlenden Werte für alle Spalten auf einmal:</span>
<span id="cb73-419"><a href="#cb73-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-422"><a href="#cb73-422" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-423"><a href="#cb73-423" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-424"><a href="#cb73-424" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), <span class="sc">~</span> <span class="fu">sum</span>(<span class="fu">is.na</span>(.x))))</span>
<span id="cb73-425"><a href="#cb73-425" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-426"><a href="#cb73-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-427"><a href="#cb73-427" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-428"><a href="#cb73-428" aria-hidden="true" tabindex="-1"></a>Ehrlicherweise muss man sagen, dass man mit <span class="in">`describe_distribution`</span> auch komfortabel die fehlenden Werte für alle Spalten bekommt.</span>
<span id="cb73-429"><a href="#cb73-429" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-430"><a href="#cb73-430" aria-hidden="true" tabindex="-1"></a><span class="fu">## flights3</span></span>
<span id="cb73-431"><a href="#cb73-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-432"><a href="#cb73-432" aria-hidden="true" tabindex="-1"></a>Achtung: dieses Vorgehen hier ist gefährlich. U.U. verliert man sehr viele Zeilen (Beobachtungen).</span>
<span id="cb73-433"><a href="#cb73-433" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-434"><a href="#cb73-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-435"><a href="#cb73-435" aria-hidden="true" tabindex="-1"></a><span class="in">```{r flights3}</span></span>
<span id="cb73-436"><a href="#cb73-436" aria-hidden="true" tabindex="-1"></a><span class="in">flights3 &lt;-</span></span>
<span id="cb73-437"><a href="#cb73-437" aria-hidden="true" tabindex="-1"></a><span class="in">  flights2 %&gt;% </span></span>
<span id="cb73-438"><a href="#cb73-438" aria-hidden="true" tabindex="-1"></a><span class="in">  drop_na() %&gt;% </span></span>
<span id="cb73-439"><a href="#cb73-439" aria-hidden="true" tabindex="-1"></a><span class="in">  select(-year)</span></span>
<span id="cb73-440"><a href="#cb73-440" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-441"><a href="#cb73-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-442"><a href="#cb73-442" aria-hidden="true" tabindex="-1"></a>Die Spalte <span class="in">`year`</span> ist kontant (immer der Wert "2013"); daher ist die Spalte nutzlos, sie birgt keine Information. Wir können sie gefahrlos löschen.</span>
<span id="cb73-443"><a href="#cb73-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-444"><a href="#cb73-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-445"><a href="#cb73-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-446"><a href="#cb73-446" aria-hidden="true" tabindex="-1"></a><span class="fu"># Deskriptive Statistiken</span></span>
<span id="cb73-447"><a href="#cb73-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-448"><a href="#cb73-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-449"><a href="#cb73-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-450"><a href="#cb73-450" aria-hidden="true" tabindex="-1"></a><span class="fu">## Mit `summarise`</span></span>
<span id="cb73-451"><a href="#cb73-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-452"><a href="#cb73-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-453"><a href="#cb73-453" aria-hidden="true" tabindex="-1"></a>Das kann machen mit <span class="in">`summarise`</span>. Einfach, kann aber viel Tipperei bedeuten:</span>
<span id="cb73-454"><a href="#cb73-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-457"><a href="#cb73-457" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-458"><a href="#cb73-458" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-459"><a href="#cb73-459" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">mean</span>(dep_delay),</span>
<span id="cb73-460"><a href="#cb73-460" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sd</span>(dep_delay),</span>
<span id="cb73-461"><a href="#cb73-461" aria-hidden="true" tabindex="-1"></a>            <span class="fu">mean</span>(arr_delay),</span>
<span id="cb73-462"><a href="#cb73-462" aria-hidden="true" tabindex="-1"></a>            <span class="fu">sd</span>(arr_delay))  <span class="co"># und so weiter</span></span>
<span id="cb73-463"><a href="#cb73-463" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-464"><a href="#cb73-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-465"><a href="#cb73-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-466"><a href="#cb73-466" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-467"><a href="#cb73-467" aria-hidden="true" tabindex="-1"></a><span class="fu">## Mit `describe_distribution` </span></span>
<span id="cb73-468"><a href="#cb73-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-469"><a href="#cb73-469" aria-hidden="true" tabindex="-1"></a><span class="in">`describe_distribution`</span> ist sehr praktisch; man bekommt viele Statistiken auf einmal gezeigt; das spart viel Tipperei.</span>
<span id="cb73-470"><a href="#cb73-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-473"><a href="#cb73-473" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-474"><a href="#cb73-474" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">%&gt;%</span> </span>
<span id="cb73-475"><a href="#cb73-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">describe_distribution</span>()</span>
<span id="cb73-476"><a href="#cb73-476" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-477"><a href="#cb73-477" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-478"><a href="#cb73-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-479"><a href="#cb73-479" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ## Mit `skimr`  --&gt;</span></span>
<span id="cb73-480"><a href="#cb73-480" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-481"><a href="#cb73-481" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Das Paket `skimr` mit der Funktion `skim` ist sehr ähnlich zu `describe_distribution`. Allerdings gibt `skim` auch eine Beschreibung zu den  --&gt;</span></span>
<span id="cb73-482"><a href="#cb73-482" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-483"><a href="#cb73-483" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-484"><a href="#cb73-484" aria-hidden="true" tabindex="-1"></a><span class="fu"># Korrelate von Verspätung</span></span>
<span id="cb73-485"><a href="#cb73-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-486"><a href="#cb73-486" aria-hidden="true" tabindex="-1"></a>Schauen wir, welche Variablen mit <span class="in">`dep_delay`</span>, der Verspätung der Flüge also, korrelieren.</span>
<span id="cb73-487"><a href="#cb73-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-488"><a href="#cb73-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-489"><a href="#cb73-489" aria-hidden="true" tabindex="-1"></a><span class="fu">## Metrische Prädiktoren</span></span>
<span id="cb73-490"><a href="#cb73-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-491"><a href="#cb73-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-492"><a href="#cb73-492" aria-hidden="true" tabindex="-1"></a><span class="fu">### Nur mit `cor` </span></span>
<span id="cb73-493"><a href="#cb73-493" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-494"><a href="#cb73-494" aria-hidden="true" tabindex="-1"></a>Am einfachsten geht es so. Der Nachteil ist mehr (viel) Tipperei:</span>
<span id="cb73-495"><a href="#cb73-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-498"><a href="#cb73-498" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-499"><a href="#cb73-499" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb73-500"><a href="#cb73-500" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span>  <span class="co"># wähle alle numerischen Spalten</span></span>
<span id="cb73-501"><a href="#cb73-501" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cor_month =</span> <span class="fu">cor</span>(dep_delay, month),</span>
<span id="cb73-502"><a href="#cb73-502" aria-hidden="true" tabindex="-1"></a>            <span class="at">cor_day =</span> <span class="fu">cor</span>(dep_delay, day),</span>
<span id="cb73-503"><a href="#cb73-503" aria-hidden="true" tabindex="-1"></a>            <span class="at">cor_dep_time =</span> <span class="fu">cor</span>(dep_delay, dep_time))  <span class="co"># etc</span></span>
<span id="cb73-504"><a href="#cb73-504" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-505"><a href="#cb73-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-506"><a href="#cb73-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-507"><a href="#cb73-507" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mit `easystats`</span></span>
<span id="cb73-508"><a href="#cb73-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-511"><a href="#cb73-511" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-512"><a href="#cb73-512" aria-hidden="true" tabindex="-1"></a>flights <span class="sc">|&gt;</span> </span>
<span id="cb73-513"><a href="#cb73-513" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-514"><a href="#cb73-514" aria-hidden="true" tabindex="-1"></a>  <span class="fu">correlation</span>()</span>
<span id="cb73-515"><a href="#cb73-515" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-516"><a href="#cb73-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-517"><a href="#cb73-517" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-518"><a href="#cb73-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-519"><a href="#cb73-519" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vertiefung: Mit `across`</span></span>
<span id="cb73-520"><a href="#cb73-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-521"><a href="#cb73-521" aria-hidden="true" tabindex="-1"></a>Berechnen wir die Korrelationen jetzt mit dem Befehl <span class="in">`across`</span>. Der Punkt <span class="in">`.`</span> spricht hier jeweils eine Spalte an, die von <span class="in">`across`</span> ausgewählt wurde. Der Effekt ist, dass eine Korrelation von jeder Spalte mit <span class="in">`dep_delay`</span> berechnet wird.</span>
<span id="cb73-522"><a href="#cb73-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-523"><a href="#cb73-523" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-526"><a href="#cb73-526" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-527"><a href="#cb73-527" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb73-528"><a href="#cb73-528" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(is.numeric)) <span class="sc">%&gt;%</span>  <span class="co"># nur die numerischen Spalten auswählen</span></span>
<span id="cb73-529"><a href="#cb73-529" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(</span>
<span id="cb73-530"><a href="#cb73-530" aria-hidden="true" tabindex="-1"></a>    <span class="at">.cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb73-531"><a href="#cb73-531" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fns =</span> <span class="sc">~</span> <span class="fu">cor</span>(., dep_delay))) <span class="sc">%&gt;%</span> </span>
<span id="cb73-532"><a href="#cb73-532" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>()) <span class="sc">%&gt;%</span>  <span class="co"># von breit auf lang</span></span>
<span id="cb73-533"><a href="#cb73-533" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span>value)  <span class="co"># absteigend sortieren</span></span>
<span id="cb73-534"><a href="#cb73-534" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-535"><a href="#cb73-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-536"><a href="#cb73-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-537"><a href="#cb73-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-538"><a href="#cb73-538" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- </span><span class="al">###</span><span class="co"> Mit `correlate`  --&gt;</span></span>
<span id="cb73-539"><a href="#cb73-539" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-540"><a href="#cb73-540" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Oder so, das ist vielleicht einfacher: --&gt;</span></span>
<span id="cb73-541"><a href="#cb73-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-542"><a href="#cb73-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-543"><a href="#cb73-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-544"><a href="#cb73-544" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ```{r} --&gt;</span></span>
<span id="cb73-545"><a href="#cb73-545" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- flights2 %&gt;%  --&gt;</span></span>
<span id="cb73-546"><a href="#cb73-546" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   select(where(is.numeric)) %&gt;%  # alle metrischen Variablen, aber sonst keine --&gt;</span></span>
<span id="cb73-547"><a href="#cb73-547" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   correlate() %&gt;%   # korreliere, was du hast --&gt;</span></span>
<span id="cb73-548"><a href="#cb73-548" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   focus(dep_delay) %&gt;%  # beschränke (fokussiere) dich auf `dep_delay` --&gt;</span></span>
<span id="cb73-549"><a href="#cb73-549" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   arrange(-dep_delay) --&gt;</span></span>
<span id="cb73-550"><a href="#cb73-550" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-551"><a href="#cb73-551" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ``` --&gt;</span></span>
<span id="cb73-552"><a href="#cb73-552" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-553"><a href="#cb73-553" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-554"><a href="#cb73-554" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nominale Prädiktoren</span></span>
<span id="cb73-555"><a href="#cb73-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-556"><a href="#cb73-556" aria-hidden="true" tabindex="-1"></a><span class="fu">### Welche nominalen Prädiktoren gibt es?</span></span>
<span id="cb73-557"><a href="#cb73-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-558"><a href="#cb73-558" aria-hidden="true" tabindex="-1"></a>Hey R, wähle alle nicht numerischen Spalten aus und sage mir deren Namen:</span>
<span id="cb73-559"><a href="#cb73-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-560"><a href="#cb73-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-563"><a href="#cb73-563" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-564"><a href="#cb73-564" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-565"><a href="#cb73-565" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="fu">negate</span>(is.numeric))) <span class="sc">%&gt;%</span> </span>
<span id="cb73-566"><a href="#cb73-566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span>
<span id="cb73-567"><a href="#cb73-567" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-568"><a href="#cb73-568" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-569"><a href="#cb73-569" aria-hidden="true" tabindex="-1"></a>Jetzt kann man für jede nominale Variable die Anzahl der unterschiedlichen Ausprägungen abfragen:</span>
<span id="cb73-570"><a href="#cb73-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-573"><a href="#cb73-573" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-574"><a href="#cb73-574" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-575"><a href="#cb73-575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">n_distinct</span>(carrier))</span>
<span id="cb73-576"><a href="#cb73-576" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-577"><a href="#cb73-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-578"><a href="#cb73-578" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-579"><a href="#cb73-579" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ```{r} --&gt;</span></span>
<span id="cb73-580"><a href="#cb73-580" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- flights2 %&gt;%  --&gt;</span></span>
<span id="cb73-581"><a href="#cb73-581" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   select(where(negate(is.numeric))) %&gt;%  --&gt;</span></span>
<span id="cb73-582"><a href="#cb73-582" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   summarise(across( --&gt;</span></span>
<span id="cb73-583"><a href="#cb73-583" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--     .cols = everything(), --&gt;</span></span>
<span id="cb73-584"><a href="#cb73-584" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--     .fns = list(ndist = n_distinct) --&gt;</span></span>
<span id="cb73-585"><a href="#cb73-585" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   )) %&gt;%  --&gt;</span></span>
<span id="cb73-586"><a href="#cb73-586" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   pivot_longer(everything()) --&gt;</span></span>
<span id="cb73-587"><a href="#cb73-587" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ``` --&gt;</span></span>
<span id="cb73-588"><a href="#cb73-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-589"><a href="#cb73-589" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- Geht auch mit `skim`, s. oben, ist einfacher. --&gt;</span></span>
<span id="cb73-590"><a href="#cb73-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-591"><a href="#cb73-591" aria-hidden="true" tabindex="-1"></a><span class="fu">### Carrier</span></span>
<span id="cb73-592"><a href="#cb73-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-593"><a href="#cb73-593" aria-hidden="true" tabindex="-1"></a><span class="in">`carrier`</span> meint die Fluggesellschaft, die den jeweiligen Flug durchgeführt hat.</span>
<span id="cb73-594"><a href="#cb73-594" aria-hidden="true" tabindex="-1"></a>Da stellen sich eine Reihe interessanter Fragen:</span>
<span id="cb73-595"><a href="#cb73-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-596"><a href="#cb73-596" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Wie viele verschiedene Fluggesellschaften gibt es? </span>
<span id="cb73-597"><a href="#cb73-597" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Wie viele Flüge hat jede davon ausgeführt?</span>
<span id="cb73-598"><a href="#cb73-598" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Welche Fluggesellschaft hat die meisten Flüge ausgeführt?</span>
<span id="cb73-599"><a href="#cb73-599" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Gibt es große Unterschiede in de Zahl der ausgeführten Flüge.</span>
<span id="cb73-600"><a href="#cb73-600" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Wer hat eigentlich die flüssige Seife erfunden?</span>
<span id="cb73-601"><a href="#cb73-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-602"><a href="#cb73-602" aria-hidden="true" tabindex="-1"></a>Fragen über Fragen...</span>
<span id="cb73-603"><a href="#cb73-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-606"><a href="#cb73-606" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-607"><a href="#cb73-607" aria-hidden="true" tabindex="-1"></a>flights2_count <span class="ot">&lt;-</span> </span>
<span id="cb73-608"><a href="#cb73-608" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-609"><a href="#cb73-609" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-610"><a href="#cb73-610" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(carrier, <span class="at">sort =</span> <span class="cn">TRUE</span>) </span>
<span id="cb73-611"><a href="#cb73-611" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-612"><a href="#cb73-612" aria-hidden="true" tabindex="-1"></a>flights2_count</span>
<span id="cb73-613"><a href="#cb73-613" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-614"><a href="#cb73-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-615"><a href="#cb73-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-616"><a href="#cb73-616" aria-hidden="true" tabindex="-1"></a>Wir brauchen eine Visualisierung dazu; das beantwortet vielleicht einen Teil der obigen Fragen.</span>
<span id="cb73-617"><a href="#cb73-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-618"><a href="#cb73-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-619"><a href="#cb73-619" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualisierung von `carrier`</span></span>
<span id="cb73-620"><a href="#cb73-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-621"><a href="#cb73-621" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mit `DataExplorer`</span></span>
<span id="cb73-622"><a href="#cb73-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-625"><a href="#cb73-625" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-626"><a href="#cb73-626" aria-hidden="true" tabindex="-1"></a>flights2_count <span class="sc">|&gt;</span> </span>
<span id="cb73-627"><a href="#cb73-627" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_scatterplot</span>(<span class="at">by =</span> <span class="st">"n"</span>)</span>
<span id="cb73-628"><a href="#cb73-628" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-629"><a href="#cb73-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-630"><a href="#cb73-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-631"><a href="#cb73-631" aria-hidden="true" tabindex="-1"></a><span class="fu">### Mit `ggplot`</span></span>
<span id="cb73-632"><a href="#cb73-632" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-635"><a href="#cb73-635" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-636"><a href="#cb73-636" aria-hidden="true" tabindex="-1"></a>plot1 <span class="ot">&lt;-</span> </span>
<span id="cb73-637"><a href="#cb73-637" aria-hidden="true" tabindex="-1"></a>  flights2_count <span class="sc">|&gt;</span> </span>
<span id="cb73-638"><a href="#cb73-638" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-639"><a href="#cb73-639" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> carrier, <span class="at">x =</span> n) <span class="sc">+</span></span>
<span id="cb73-640"><a href="#cb73-640" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb73-641"><a href="#cb73-641" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb73-642"><a href="#cb73-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-643"><a href="#cb73-643" aria-hidden="true" tabindex="-1"></a>plot1</span>
<span id="cb73-644"><a href="#cb73-644" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-645"><a href="#cb73-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-646"><a href="#cb73-646" aria-hidden="true" tabindex="-1"></a>Wir müssen die Werte von <span class="in">`carrier`</span> sortieren anhand der Anzahl der Flüge, sonst ist es zu unübersichtlich.</span>
<span id="cb73-647"><a href="#cb73-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-648"><a href="#cb73-648" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vertiefung: Achsen-Labels anpassen</span></span>
<span id="cb73-649"><a href="#cb73-649" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-650"><a href="#cb73-650" aria-hidden="true" tabindex="-1"></a>*Dieser Abschnitt ist zur Vertiefung, er ist  nicht inhaltlich wichtig*</span>
<span id="cb73-651"><a href="#cb73-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-652"><a href="#cb73-652" aria-hidden="true" tabindex="-1"></a>Sagen wir, wir möchten die Labels der X-Achse anpassen, und zwar möchten wir die Werte 25.000, 50.000, und 75.0000.</span>
<span id="cb73-653"><a href="#cb73-653" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-654"><a href="#cb73-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-657"><a href="#cb73-657" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-658"><a href="#cb73-658" aria-hidden="true" tabindex="-1"></a>plot1 <span class="sc">+</span></span>
<span id="cb73-659"><a href="#cb73-659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25000</span>, <span class="dv">50000</span>, <span class="dv">75000</span>),</span>
<span id="cb73-660"><a href="#cb73-660" aria-hidden="true" tabindex="-1"></a>                     <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">100000</span>),</span>
<span id="cb73-661"><a href="#cb73-661" aria-hidden="true" tabindex="-1"></a>                     <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"keine"</span>, <span class="st">"wenig"</span>, <span class="st">"mittel"</span>, <span class="st">"viel"</span>))</span>
<span id="cb73-662"><a href="#cb73-662" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-663"><a href="#cb73-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-664"><a href="#cb73-664" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-665"><a href="#cb73-665" aria-hidden="true" tabindex="-1"></a>Hm, schön sieht es noch nicht aus; die <span class="in">`limits`</span> machen nicht unbedingt Sinn. Die <span class="in">`labels`</span> sind auch wenig sinnvoll.</span>
<span id="cb73-666"><a href="#cb73-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-667"><a href="#cb73-667" aria-hidden="true" tabindex="-1"></a>Mehr zum Thema "Achsen aufhübschen" findet sich z.B. <span class="co">[</span><span class="ot">hier</span><span class="co">](https://rkabacoff.github.io/datavis/Customizing.html#axes)</span>.</span>
<span id="cb73-668"><a href="#cb73-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-669"><a href="#cb73-669" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-670"><a href="#cb73-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-671"><a href="#cb73-671" aria-hidden="true" tabindex="-1"></a><span class="fu">### "Lumpsensammler-Kategorie"</span></span>
<span id="cb73-672"><a href="#cb73-672" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-673"><a href="#cb73-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-674"><a href="#cb73-674" aria-hidden="true" tabindex="-1"></a><span class="in">```{r lumpensammler}</span></span>
<span id="cb73-675"><a href="#cb73-675" aria-hidden="true" tabindex="-1"></a><span class="in">flights2 &lt;-</span></span>
<span id="cb73-676"><a href="#cb73-676" aria-hidden="true" tabindex="-1"></a><span class="in">  flights2 %&gt;% </span></span>
<span id="cb73-677"><a href="#cb73-677" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(carrier = factor(carrier)) %&gt;%   # nicht `character`, sondern `factor` wollen</span></span>
<span id="cb73-678"><a href="#cb73-678" aria-hidden="true" tabindex="-1"></a><span class="in">  mutate(carrier_lump = fct_lump(carrier, n = 8)) </span></span>
<span id="cb73-679"><a href="#cb73-679" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-680"><a href="#cb73-680" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-681"><a href="#cb73-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-682"><a href="#cb73-682" aria-hidden="true" tabindex="-1"></a>Hier fassen wir mit <span class="in">`fct_lump`</span> alle Stufen von <span class="in">`carrier`</span> zu *acht* Stufen (daher `n = 8`) zusammen *plus* einer "*Lump*ensammler-Kategorie" zusammen.</span>
<span id="cb73-683"><a href="#cb73-683" aria-hidden="true" tabindex="-1"></a>Dazu muss die Variable aber als <span class="in">`factor`</span> vorliegen, was wir in der Zeile davor erledigt haben.</span>
<span id="cb73-684"><a href="#cb73-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-685"><a href="#cb73-685" aria-hidden="true" tabindex="-1"></a>Jetzt haben wir noch nur 9 (8 plus Lumpensammler-Gruppe) Gruppen:</span>
<span id="cb73-686"><a href="#cb73-686" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-687"><a href="#cb73-687" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-688"><a href="#cb73-688" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-689"><a href="#cb73-689" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-692"><a href="#cb73-692" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-693"><a href="#cb73-693" aria-hidden="true" tabindex="-1"></a>flights2_lump_count <span class="ot">&lt;-</span></span>
<span id="cb73-694"><a href="#cb73-694" aria-hidden="true" tabindex="-1"></a>  flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-695"><a href="#cb73-695" aria-hidden="true" tabindex="-1"></a>  <span class="co"># select(carrier) %&gt;% </span></span>
<span id="cb73-696"><a href="#cb73-696" aria-hidden="true" tabindex="-1"></a>  <span class="co"># mutate(carrier_lump = fct_lump(carrier, n = 8)) |&gt; </span></span>
<span id="cb73-697"><a href="#cb73-697" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(carrier_lump, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-698"><a href="#cb73-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-699"><a href="#cb73-699" aria-hidden="true" tabindex="-1"></a>flights2_lump_count</span>
<span id="cb73-700"><a href="#cb73-700" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-701"><a href="#cb73-701" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-702"><a href="#cb73-702" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-703"><a href="#cb73-703" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualisierung der Lumpensammler</span></span>
<span id="cb73-704"><a href="#cb73-704" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-707"><a href="#cb73-707" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-708"><a href="#cb73-708" aria-hidden="true" tabindex="-1"></a>flights2_count <span class="ot">&lt;-</span></span>
<span id="cb73-709"><a href="#cb73-709" aria-hidden="true" tabindex="-1"></a>  flights2_count <span class="sc">|&gt;</span> </span>
<span id="cb73-710"><a href="#cb73-710" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">carrier =</span>  <span class="fu">fct_reorder</span>(carrier, n)) <span class="sc">|&gt;</span> </span>
<span id="cb73-711"><a href="#cb73-711" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(carrier, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb73-712"><a href="#cb73-712" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-713"><a href="#cb73-713" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-714"><a href="#cb73-714" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-715"><a href="#cb73-715" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-716"><a href="#cb73-716" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-717"><a href="#cb73-717" aria-hidden="true" tabindex="-1"></a>Mit <span class="in">`fct_reorder`</span> haben wir die Werte von <span class="in">`carrier`</span> (UA, B6, AA, ...) sortiert und zwar anhand der Werte von <span class="in">`n`</span>, also anhand der Häufigkeit. Es resultiert eine Rangfolge: <span class="in">`UA &gt; B6 &gt; EV &gt; DL &gt; ...`</span> etc. </span>
<span id="cb73-718"><a href="#cb73-718" aria-hidden="true" tabindex="-1"></a>(Nur) Mit einer sortierten Faktorvariable lässt sich  entsprechendes Diagramm gut sortiert darstellen.</span>
<span id="cb73-719"><a href="#cb73-719" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-720"><a href="#cb73-720" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-721"><a href="#cb73-721" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit ggplot</span></span>
<span id="cb73-722"><a href="#cb73-722" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-723"><a href="#cb73-723" aria-hidden="true" tabindex="-1"></a>Liniendiagramm:</span>
<span id="cb73-724"><a href="#cb73-724" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-725"><a href="#cb73-725" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-726"><a href="#cb73-726" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-729"><a href="#cb73-729" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-730"><a href="#cb73-730" aria-hidden="true" tabindex="-1"></a>flights2_lump_count <span class="sc">|&gt;</span> </span>
<span id="cb73-731"><a href="#cb73-731" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-732"><a href="#cb73-732" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">y =</span> carrier_lump, <span class="at">x =</span> n) <span class="sc">+</span></span>
<span id="cb73-733"><a href="#cb73-733" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb73-734"><a href="#cb73-734" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">group =</span> <span class="dv">1</span>)</span>
<span id="cb73-735"><a href="#cb73-735" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-736"><a href="#cb73-736" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-737"><a href="#cb73-737" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-738"><a href="#cb73-738" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-739"><a href="#cb73-739" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-740"><a href="#cb73-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-741"><a href="#cb73-741" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-742"><a href="#cb73-742" aria-hidden="true" tabindex="-1"></a>Ah, schon besser. Aber recht informationsarm, das Diagramm. Informationsreicher als das Liniendiagramm ist ein Boxplot:</span>
<span id="cb73-743"><a href="#cb73-743" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-744"><a href="#cb73-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-747"><a href="#cb73-747" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-748"><a href="#cb73-748" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-749"><a href="#cb73-749" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-750"><a href="#cb73-750" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-751"><a href="#cb73-751" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> carrier_lump, </span>
<span id="cb73-752"><a href="#cb73-752" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-753"><a href="#cb73-753" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb73-754"><a href="#cb73-754" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-755"><a href="#cb73-755" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-756"><a href="#cb73-756" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-757"><a href="#cb73-757" aria-hidden="true" tabindex="-1"></a>Eine alternative Darstellung wäre ein <span class="co">[</span><span class="ot">Letter Value Plot</span><span class="co">](https://rdrr.io/cran/lvplot/man/geom_lv.html)</span>.</span>
<span id="cb73-758"><a href="#cb73-758" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-759"><a href="#cb73-759" aria-hidden="true" tabindex="-1"></a>Schauen wir uns mal die Mediane genauer an:</span>
<span id="cb73-760"><a href="#cb73-760" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-763"><a href="#cb73-763" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-764"><a href="#cb73-764" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-765"><a href="#cb73-765" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-766"><a href="#cb73-766" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier_lump) <span class="sc">%&gt;%</span> </span>
<span id="cb73-767"><a href="#cb73-767" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">dep_delay =</span> <span class="fu">median</span>(dep_delay, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-768"><a href="#cb73-768" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(dep_delay)</span>
<span id="cb73-769"><a href="#cb73-769" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-770"><a href="#cb73-770" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-771"><a href="#cb73-771" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-772"><a href="#cb73-772" aria-hidden="true" tabindex="-1"></a>Die Reihenfolge entspricht der dem obigen Diagramm.</span>
<span id="cb73-773"><a href="#cb73-773" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-774"><a href="#cb73-774" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-775"><a href="#cb73-775" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-776"><a href="#cb73-776" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-777"><a href="#cb73-777" aria-hidden="true" tabindex="-1"></a><span class="fu">## Korrelation von `carrier` mit Verspätung</span></span>
<span id="cb73-778"><a href="#cb73-778" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-779"><a href="#cb73-779" aria-hidden="true" tabindex="-1"></a>Hier mit "Dummysierung" aller nicht-numerischer Spalten. Ein Beispiel zur Verdeutlichung:</span>
<span id="cb73-780"><a href="#cb73-780" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-781"><a href="#cb73-781" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-784"><a href="#cb73-784" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-785"><a href="#cb73-785" aria-hidden="true" tabindex="-1"></a>flights2 <span class="ot">&lt;-</span> </span>
<span id="cb73-786"><a href="#cb73-786" aria-hidden="true" tabindex="-1"></a>  flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-787"><a href="#cb73-787" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb73-788"><a href="#cb73-788" aria-hidden="true" tabindex="-1"></a>    <span class="at">originJFK =</span> <span class="fu">case_when</span>(</span>
<span id="cb73-789"><a href="#cb73-789" aria-hidden="true" tabindex="-1"></a>      origin <span class="sc">==</span> <span class="st">"JFK"</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># "1" wenn JFK, </span></span>
<span id="cb73-790"><a href="#cb73-790" aria-hidden="true" tabindex="-1"></a>      origin <span class="sc">!=</span> <span class="st">"JFK"</span> <span class="sc">~</span> <span class="dv">0</span>   <span class="co"># ansonsten 0</span></span>
<span id="cb73-791"><a href="#cb73-791" aria-hidden="true" tabindex="-1"></a>    ),  </span>
<span id="cb73-792"><a href="#cb73-792" aria-hidden="true" tabindex="-1"></a>    <span class="at">originLGA =</span> <span class="fu">case_when</span>(</span>
<span id="cb73-793"><a href="#cb73-793" aria-hidden="true" tabindex="-1"></a>      origin <span class="sc">==</span> <span class="st">"LGA"</span> <span class="sc">~</span> <span class="dv">1</span>,  <span class="co"># "1" wenn LGA,</span></span>
<span id="cb73-794"><a href="#cb73-794" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="dv">0</span>,  <span class="co"># in allen anderen Fällen ("TRUE") 0</span></span>
<span id="cb73-795"><a href="#cb73-795" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb73-796"><a href="#cb73-796" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb73-797"><a href="#cb73-797" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-798"><a href="#cb73-798" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-799"><a href="#cb73-799" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-802"><a href="#cb73-802" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-803"><a href="#cb73-803" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-804"><a href="#cb73-804" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, originJFK, originLGA) <span class="sc">%&gt;%</span> </span>
<span id="cb73-805"><a href="#cb73-805" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb73-806"><a href="#cb73-806" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-807"><a href="#cb73-807" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-808"><a href="#cb73-808" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-809"><a href="#cb73-809" aria-hidden="true" tabindex="-1"></a>Diese Art der Umwandlung von mehrstufig-nominal in eine binäre Variable (0-1-Variable, oder "Indikatorvariable") kann man sich auch z.B. mit der Funktion <span class="in">`dummy_cols()`</span> (aus dem Paket <span class="in">`fastDummies`</span>) bewerkstelligen lassen:</span>
<span id="cb73-810"><a href="#cb73-810" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-813"><a href="#cb73-813" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-814"><a href="#cb73-814" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-815"><a href="#cb73-815" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-816"><a href="#cb73-816" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dummy_cols</span>() <span class="sc">%&gt;%</span>  <span class="co"># aus dem Paket `fastDummies`</span></span>
<span id="cb73-817"><a href="#cb73-817" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()  <span class="co"># slice(1:6)</span></span>
<span id="cb73-818"><a href="#cb73-818" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-819"><a href="#cb73-819" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-820"><a href="#cb73-820" aria-hidden="true" tabindex="-1"></a>Mit den "dummyisierten" Spalten können wir jetzt Korrelationen rechnen, denn jetzt haben wir Zahlen. </span>
<span id="cb73-821"><a href="#cb73-821" aria-hidden="true" tabindex="-1"></a>*Achtung*: Die Variablen bleiben nominalskaliert, trotz der 0-1-Transformation. </span>
<span id="cb73-822"><a href="#cb73-822" aria-hidden="true" tabindex="-1"></a>Auf diese Art Korrelationen zu berechnen ist nur für dummysierte Variablen ("Indikatorvariablen") sinnvoll. </span>
<span id="cb73-823"><a href="#cb73-823" aria-hidden="true" tabindex="-1"></a>Die Schiefe der Verteilung begrenzt hier übrigens die Stärke der Korrelation.</span>
<span id="cb73-824"><a href="#cb73-824" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-825"><a href="#cb73-825" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-828"><a href="#cb73-828" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-829"><a href="#cb73-829" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-830"><a href="#cb73-830" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-831"><a href="#cb73-831" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dummy_cols</span>() <span class="sc">%&gt;%</span>   <span class="co"># "Dummysierung"</span></span>
<span id="cb73-832"><a href="#cb73-832" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-833"><a href="#cb73-833" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>dep_delay,</span>
<span id="cb73-834"><a href="#cb73-834" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"carrier"</span>,</span>
<span id="cb73-835"><a href="#cb73-835" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"value"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb73-836"><a href="#cb73-836" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-837"><a href="#cb73-837" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">cor_depdelay_carrier =</span> <span class="fu">cor</span>(dep_delay, value,</span>
<span id="cb73-838"><a href="#cb73-838" aria-hidden="true" tabindex="-1"></a>                                       <span class="at">use =</span> <span class="st">"complete.obs"</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-839"><a href="#cb73-839" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="fu">abs</span>(cor_depdelay_carrier)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-840"><a href="#cb73-840" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">abs</span>(cor_depdelay_carrier) <span class="sc">&gt;</span> <span class="fl">0.10</span>)</span>
<span id="cb73-841"><a href="#cb73-841" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-842"><a href="#cb73-842" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-843"><a href="#cb73-843" aria-hidden="true" tabindex="-1"></a>Keine Korrelation war (im Betrag) größer als 0.1. Also gab es nur vernachlässigbare Korrelationen und im Output wurde daher nichts angezeigt.</span>
<span id="cb73-844"><a href="#cb73-844" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-845"><a href="#cb73-845" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-846"><a href="#cb73-846" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-847"><a href="#cb73-847" aria-hidden="true" tabindex="-1"></a>Zur Erinnerung: Es ist nicht unbedingt nötig, die "Dummyisierung" durchzuführen, ein einfaches Vergleichen der Mittelwerte (oder Mediane) mit ihrer Streuung führt zu einem ähnlichen Ergebnis.</span>
<span id="cb73-848"><a href="#cb73-848" aria-hidden="true" tabindex="-1"></a>Die Regression mit <span class="in">`lm`</span> führt für Sie automatisch die Dummyisierung durch. </span>
<span id="cb73-849"><a href="#cb73-849" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-850"><a href="#cb73-850" aria-hidden="true" tabindex="-1"></a><span class="fu">### `Hour`</span></span>
<span id="cb73-851"><a href="#cb73-851" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-852"><a href="#cb73-852" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-853"><a href="#cb73-853" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit ggplot</span></span>
<span id="cb73-854"><a href="#cb73-854" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-857"><a href="#cb73-857" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-858"><a href="#cb73-858" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-859"><a href="#cb73-859" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-860"><a href="#cb73-860" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb73-861"><a href="#cb73-861" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-862"><a href="#cb73-862" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-863"><a href="#cb73-863" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">fct_reorder</span>(hour, dep_delay,</span>
<span id="cb73-864"><a href="#cb73-864" aria-hidden="true" tabindex="-1"></a>                      <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb73-865"><a href="#cb73-865" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> dep_delay) <span class="sc">+</span></span>
<span id="cb73-866"><a href="#cb73-866" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb73-867"><a href="#cb73-867" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-868"><a href="#cb73-868" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-869"><a href="#cb73-869" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-870"><a href="#cb73-870" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit DataExplorer</span></span>
<span id="cb73-871"><a href="#cb73-871" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-874"><a href="#cb73-874" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-875"><a href="#cb73-875" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-876"><a href="#cb73-876" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-877"><a href="#cb73-877" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb73-878"><a href="#cb73-878" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-879"><a href="#cb73-879" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_boxplot</span>(<span class="at">by =</span> <span class="st">"hour"</span>)</span>
<span id="cb73-880"><a href="#cb73-880" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-881"><a href="#cb73-881" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-882"><a href="#cb73-882" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-883"><a href="#cb73-883" aria-hidden="true" tabindex="-1"></a><span class="fu">### `Origin`</span></span>
<span id="cb73-884"><a href="#cb73-884" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-885"><a href="#cb73-885" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit ggplot</span></span>
<span id="cb73-886"><a href="#cb73-886" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-889"><a href="#cb73-889" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-890"><a href="#cb73-890" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-891"><a href="#cb73-891" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-892"><a href="#cb73-892" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-893"><a href="#cb73-893" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-894"><a href="#cb73-894" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-895"><a href="#cb73-895" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span>
<span id="cb73-896"><a href="#cb73-896" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-897"><a href="#cb73-897" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-898"><a href="#cb73-898" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-899"><a href="#cb73-899" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit DataExplorer</span></span>
<span id="cb73-900"><a href="#cb73-900" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-903"><a href="#cb73-903" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-904"><a href="#cb73-904" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-905"><a href="#cb73-905" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-906"><a href="#cb73-906" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-907"><a href="#cb73-907" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_boxplot</span>(<span class="at">by =</span> <span class="st">"origin"</span>)</span>
<span id="cb73-908"><a href="#cb73-908" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-909"><a href="#cb73-909" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-910"><a href="#cb73-910" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-911"><a href="#cb73-911" aria-hidden="true" tabindex="-1"></a><span class="fu">## Drei Variablen: `Origin`, `hour`, `dep_delay`</span></span>
<span id="cb73-912"><a href="#cb73-912" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-913"><a href="#cb73-913" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-914"><a href="#cb73-914" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit ggplot</span></span>
<span id="cb73-915"><a href="#cb73-915" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-918"><a href="#cb73-918" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-919"><a href="#cb73-919" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-920"><a href="#cb73-920" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-921"><a href="#cb73-921" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb73-922"><a href="#cb73-922" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour, <span class="at">levels =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">23</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-923"><a href="#cb73-923" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-924"><a href="#cb73-924" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> hour, <span class="at">y =</span> dep_delay) <span class="sc">+</span></span>
<span id="cb73-925"><a href="#cb73-925" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb73-926"><a href="#cb73-926" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> origin)</span>
<span id="cb73-927"><a href="#cb73-927" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-928"><a href="#cb73-928" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-929"><a href="#cb73-929" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-930"><a href="#cb73-930" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Mit ggpubr</span></span>
<span id="cb73-931"><a href="#cb73-931" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-934"><a href="#cb73-934" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-935"><a href="#cb73-935" aria-hidden="true" tabindex="-1"></a>flights2 <span class="sc">%&gt;%</span> </span>
<span id="cb73-936"><a href="#cb73-936" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-937"><a href="#cb73-937" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(origin, dep_delay, hour) <span class="sc">%&gt;%</span> </span>
<span id="cb73-938"><a href="#cb73-938" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">hour =</span> <span class="fu">factor</span>(hour, <span class="at">levels =</span> <span class="dv">5</span><span class="sc">:</span><span class="dv">23</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-939"><a href="#cb73-939" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggboxplot</span>(<span class="at">x =</span> <span class="st">"hour"</span>, <span class="at">y =</span> <span class="st">"dep_delay"</span>, <span class="at">facet.by =</span> <span class="st">"origin"</span>)</span>
<span id="cb73-940"><a href="#cb73-940" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-941"><a href="#cb73-941" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-942"><a href="#cb73-942" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-943"><a href="#cb73-943" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-944"><a href="#cb73-944" aria-hidden="true" tabindex="-1"></a><span class="fu">## Vertiefung: Alle nominale Variablen</span></span>
<span id="cb73-945"><a href="#cb73-945" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-946"><a href="#cb73-946" aria-hidden="true" tabindex="-1"></a>Natürlich könnte man "händisch" alle nominalskalierten Variablen explizit benennen, etwa so:</span>
<span id="cb73-947"><a href="#cb73-947" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-950"><a href="#cb73-950" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-951"><a href="#cb73-951" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb73-952"><a href="#cb73-952" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(carrier, tailnum, origin, dest, time_hour) <span class="sc">%&gt;%</span> </span>
<span id="cb73-953"><a href="#cb73-953" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>)</span>
<span id="cb73-954"><a href="#cb73-954" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-955"><a href="#cb73-955" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-956"><a href="#cb73-956" aria-hidden="true" tabindex="-1"></a>Aber es geht auch etwas "cooler" mit weniger Tipperei:</span>
<span id="cb73-957"><a href="#cb73-957" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-960"><a href="#cb73-960" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-961"><a href="#cb73-961" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb73-962"><a href="#cb73-962" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">where</span>(<span class="sc">~</span> <span class="sc">!</span><span class="fu">is.numeric</span>(.))) <span class="sc">%&gt;%</span>  <span class="co"># wähle alle nicht-numerischen Spalten</span></span>
<span id="cb73-963"><a href="#cb73-963" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>()</span>
<span id="cb73-964"><a href="#cb73-964" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-965"><a href="#cb73-965" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-966"><a href="#cb73-966" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-967"><a href="#cb73-967" aria-hidden="true" tabindex="-1"></a><span class="fu">### flights4</span></span>
<span id="cb73-968"><a href="#cb73-968" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-971"><a href="#cb73-971" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-972"><a href="#cb73-972" aria-hidden="true" tabindex="-1"></a>flights4 <span class="ot">&lt;-</span></span>
<span id="cb73-973"><a href="#cb73-973" aria-hidden="true" tabindex="-1"></a>flights3 <span class="sc">%&gt;%</span> </span>
<span id="cb73-974"><a href="#cb73-974" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">dest =</span> <span class="fu">fct_lump_prop</span>(dest, <span class="at">prop =</span> .<span class="dv">025</span>)) </span>
<span id="cb73-975"><a href="#cb73-975" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-976"><a href="#cb73-976" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-977"><a href="#cb73-977" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-978"><a href="#cb73-978" aria-hidden="true" tabindex="-1"></a>Mit <span class="in">`fct_lump_prop`</span> fassen wir alle Stufen zu einer zusammen, die jeweils weniger als 2.5% der Fääle ausmachen.</span>
<span id="cb73-979"><a href="#cb73-979" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-980"><a href="#cb73-980" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-983"><a href="#cb73-983" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-984"><a href="#cb73-984" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb73-985"><a href="#cb73-985" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(dest, <span class="at">sort =</span> T)</span>
<span id="cb73-986"><a href="#cb73-986" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-987"><a href="#cb73-987" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-988"><a href="#cb73-988" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualisierung im Grid</span></span>
<span id="cb73-989"><a href="#cb73-989" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-992"><a href="#cb73-992" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-993"><a href="#cb73-993" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb73-994"><a href="#cb73-994" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-995"><a href="#cb73-995" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-996"><a href="#cb73-996" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-997"><a href="#cb73-997" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_md =</span> <span class="fu">median</span>(dep_delay, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-998"><a href="#cb73-998" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-999"><a href="#cb73-999" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> origin, <span class="at">y =</span> depdelay_md, <span class="at">color =</span> origin) <span class="sc">+</span></span>
<span id="cb73-1000"><a href="#cb73-1000" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(dest <span class="sc">~</span> carrier) <span class="sc">+</span></span>
<span id="cb73-1001"><a href="#cb73-1001" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>()</span>
<span id="cb73-1002"><a href="#cb73-1002" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-1003"><a href="#cb73-1003" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-1004"><a href="#cb73-1004" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1005"><a href="#cb73-1005" aria-hidden="true" tabindex="-1"></a>Puh, das Diagramm ist nicht sehr aussagekräftig. </span>
<span id="cb73-1006"><a href="#cb73-1006" aria-hidden="true" tabindex="-1"></a>Vielleicht besser als Tabelle?</span>
<span id="cb73-1007"><a href="#cb73-1007" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1008"><a href="#cb73-1008" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1011"><a href="#cb73-1011" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-1012"><a href="#cb73-1012" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb73-1013"><a href="#cb73-1013" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1014"><a href="#cb73-1014" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(dep_delay, dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1015"><a href="#cb73-1015" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(dest, origin, carrier) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1016"><a href="#cb73-1016" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">depdelay_md =</span> <span class="fu">median</span>(dep_delay, <span class="at">na.rm =</span> T))</span>
<span id="cb73-1017"><a href="#cb73-1017" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-1018"><a href="#cb73-1018" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1019"><a href="#cb73-1019" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1020"><a href="#cb73-1020" aria-hidden="true" tabindex="-1"></a>Hm, ist auch nicht gerade nützlich.</span>
<span id="cb73-1021"><a href="#cb73-1021" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1022"><a href="#cb73-1022" aria-hidden="true" tabindex="-1"></a>Das Beispiel zeigt, dass die Datenvisualisierung bei einer größeren Zahl an Dimensionen und/oder vielen Werten an ihre Grenzen kommen kann.</span>
<span id="cb73-1023"><a href="#cb73-1023" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1024"><a href="#cb73-1024" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1025"><a href="#cb73-1025" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1026"><a href="#cb73-1026" aria-hidden="true" tabindex="-1"></a><span class="fu">## Anzahl von Flüge</span></span>
<span id="cb73-1027"><a href="#cb73-1027" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1028"><a href="#cb73-1028" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1029"><a href="#cb73-1029" aria-hidden="true" tabindex="-1"></a><span class="fu">### Vorbereitung</span></span>
<span id="cb73-1030"><a href="#cb73-1030" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1033"><a href="#cb73-1033" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-1034"><a href="#cb73-1034" aria-hidden="true" tabindex="-1"></a>flights4_sum <span class="ot">&lt;-</span> </span>
<span id="cb73-1035"><a href="#cb73-1035" aria-hidden="true" tabindex="-1"></a>  flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb73-1036"><a href="#cb73-1036" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1037"><a href="#cb73-1037" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1038"><a href="#cb73-1038" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-1039"><a href="#cb73-1039" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(month, origin) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1040"><a href="#cb73-1040" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">delay_md =</span> <span class="fu">median</span>(dep_delay),</span>
<span id="cb73-1041"><a href="#cb73-1041" aria-hidden="true" tabindex="-1"></a>            <span class="at">delay_iqr =</span> <span class="fu">IQR</span>(dep_delay),</span>
<span id="cb73-1042"><a href="#cb73-1042" aria-hidden="true" tabindex="-1"></a>            <span class="at">delay_n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1043"><a href="#cb73-1043" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month),</span>
<span id="cb73-1044"><a href="#cb73-1044" aria-hidden="true" tabindex="-1"></a>         <span class="at">delay_n =</span> <span class="fu">as.numeric</span>(delay_n))</span>
<span id="cb73-1045"><a href="#cb73-1045" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb73-1046"><a href="#cb73-1046" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-1047"><a href="#cb73-1047" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1048"><a href="#cb73-1048" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualisierung mit ggplot</span></span>
<span id="cb73-1049"><a href="#cb73-1049" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1052"><a href="#cb73-1052" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-1053"><a href="#cb73-1053" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb73-1054"><a href="#cb73-1054" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1055"><a href="#cb73-1055" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1056"><a href="#cb73-1056" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1057"><a href="#cb73-1057" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-1058"><a href="#cb73-1058" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb73-1059"><a href="#cb73-1059" aria-hidden="true" tabindex="-1"></a>  <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> dep_delay, <span class="at">color =</span> origin) <span class="sc">+</span></span>
<span id="cb73-1060"><a href="#cb73-1060" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb73-1061"><a href="#cb73-1061" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> flights4_sum, </span>
<span id="cb73-1062"><a href="#cb73-1062" aria-hidden="true" tabindex="-1"></a>             <span class="fu">aes</span>(<span class="at">y =</span> delay_md,</span>
<span id="cb73-1063"><a href="#cb73-1063" aria-hidden="true" tabindex="-1"></a>                 <span class="at">x =</span> month)) <span class="sc">+</span></span>
<span id="cb73-1064"><a href="#cb73-1064" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>( <span class="sc">~</span> origin)</span>
<span id="cb73-1065"><a href="#cb73-1065" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-1066"><a href="#cb73-1066" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1067"><a href="#cb73-1067" aria-hidden="true" tabindex="-1"></a><span class="fu">### Visualisierung mit ggpubr</span></span>
<span id="cb73-1068"><a href="#cb73-1068" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1071"><a href="#cb73-1071" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb73-1072"><a href="#cb73-1072" aria-hidden="true" tabindex="-1"></a>flights4 <span class="sc">%&gt;%</span> </span>
<span id="cb73-1073"><a href="#cb73-1073" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span>is_extreme) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1074"><a href="#cb73-1074" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(month, origin, dep_delay) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1075"><a href="#cb73-1075" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">month =</span> <span class="fu">factor</span>(month)) <span class="sc">%&gt;%</span> </span>
<span id="cb73-1076"><a href="#cb73-1076" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb73-1077"><a href="#cb73-1077" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggviolin</span>(<span class="at">x =</span> <span class="st">"month"</span>, <span class="at">y =</span> <span class="st">"dep_delay"</span>, <span class="at">facet.by =</span> <span class="st">"origin"</span>,</span>
<span id="cb73-1078"><a href="#cb73-1078" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">"origin"</span>)</span>
<span id="cb73-1079"><a href="#cb73-1079" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-1080"><a href="#cb73-1080" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1081"><a href="#cb73-1081" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1082"><a href="#cb73-1082" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1083"><a href="#cb73-1083" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1084"><a href="#cb73-1084" aria-hidden="true" tabindex="-1"></a><span class="fu"># Fazit</span></span>
<span id="cb73-1085"><a href="#cb73-1085" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1086"><a href="#cb73-1086" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1087"><a href="#cb73-1087" aria-hidden="true" tabindex="-1"></a>Keine heiße Spur bisher. Allerdings erlaubt explorative Datenanalyse nur die gleichzeitige Betrachtung von zwei bis drei, vielleicht vier Variablen. Sind die Zusammenhänge komplizierter in dem Sinne, dass mehrere Variablen für einen Effekt zusammenwirken, so ist es mit explorativen Methoden schwer zu finden. </span>
<span id="cb73-1088"><a href="#cb73-1088" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1089"><a href="#cb73-1089" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1090"><a href="#cb73-1090" aria-hidden="true" tabindex="-1"></a>Der nächste logische Schritt: Wir müssen modellieren. Mit Modellierungsmethoden lassen sich auch hochdimensionale Zusammenhänge finden. </span>
<span id="cb73-1091"><a href="#cb73-1091" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1092"><a href="#cb73-1092" aria-hidden="true" tabindex="-1"></a><span class="fu"># Achtung</span></span>
<span id="cb73-1093"><a href="#cb73-1093" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1094"><a href="#cb73-1094" aria-hidden="true" tabindex="-1"></a>Diese Analyse ist rein explorativ in dem Sinne, dass keine Hypothesen getestet werden. Es ist damit zu rechnen, dass falsch-positive Befunde auftauchen. Alle Ergebnisse sollten anhand neuer Daten validiert werden.</span>
<span id="cb73-1095"><a href="#cb73-1095" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1096"><a href="#cb73-1096" aria-hidden="true" tabindex="-1"></a><span class="fu"># Reproduzierbarkeit</span></span>
<span id="cb73-1097"><a href="#cb73-1097" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1098"><a href="#cb73-1098" aria-hidden="true" tabindex="-1"></a><span class="in">```{r reproducibility, echo = FALSE}</span></span>
<span id="cb73-1099"><a href="#cb73-1099" aria-hidden="true" tabindex="-1"></a><span class="in">## Reproducibility info</span></span>
<span id="cb73-1100"><a href="#cb73-1100" aria-hidden="true" tabindex="-1"></a><span class="in">options(width = 120)</span></span>
<span id="cb73-1101"><a href="#cb73-1101" aria-hidden="true" tabindex="-1"></a><span class="in">devtools::session_info()</span></span>
<span id="cb73-1102"><a href="#cb73-1102" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb73-1103"><a href="#cb73-1103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1104"><a href="#cb73-1104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1105"><a href="#cb73-1105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1106"><a href="#cb73-1106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1107"><a href="#cb73-1107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1108"><a href="#cb73-1108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1109"><a href="#cb73-1109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-1110"><a href="#cb73-1110" aria-hidden="true" tabindex="-1"></a></span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>