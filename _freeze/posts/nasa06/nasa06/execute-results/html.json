{
  "hash": "143793f0012ec63746c02ca43f8ca3fb",
  "result": {
    "engine": "knitr",
    "markdown": "---\nextype: string\nexsolution: NA\nexname: nasa06\nexpoints: 1\ncategories:\n- data\n- eda\n- lagemaÃŸe\n- string\ndate: '2023-05-09'\nslug: nasa06\ntitle: nasa06\n\n---\n\n\n\n\n\n\n\n# Aufgabe\n\n\nViele Quellen berichten Klimadaten unserer Erde, z.B. auch [National Aeronautics and Space Administration - Goddard Institute for Space Studies](https://data.giss.nasa.gov/gistemp/).\n\nVon dieser Quelle beziehen wir [diesen Datensatz](https://data.giss.nasa.gov/gistemp/tabledata_v4/GLB.Ts+dSST.csv).\n\n\nDie Datensatz sind auf der Webseite wie folgt beschrieben:\n\n\n*Tables of Global and Hemispheric Monthly Means and Zonal Annual Means*\n\nCombined Land-Surface Air and Sea-Surface Water Temperature Anomalies (Land-Ocean Temperature Index, L-OTI)\n\nThe following are plain-text files in tabular format of temperature anomalies, i.e. *deviations from the corresponding 1951-1980 means*.\n\n\n>   Global-mean monthly, seasonal, and annual means, 1880-present, updated through most recent month: TXT, CSV\n\nStarten Sie zunÃ¤chst das R-Paket `tidyverse` falls noch nicht geschehen.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\nImportieren Sie dann die Daten:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndata_path <- \"https://data.giss.nasa.gov/gistemp/tabledata_v4/GLB.Ts+dSST.csv\"\nd <- read_csv(data_path, skip = 1)\n```\n:::\n\n\nWir lassen die 1. Zeile des Datensatzes aus (Argument `skip`), da dort *Metadaten* stehen,\nalso keine Daten, sondern Informationen (Daten) zu den eigentlichen Daten.\n\n\n**Aufgaben**\n\n\n1. Fassen Sie immer 10 Jahre (eine Dekade) an Jahren zusammen.\n2. PrÃ¤sentieren Sie gÃ¤ngige Statistiken pro Dekade fÃ¼r alle Monate.\n\n\n\nHinweise:\n\n- Sie mÃ¼ssen zuerst die Dekade als neue Spalte berechnen.\n- Treffen Sie Annahmen, wo nÃ¶tig.\n- Beachten Sie die [Hinweise](https://datenwerk.netlify.app/hinweise).\n\n\n\n\n\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# LÃ¶sung\n\n\nTabelle in die Lang-Form bringen:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_long <- \n  d %>% \n  select(Year, Jan:Dec) %>% \n  mutate(across(Jan:Dec, as.numeric)) %>% \n  pivot_longer(cols = Jan:Dec, values_to = \"temp\", names_to = \"month\") \n```\n:::\n\n\nEin Blick in die Tabelle: \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nhead(d_long)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 3\n   Year month  temp\n  <dbl> <chr> <dbl>\n1  1880 Jan   -0.18\n2  1880 Feb   -0.24\n3  1880 Mar   -0.09\n4  1880 Apr   -0.16\n5  1880 May   -0.1 \n6  1880 Jun   -0.21\n```\n\n\n:::\n:::\n\n\n\nDekade berechnen:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_long2 <-\n  d_long %>% \n  mutate(decade = round(Year/10) * 10)\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ntail(d_long2)  # letzten paar Zeilen der Tabelle \"d_long2\"\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 4\n   Year month  temp decade\n  <dbl> <chr> <dbl>  <dbl>\n1  2024 Jul      NA   2020\n2  2024 Aug      NA   2020\n3  2024 Sep      NA   2020\n4  2024 Oct      NA   2020\n5  2024 Nov      NA   2020\n6  2024 Dec      NA   2020\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_summarized <-\nd_long2 %>% \n  group_by(decade, month) %>% \n  summarise(temp_mean = mean(temp, na.rm = TRUE),\n            temp_sd = sd(temp, na.rm = TRUE))\n```\n:::\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 4\n# Groups:   decade [1]\n  decade month temp_mean temp_sd\n   <dbl> <chr>     <dbl>   <dbl>\n1   1880 Apr      -0.213   0.175\n2   1880 Aug      -0.157   0.113\n3   1880 Dec      -0.185   0.118\n4   1880 Feb      -0.17    0.187\n5   1880 Jan      -0.203   0.240\n6   1880 Jul      -0.173   0.132\n```\n\n\n:::\n:::\n\n\nZum Visualisieren gibt es meist viele Wege. Hier ist ein Weg mit `ggplot2`:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_summarized %>% \n  ggplot(aes(x = decade, y = temp_mean)) +\n  geom_point(color = \"darkblue\") +\n  geom_errorbar(aes(ymin = temp_mean - temp_sd, ymax = temp_mean + temp_sd)) +\n  geom_line(alpha = .7) +\n  facet_wrap(~ month) +\n  labs(caption = \"Fehlerbalken zeigen plus/minus 1 SD\")\n```\n\n::: {.cell-output-display}\n![](chunk-img/unnamed-chunk-9-1.png){fig-align='center' fig-pos='H' width=100%}\n:::\n:::\n\n\nMonate zu einem Jahreswert zusammen:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_summarized2 <- \n  d_summarized %>% \n  group_by(decade) %>% \n  summarise(temp_mean = mean(temp_mean),\n            temp_sd = sd(temp_sd))\n\nd_summarized2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 15 Ã— 3\n   decade temp_mean temp_sd\n    <dbl>     <dbl>   <dbl>\n 1   1880  -0.192    0.0580\n 2   1890  -0.265    0.0540\n 3   1900  -0.226    0.0216\n 4   1910  -0.357    0.0452\n 5   1920  -0.272    0.0580\n 6   1930  -0.191    0.0470\n 7   1940   0.0324   0.0289\n 8   1950  -0.0671   0.0357\n 9   1960  -0.0341   0.0308\n10   1970  -0.00759  0.0401\n11   1980   0.145    0.0304\n12   1990   0.308    0.0236\n13   2000   0.51     0.0235\n14   2010   0.655    0.0401\n15   2020   0.963    0.0484\n```\n\n\n:::\n:::\n\n\nAlternativ kÃ¶nnen Sie zum Visualisieren der Daten z.B. das Paket `ggpubr` nutzen:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(ggpubr)\nggscatter(d_summarized2, x = \"decade\", y = \"temp_mean\", add = \"reg.line\")\n```\n\n::: {.cell-output-display}\n![](chunk-img/unnamed-chunk-11-1.png){fig-align='center' fig-pos='H' width=100%}\n:::\n:::\n\n\nOder auch mit den Facetten pro Monat:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nggscatter(d_summarized, x = \"decade\", y = \"temp_mean\", add = \"reg.line\",\n          facet.by = \"month\")\n```\n\n::: {.cell-output-display}\n![](chunk-img/unnamed-chunk-12-1.png){fig-align='center' fig-pos='H' width=100%}\n:::\n:::\n\n\n\nÃ„hnlich sieht es mit `DataExplorer` aus:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(DataExplorer)\nd_summarized2 |> \n  select(temp_mean, decade) |> \n  plot_scatterplot(by = \"decade\")\n\nd_summarized2 |> \n  select(temp_sd, decade) |> \n  plot_scatterplot(by = \"decade\")\n```\n\n::: {.cell-output-display}\n![](chunk-img/unnamed-chunk-13-1.png){fig-align='center' fig-pos='H' width=100%}\n:::\n\n::: {.cell-output-display}\n![](chunk-img/unnamed-chunk-13-2.png){fig-align='center' fig-pos='H' width=100%}\n:::\n:::\n\n\n\n\nDie weltweilte Temperatur steigt.\nBleibt u.a. die Frage, ob eine lineare Funktion angemessen ist,\noder ob die Steigung nicht vielleicht prozentual steigt (das wÃ¤re eine exponenzielle Steigerung)?\n\n\n\nFalls Sie Teile der R-Syntax nicht kennen: Machen Sie sich nichts daraus.  ðŸ˜„\n\n\n\n\n\n\n\n---\n\nCategories: \n\n- data\n- eda\n- lagemaÃŸe\n- string\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}