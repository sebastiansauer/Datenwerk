{
  "hash": "a18e7ad17b25d3642540e09d15f19aae",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexname: bike01\nextype: num\nexsolution: r fmt(sol)\nexshuffle: no\nexpoints: 1\ncategories:\n- statlearning\n- tidymodels\n- num\ndate: '2023-05-17'\nslug: bike01\ntitle: bike01\n\n---\n\n\n\n\n\n\n\n\n\n# Aufgabe\n\nKann man die Anzahl gerade verliehener Fahrräder eines entsprechenden Anbieters anhand der Temperatur vorhersagen?\n\nIn dieser Übung untersuchen wir diese Frage.\n\nSie können die Daten von der [Webseite der UCI](https://archive.ics.uci.edu/ml/datasets/Bike+Sharing+Dataset#) herunterladen.\n\nWir beziehen uns auf den Datensatz `day`.\n\nBerechnen Sie ein lineares Modell mit der Anzahl der aktuell vermieteten Räder als AV und der aktuellen Temperatur als UV!\n\nGeben Sie den MSE an!\n\n[Hinweise](https://sebastiansauer.github.io/Lehre/Hinweise/Hinweise-Bearbeitung.html)\n\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Lösung\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-1_8758250108830db5f86e354514187fd5'}\n\n```{.r .cell-code}\nlibrary(tidymodels)\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-2_80135b49ba6550d68f9be5a7e1b723d2'}\n\n```{.r .cell-code}\nd <- read.csv(\"/Users/sebastiansaueruser/datasets/Bike-Sharing-Dataset/day.csv\")\n```\n:::\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-3_49f1a8d54691ba48b78aeacb61368933'}\n\n```{.r .cell-code}\nglimpse(d)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 731\nColumns: 16\n$ instant    <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ dteday     <chr> \"2011-01-01\", \"2011-01-02\", \"2011-01-03\", \"2011-01-04\", \"20…\n$ season     <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ yr         <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,…\n$ mnth       <int> 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…\n$ holiday    <int> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0,…\n$ weekday    <int> 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4, 5, 6, 0, 1, 2, 3, 4,…\n$ workingday <int> 0, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, 1,…\n$ weathersit <int> 2, 2, 1, 1, 1, 1, 2, 2, 1, 1, 2, 1, 1, 1, 2, 1, 2, 2, 2, 2,…\n$ temp       <dbl> 0.3441670, 0.3634780, 0.1963640, 0.2000000, 0.2269570, 0.20…\n$ atemp      <dbl> 0.3636250, 0.3537390, 0.1894050, 0.2121220, 0.2292700, 0.23…\n$ hum        <dbl> 0.805833, 0.696087, 0.437273, 0.590435, 0.436957, 0.518261,…\n$ windspeed  <dbl> 0.1604460, 0.2485390, 0.2483090, 0.1602960, 0.1869000, 0.08…\n$ casual     <int> 331, 131, 120, 108, 82, 88, 148, 68, 54, 41, 43, 25, 38, 54…\n$ registered <int> 654, 670, 1229, 1454, 1518, 1518, 1362, 891, 768, 1280, 122…\n$ cnt        <int> 985, 801, 1349, 1562, 1600, 1606, 1510, 959, 822, 1321, 126…\n```\n\n\n:::\n:::\n\n\n## Data split\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-4_c0e74a6202028f37f0e924f3d13cee68'}\n\n```{.r .cell-code}\nset.seed(42)\nsplit_vec <- initial_split(d, strata = cnt)\n\nd_train <- training(split_vec)\nd_test <- testing(split_vec)\n```\n:::\n\n\n\n\n## Define recipe\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-5_e2996cc8955af5fa6d8acfaa9ba214dd'}\n\n```{.r .cell-code}\nrec1 <- \n  recipe(cnt ~ temp, data = d)\n```\n:::\n\n\n\n\n## Define model\n\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-6_a904b15f10f42158caad23b4d60db025'}\n\n```{.r .cell-code}\nm1 <-\n  linear_reg()\n```\n:::\n\n\n\n\n\n## Workflow\n\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-7_e1665185e795e705b2d27774e507e08f'}\n\n```{.r .cell-code}\nwf1 <-\n  workflow() %>% \n  add_model(m1) %>% \n  add_recipe(rec1) \n```\n:::\n\n\n\n\n## Fit\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-8_ed91962d66e38ea6d150d10e75fe210b'}\n\n```{.r .cell-code}\nfit1 <- last_fit(wf1, split_vec)\nfit1\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# Resampling results\n# Manual resampling \n# A tibble: 1 × 6\n  splits            id               .metrics .notes   .predictions .workflow \n  <list>            <chr>            <list>   <list>   <list>       <list>    \n1 <split [547/184]> train/test split <tibble> <tibble> <tibble>     <workflow>\n```\n\n\n:::\n:::\n\n\n\n\n## Model performance (metrics) in test set\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-9_30077ddd9aa16c1cfc9eeaa059baf477'}\n\n```{.r .cell-code}\nfit1 %>% collect_metrics()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  .metric .estimator .estimate .config             \n  <chr>   <chr>          <dbl> <chr>               \n1 rmse    standard    1509.    Preprocessor1_Model1\n2 rsq     standard       0.411 Preprocessor1_Model1\n```\n\n\n:::\n:::\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-10_2f2813d0ebfde5ebdbec710c5cd7996e'}\n\n```{.r .cell-code}\nMSE <- fit1 %>% collect_metrics() %>% pluck(3, 1)\nMSE\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1509.477\n```\n\n\n:::\n:::\n\n\n\n\n**Solution**: 1509.4768321\n\n\n\n::: {.cell hash='bike01_cache/html/unnamed-chunk-11_e693b5c25b05e342db9c06e4502cb74e'}\n\n:::\n\n\n\n\n\n---\n\nCategories: \n\n- statlearning\n- tidymodels\n- num\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}