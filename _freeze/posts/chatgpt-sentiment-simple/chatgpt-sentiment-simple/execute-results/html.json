{
  "hash": "a13672760209a8b46d1acc1ef7cde1cf",
  "result": {
    "engine": "knitr",
    "markdown": "---\ndate: 2023-12-06 \ndraft: FALSE   # ACHTUNG DRAFT STEHT AUF TRUE!\ntitle: chatgpt-sentiment-simple\nextype: string\nexsolution: \"\"\ncategories:\n- textmining\n- nlp\n- transformer\n- chatgpt\n- sentiment\nexecute:\n  error: true\n---\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Aufgabe\n\n\nFragen Sie ChatGPT via API zum Sentiment des ersten Texts aus dem Germeval-2018-Datensatz (Train).\n\n\n![](https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/ChatGPT_logo.svg/1200px-ChatGPT_logo.svg.png){width=25% fig-align=\"center\"}\n\n\n\nHinweise:\n\n- Beachten Sie die [Standardhinweise des Datenwerks](https://datenwerk.netlify.app/hinweise).\n- Nutzen Sie Python, nicht R.\n- Das Verwenden der OpenAI-API kostet Geld. ðŸ’¸ Informieren Sie sich vorab. Um auf die API zugreifen zu kÃ¶nnen, mÃ¼ssen Sie sich ein Konto angelegt haben und Ã¼ber ein Guthaben verfÃ¼gen.\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# LÃ¶sung\n\n\n::: {.callout-attention}\nOpenAI hat eine neue API (Stand: 2023-11-23). Der Code der alten API bricht. ðŸ’” $\\square$\n:::\n\n\nModule importieren:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfrom openai import OpenAI\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nModuleNotFoundError: No module named 'openai'\n```\n\n\n:::\n:::\n\n\n\nAnmelden bei OpenAI:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nclient = OpenAI()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNameError: name 'OpenAI' is not defined\n```\n\n\n:::\n:::\n\n\n\n::: {.callout-note}\nDieses Verfahren setzt voraus, dass in `.Renviron` die Variable `OPENAI_API_KEY` hinterlegt ist. $\\square$\n:::\n\n\nTextschnipsel, das zu klassifizieren ist:\n\n\n::: {.cell}\n\n```{.python .cell-code}\ntext = \"@corinnamilborn Liebe Corinna, wir wÃ¼rden dich gerne als Moderatorin fÃ¼r uns gewinnen! WÃ¤rst du begeisterbar?\"\n```\n:::\n\n\n\nPrompt definieren:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nmy_prompt  = f\"Analysieren Sie das Sentiment des folgenden Texts:\\n{text}\"\n```\n:::\n\n\n\nAnfrage an die API, in eine Funktion gepackt:\n\n\n::: {.cell}\n\n```{.python .cell-code}\ndef get_completion(prompt, client_instance, model=\"gpt-3.5-turbo\"):\n  messages = [{\"role\": \"user\", \"content\": prompt}]\n  response = client_instance.chat.completions.create(\n  model=model,\n  messages=messages,\n  max_tokens=50,\n  temperature=0,\n  )\n  return response.choices[0].message.content\n```\n:::\n\n\n\nUnd los:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nget_completion(my_prompt, client) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNameError: name 'client' is not defined\n```\n\n\n:::\n:::\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}