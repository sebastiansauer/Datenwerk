{
  "hash": "6a12d111b07cb8b78c697fff3342220e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ndate: today\ndraft: FALSE   # ACHTUNG DRAFT STEHT AUF TRUE!\ntitle: chatgpt-sentiment-simple\nextype: string\nexsolution: \"\"\ncategories:\n- textmining\n- nlp\n- transformer\n- chatgpt\n- sentiment\n---\n\n\n\n\n\n\n\n\n\n\n# Aufgabe\n\n\nFragen Sie ChatGPT via API zum Sentiment des ersten Texts aus dem Germeval-2018-Datensatz (Train).\n\n\nHinweise:\n\n- Beachten Sie die [Standardhinweise des Datenwerks](https://datenwerk.netlify.app/hinweise).\n- Nutzen Sie Python, nicht R.\n- Das Verwenden der OpenAI-API kostet Geld. üí∏ Informieren Sie sich vorab. Um auf die API zugreifen zu k√∂nnen, m√ºssen Sie sich ein Konto angelegt haben und √ºber ein Guthaben verf√ºgen.\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# L√∂sung\n\n\n::: {.callout-attention}\nOpenAI hat eine neue API (Stand: 2023-11-23). Der Code der alten API bricht. üíî $\\square$\n:::\n\n\nModule importieren:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nfrom openai import OpenAI\n```\n:::\n\n\n\nAnmelden bei OpenAI:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nclient = OpenAI()\n```\n:::\n\n\n\n::: {.callout-note}\nDieses Verfahren setzt voraus, dass in `.Renviron` die Variable `OPENAI_API_KEY` hinterlegt ist. $\\square$\n:::\n\n\nTextschnipsel, das zu klassifizieren ist:\n\n\n::: {.cell}\n\n```{.python .cell-code}\ntext = \"@corinnamilborn Liebe Corinna, wir w√ºrden dich gerne als Moderatorin f√ºr uns gewinnen! W√§rst du begeisterbar?\"\n```\n:::\n\n\n\nPrompt definieren:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nmy_prompt  = f\"Analysieren Sie das Sentiment des folgenden Texts:\\n{text}\"\n```\n:::\n\n\n\nAnfrage an die API, in eine Funktion gepackt:\n\n\n::: {.cell}\n\n```{.python .cell-code}\ndef get_completion(prompt, client_instance, model=\"gpt-3.5-turbo\"):\n  messages = [{\"role\": \"user\", \"content\": prompt}]\n  response = client_instance.chat.completions.create(\n  model=model,\n  messages=messages,\n  max_tokens=50,\n  temperature=0,\n  )\n  return response.choices[0].message.content\n```\n:::\n\n\n\nUnd los:\n\n\n::: {.cell}\n\n```{.python .cell-code}\nget_completion(my_prompt, client) \n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'Basierend auf dem gegebenen Text kann das Sentiment als positiv eingestuft werden. Der Text dr√ºckt eine positive Absicht aus, indem er Corinna Milborn als Moderatorin gewinnen m√∂chte und Interesse an ihrer'\n```\n\n\n:::\n:::\n",
    "supporting": [
      "chatgpt-sentiment-simple_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}