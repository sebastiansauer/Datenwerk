{
  "hash": "9a49e9fbcc76c9c9b7951df59e468b09",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexname: count-emojis\nexpoints: 1\nextype: string\nexsolution: NA\ncategories:\n- textmining\n- tidymodels\n- count\n- germeval\n- emoji\n- string\ndate: '2023-11-16'\nslug: count-emojis\ntitle: count-emojis\n\n---\n\n\n\n\n\n\n\n# Aufgabe\n\nZ√§hlen sie die Emojis eines Textes. \n\nUntersuchen Sie die Rechenzeit, die die jeweiligen Verfahren ben√∂tigen.\n\n\n\nHinweise:\n\n- Orientieren Sie sich im √úbrigen an den [allgemeinen Hinweisen des Datenwerks](https://datenwerk.netlify.app/hinweise).\n\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# L√∂sung\n\n\n\n# Setup\n\n\n::: {.cell}\n\n```{.r .cell-code}\noptions(paged.print = FALSE,\n        pillar.print_max = 15, \n        pillar.print_min = 10)\n```\n:::\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(tictoc)  # Zeitmessung\n```\n:::\n\n\n\nTeststring:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest_text <-\n  tibble(id = 1:4,\n         text = c(\"Abbau ist jetzt\", \n                  \"Hello üòäüåéüöÄ\", \n                  \"üî´\", \n                  \"üî´ üî™\"),\n         valence = c(0, 1, -1, -2))\n\ntest_text\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| id|text            | valence|\n|--:|:---------------|-------:|\n|  1|Abbau ist jetzt |       0|\n|  2|Hello üòäüåéüöÄ    |       1|\n|  3|üî´              |      -1|\n|  4|üî´ üî™           |      -2|\n\n</div>\n:::\n:::\n\n\n\nDaten importieren:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(wild_emojis, package = \"pradadata\")\n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwild_emojis$value <- 1\nwild_emojis$word <- wild_emojis$emoji\n```\n:::\n\n\n\n\n# W√∂rter z√§hlen im Test-Datensatz\n\n\n\n## `stringr::str_count`\n\n\nMan kann den Unicode-Code von Emojis ansprechen, praktische Sache:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nemoji_pattern <- \"\\\\p{So}\" \n```\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest_text$text |> \n  map_int(str_count, emoji_pattern)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0 3 1 2\n```\n\n\n:::\n:::\n\n\n\n\nDie Funktion `map` ist nicht n√∂tig:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr_count(test_text$text, \"\\\\p{So}\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0 3 1 2\n```\n\n\n:::\n:::\n\n\n\nAls neue Spalte in der Tabelle:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntest_text |>\n  mutate(n_emojis = str_count(text, \"\\\\p{So}\"))\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| id|text            | valence| n_emojis|\n|--:|:---------------|-------:|--------:|\n|  1|Abbau ist jetzt |       0|        0|\n|  2|Hello üòäüåéüöÄ    |       1|        3|\n|  3|üî´              |      -1|        1|\n|  4|üî´ üî™           |      -2|        2|\n\n</div>\n:::\n:::\n\n\n\n\n\n# Germeval-Datensatz\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(germeval_train, package = \"pradadata\")\n```\n:::\n\n\n\n\n\n\n## `stringr::str_count`\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntic()\nmethod1 <- germeval_train$text |> \n  map_int(str_count, emoji_pattern)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.474 sec elapsed\n```\n\n\n:::\n\n```{.r .cell-code}\nmethod1 |> str()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n int [1:5009] 0 0 1 0 0 0 0 0 0 1 ...\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprint(method1, max = 20)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n [1] 0 0 1 0 0 0 0 0 0 1 0 0 0 0 0 0 1 4 0 0\n [ reached getOption(\"max.print\") -- omitted 4989 entries ]\n```\n\n\n:::\n:::\n\n\n\nDie Funktion `map` ist nicht n√∂tig:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntic()\nmethod3 <- \n  str_count(germeval_train$text, emoji_pattern)\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.011 sec elapsed\n```\n\n\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmethod3 |> head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0 0 1 0 0 0\n```\n\n\n:::\n:::\n\n\n\n\nDann geht es auch viel schneller.\n\nAls neue Spalte in der Tabelle:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntic()\nmethod4 <- \ngermeval_train |> \n  mutate(n_words = str_count(text, emoji_pattern))\ntoc()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n0.017 sec elapsed\n```\n\n\n:::\n:::\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nstr(method4)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n'data.frame':\t5009 obs. of  5 variables:\n $ id     : int  1 2 3 4 5 6 7 8 9 10 ...\n $ text   : chr  \"@corinnamilborn Liebe Corinna, wir w√ºrden dich gerne als Moderatorin f√ºr uns gewinnen! W√§rst du begeisterbar?\" \"@Martin28a Sie haben ja auch Recht. Unser Tweet war etwas missverst√§ndlich. Dass das BVerfG Sachleistungen nich\"| __truncated__ \"@ahrens_theo fr√∂hlicher gru√ü aus der sch√∂nsten stadt der welt theo ‚öìÔ∏è\" \"@dushanwegner Amis h√§tten alles und jeden gew√§hlt...nur Hillary wollten sie nicht und eine Fortsetzung von Obam\"| __truncated__ ...\n $ c1     : chr  \"OTHER\" \"OTHER\" \"OTHER\" \"OTHER\" ...\n $ c2     : chr  \"OTHER\" \"OTHER\" \"OTHER\" \"OTHER\" ...\n $ n_words: int  0 0 1 0 0 0 0 0 0 1 ...\n - attr(*, \".internal.selfref\")=<externalptr> \n```\n\n\n:::\n\n```{.r .cell-code}\nmethod4 |> head()\n```\n\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n| id|text                                                                                                                                                                                                                                                                                         |c1      |c2     | n_words|\n|--:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|:-------|:------|-------:|\n|  1|@corinnamilborn Liebe Corinna, wir w√ºrden dich gerne als Moderatorin f√ºr uns gewinnen! W√§rst du begeisterbar?                                                                                                                                                                                |OTHER   |OTHER  |       0|\n|  2|@Martin28a Sie haben ja auch Recht. Unser Tweet war etwas missverst√§ndlich. Dass das BVerfG Sachleistungen nicht ausschlie√üt, kritisieren wir.                                                                                                                                               |OTHER   |OTHER  |       0|\n|  3|@ahrens_theo fr√∂hlicher gru√ü aus der sch√∂nsten stadt der welt theo ‚öìÔ∏è                                                                                                                                                                                                                        |OTHER   |OTHER  |       1|\n|  4|@dushanwegner Amis h√§tten alles und jeden gew√§hlt...nur Hillary wollten sie nicht und eine Fortsetzung von Obama-Politik erst recht nicht..!                                                                                                                                                 |OTHER   |OTHER  |       0|\n|  5|@spdde kein verl√§√ülicher Verhandlungspartner. Nachkarteln nach den Sondierzngsgespr√§chen - schickt diese St√ºmper #SPD in die Versenkung.                                                                                                                                                     |OFFENSE |INSULT |       0|\n|  6|@Dirki_M Ja, aber wo widersprechen die Zahlen denn denen, die im von uns verlinkten Artikel stehen? In unserem Tweet geht es rein um subs. Gesch√ºtzte. 2017 ist der gesamte Familiennachzug im Vergleich zu 2016 - die Zahlen, die Hr. Brandner bem√ºht - √ºbrigens leicht r√ºckl√§ufig gewesen. |OTHER   |OTHER  |       0|\n\n</div>\n:::\n:::\n\n\n\n\n\n\n---\n\nCategories: \n\n- textmining\n- tidymodels\n- count\n- germeval\n- emojis\n- string\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}