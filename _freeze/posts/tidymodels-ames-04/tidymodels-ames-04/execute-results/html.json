{
  "hash": "88f96d855f13a10dc279849fbfdf7988",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexname: tidymodels-ames-04\nextype: num\nexsolution: r fmt(sol)\nexshuffle: no\nextol: 1\nexpoints: 1\ncategories:\n- ds1\n- tidymodels\n- prediction\n- yacsda\n- statlearning\n- num\ndate: '2023-05-17'\nslug: tidymodels-ames-04\ntitle: tidymodels-ames-04\n\n---\n\n\n\n\n\n\n\n\n\n# Aufgabe\n\nBerechnen Sie ein lineares Modell mit tidymodels und zwar anhand des `ames` Datensatzes.\n\nModellgleichung: `Sale_Price ~ Gr_Liv_Area, data = ames`.\n\nBerechnen Sie ein multiplikatives (exponenzielles) Modell.\n\nGesucht ist R-Quadrat als Maß für die Modellgüte im *TEST-Sample*.\n\n\n\n*Hinweise*:\n\n- Fixieren Sie die Zufallszahlen auf den Startwert 42.\n- Verwenden Sie die Funktion `last_fit`.\n\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Lösung\n\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-1_211e1ad7c9a4fbc33f8e22c281e0b1a5'}\n\n```{.r .cell-code}\nlibrary(tidymodels)\ndata(ames)\n```\n:::\n\n\n\nMultiplikatives Modell:\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-2_e333887d0aa79bb14973de4314d5ed4b'}\n\n```{.r .cell-code}\names <- \n  ames %>% \n  mutate(Sale_Price = log10(Sale_Price)) %>% \n  select(Sale_Price, Gr_Liv_Area)\n```\n:::\n\n\nNicht vergessen: AV-Transformation in beiden Samples!\n\n\nDatensatz aufteilen:\n\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-3_105096376d5f930e5371a65cd2409405'}\n\n```{.r .cell-code}\nset.seed(42)\names_split <- initial_split(ames, prop = 0.80, strata = Sale_Price)\names_train <- training(ames_split)\names_test  <-  testing(ames_split)\n```\n:::\n\n\n\n\nModell definieren:\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-4_e3d5af717b2dc0c671c5dfa8193576ad'}\n\n```{.r .cell-code}\nm1 <-\n  linear_reg() # engine ist \"lm\" im Default\n```\n:::\n\n\n\nRezept definieren:\n\n\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-5_d33a22248e5924ad04f830e97df553c2'}\n\n```{.r .cell-code}\nrec1 <- \n  recipe(Sale_Price ~ Gr_Liv_Area, data = ames) \n```\n:::\n\n\n\n\n\nVorhersagen mit `last_fit`:\n\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-6_0e0c3916c65fe3ebe3d3237a4b257764'}\n\n```{.r .cell-code}\nfit1_last <- last_fit(object = m1, preprocessor = rec1, split = ames_split)  \nfit1_last\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# Resampling results\n# Manual resampling \n# A tibble: 1 × 6\n  splits             id               .metrics .notes   .predictions .workflow \n  <list>             <chr>            <list>   <list>   <list>       <list>    \n1 <split [2342/588]> train/test split <tibble> <tibble> <tibble>     <workflow>\n```\n\n\n:::\n:::\n\n\nWir bekommen ein Objekt, in dem Fit, Modellgüte, Vorhersagen und Hinweise enthalten sind.\n\nOhne Rezept lässt sich `last_fit` nicht anwenden.\n\nVorhersagen:\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-7_5137ec604752d1f3025de7809baae88e'}\n\n```{.r .cell-code}\nfit1_last %>% collect_predictions() %>% \n  head()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 × 5\n  id               .pred  .row Sale_Price .config             \n  <chr>            <dbl> <int>      <dbl> <chr>               \n1 train/test split  5.07     2       5.02 Preprocessor1_Model1\n2 train/test split  5.18     3       5.24 Preprocessor1_Model1\n3 train/test split  5.31    18       5.60 Preprocessor1_Model1\n4 train/test split  5.11    26       5.15 Preprocessor1_Model1\n5 train/test split  5.18    29       5.26 Preprocessor1_Model1\n6 train/test split  5.10    30       4.98 Preprocessor1_Model1\n```\n\n\n:::\n:::\n\n\n\nModellgüte im Test-Sample:\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-8_18e20b88f02154d4ed577b2ef64b89ec'}\n\n```{.r .cell-code}\nfit1_last %>% collect_metrics()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 4\n  .metric .estimator .estimate .config             \n  <chr>   <chr>          <dbl> <chr>               \n1 rmse    standard       0.118 Preprocessor1_Model1\n2 rsq     standard       0.517 Preprocessor1_Model1\n```\n\n\n:::\n:::\n\n\n\n\nR-Quadrat:\n\n\n\n::: {.cell hash='tidymodels-ames-04_cache/html/unnamed-chunk-9_d17c8bf4b262fc1daccf35237d03ca56'}\n\n```{.r .cell-code}\nsol <- 0.517\nsol\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.517\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n---\n\nCategories: \n\n- ds1\n- tidymodels\n- prediction\n- yacsda\n- statlearning\n- num\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}