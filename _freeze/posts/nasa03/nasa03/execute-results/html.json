{
  "hash": "a478c06f7cbc1ab30e5f9d55eba86c06",
  "result": {
    "markdown": "---\nextype: string\nexsolution: NA\nexname: nasa03\nexpoints: 1\ncategories:\n- data\n- eda\n- association\n- string\ndate: '2023-05-08'\nslug: nasa03\ntitle: nasa03\n\n---\n\n\n\n\n\n\n\n# Aufgabe\n\n\nViele Quellen berichten Klimadaten unserer Erde, z.B. auch [National Aeronautics and Space Administration - Goddard Institute for Space Studies](https://data.giss.nasa.gov/gistemp/).\n\nVon dieser Quelle beziehen wir [diesen Datensatz](https://data.giss.nasa.gov/gistemp/tabledata_v4/GLB.Ts+dSST.csv).\n\n\nDie Datensatz sind auf der Webseite wie folgt beschrieben:\n\n\n*Tables of Global and Hemispheric Monthly Means and Zonal Annual Means*\n\nCombined Land-Surface Air and Sea-Surface Water Temperature Anomalies (Land-Ocean Temperature Index, L-OTI)\n\nThe following are plain-text files in tabular format of temperature anomalies, i.e. *deviations from the corresponding 1951-1980 means*.\n\n\n>   Global-mean monthly, seasonal, and annual means, 1880-present, updated through most recent month: TXT, CSV\n\nStarten Sie zunächst das R-Paket `tidyverse` falls noch nicht geschehen.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\nImportieren Sie dann die Daten:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndata_path <- \"https://data.giss.nasa.gov/gistemp/tabledata_v4/GLB.Ts+dSST.csv\"\nd <- read_csv(data_path, skip = 1)\n```\n:::\n\n\nWir lassen die 1. Zeile des Datensatzes aus (Argument `skip`), da dort *Metadaten* stehen,\nalso keine Daten, sondern Informationen (Daten) zu den eigentlichen Daten.\n\n\n**Aufgaben**\n\n\n- Erstellen Sie für jeden Januar eine Variable (`temp_is_above`), die ausgibt, ob die Temperatur über oder unter dem Durchschnitt liegt (d.h. eine negative oder positive Abweichung ist). Nutzen Sie als Ausprägungen die Werte \"yes\" und \"no\".\n- Erstellen Sie dann eine Variable, die das Jahrhundert angibt (19. JH. vs. 20 JH).\n- Zählen Sie dann wie oft `temp_is_above` \"yes\" aufweist pro Jahrhundert (\"erhöhter Temperatur\").\n- Berechnen Sie das *Odds Ratio* (Chancenverhältnis) von erhöhter Temperatur (vs. nicht erhöhter Temperatur) zwischen dem 19. und dem 20. Jahrhundert.\n\n\n\nFür \"Wenn-Dann-Abfragen\" eignet sich folgender R-Befehl (als \"Pseudocode\" dargestellt):\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd %>% \n  mutate(neue_spalte = case_when(\n    erste_bedingung_bzw_wenn_teil ~ dann_teil1,\n    zweite_bedingung_bzw_zweiter_wenn_teil ~ dann_teil2\n  ))\n```\n:::\n\n\n\nEs finden sich online viele Hilfsangebote zu `case_when`, falls Sie weitere Informationen benötigen.\n\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Lösung\n\n\n`temp_is_above` erstellen:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd <-\n  d %>% \n  mutate(temp_is_above = case_when(\n    Jan > 0 ~ \"yes\",\n    Jan <= 0 ~ \"no\"\n  ))\n```\n:::\n\n\n\nJahrhundert berechnen:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd <-\n  d %>% \n  mutate(century = case_when(\n    Year < 1900 ~ \"19th\",\n    Year >= 1900 ~ \"20th\"\n  ))\n```\n:::\n\n\n\nErhöhte Werte der Januar-Temperatur pro Jahrhundert berechnen:\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_summarized <- \nd %>% \n  group_by(century) %>% \n  count(temp_is_above)\n\nd_summarized\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 3\n# Groups:   century [2]\n  century temp_is_above     n\n  <chr>   <chr>         <int>\n1 19th    no               19\n2 19th    yes               1\n3 20th    no               56\n4 20th    yes              68\n```\n:::\n:::\n\n\n\nDer Befehl `count()` zählt aus, wie häufig die Ausprägungen der angegebenen Variablen `X` sind,\nm.a.W. er gibt die Verteilung von `X` wieder.\n\nEs macht vermutlich Sinn, noch die Anteile (relative Häufigkeiten) zu den absoluten Häufigkeiten zu ergänzen:\n\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nd_summarized %>% \n  mutate(prop = n / sum(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 4 × 4\n# Groups:   century [2]\n  century temp_is_above     n  prop\n  <chr>   <chr>         <int> <dbl>\n1 19th    no               19 0.95 \n2 19th    yes               1 0.05 \n3 20th    no               56 0.452\n4 20th    yes              68 0.548\n```\n:::\n:::\n\n\n\nOdds Ratio berechnen:\n\nWir bezeichnen mit `c19` (für \"Chance 1\") das Verhältnis von erhöhter Temperatur zu nicht erhöhter Temperatur im 19. Jahrhundert.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nc19 <- 1 / 19\n```\n:::\n\n\nMit `c20` bezeichnen wir die analoge Chance für das 20. Jahrhundert:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nc20 <- 56 / 67\n```\n:::\n\n\nDas Verhältnis der beiden Chancen gibt das Chancenverhältnis (Odds Ratio, OR):\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nc19 / c20\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 0.06296992\n```\n:::\n:::\n\n\n\nGenauso gut kann man das OR von `c20` zu `c19` ausrechnen, \nder Effekt bleibt identisch:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nc20 / c19\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 15.8806\n```\n:::\n:::\n\n\nIn beiden Fällen ist es ein Faktor von knapp 16.\n\n\n\n\n\n\n---\n\nCategories: \n\n- data\n- eda\n- association\n- string\n\n",
    "supporting": [
      "nasa03_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}