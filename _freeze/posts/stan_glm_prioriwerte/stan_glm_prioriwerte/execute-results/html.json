{
  "hash": "b2934dd62aa771348099cec6b3004469",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexname: stan_glm_prioriwerte\nextype: schoice\nexsolution: 512\nexshuffle: no\ncategories:\n- bayes\n- regression\n- qm2\n- qm2-pruefung2023\ndate: '2022-12-15'\nslug: stan_glm_prioriwerte\ntitle: stan_glm_prioriwerte\n\n---\n\n\n\n\n\n\n\n\n\n\n\n\n# Exercise\n\nBerechnet man eine Posteriori-Verteilung mit `stan_glm()`, \nso kann man entweder die schwach informativen Prioriwerte der Standardeinstellung verwenden, \noder selber Prioriwerte definieren.\n\nBetrachten Sie dazu dieses Modell:\n\n```\nstan_glm(price ~ cut, data = diamonds, \n                   prior = normal(location = c(100, 100, 100, 100),\n                                  scale = c(10, 10, 10, 10)),\n                   prior_intercept = normal(3000, 500))\n```\n\nBeziehen Sie sich auf den Datensatz `diamonds`.\n\nHinweise:\n\n- Gehen Sie davon aus, dass die Post-Verteilung von Intercept und Gruppeneffekte normalverteilt sind.\n\n\nWelche Aussage dazu passt (am besten)?\n\nAnswerlist\n----------\n* Es wird für (genau) einen Parameter eine Priori-Verteilung definiert.\n* Für das Regressionsgewicht $\\beta_1$ sind negative Werte *apriori* plausibel.\n* Mit `prior = normal()` werden Gruppenmittelwerte definiert.\n* Alle Parameter des Modells sind normalverteilt.\n\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Solution\n\nProbieren geht über Studieren:\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n\n\n\nDie Prioris, die Stan gewählt hat, kann man sich so anschauen:\n\n\n\n::: {.cell}\n::: {.cell-output .cell-output-stdout}\n\n```\nPriors for model 'm1' \n------\nIntercept (after predictors centered)\n  Specified prior:\n    ~ normal(location = 3933, scale = 2.5)\n  Adjusted prior:\n    ~ normal(location = 3933, scale = 9974)\n\nCoefficients\n  Specified prior:\n    ~ normal(location = [0,0,0,...], scale = [2.5,2.5,2.5,...])\n  Adjusted prior:\n    ~ normal(location = [0,0,0,...], scale = [34685.38,20362.28,22862.49,...])\n\nAuxiliary (sigma)\n  Specified prior:\n    ~ exponential(rate = 1)\n  Adjusted prior:\n    ~ exponential(rate = 0.00025)\n------\nSee help('prior_summary.stanreg') for more details\n```\n\n\n:::\n:::\n\n\n\n\n\nDa gilt: $\\forall i: \\beta_i \\sim \\mathcal{N}(0, 2.5)$ (alle betas sind normalverteilt mit Mittelwert 0 und Streuung 2.5), liegt die Wahrscheinlichkeit (apriori) bei 50%,\ndass der Wert von \\beta_i$ negativ ist.\nAnders gesagt: Wir glauben zu 50%, dass der Parameter einen negativen Wert hat.\n\n\nHier sind die Modellparameter:\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n<div class=\"kable-table\">\n\n|Parameter    |    Median|   CI|      CI_low|   CI_high|     pd|     Rhat|      ESS|Prior_Distribution | Prior_Location| Prior_Scale|\n|:------------|---------:|----:|-----------:|---------:|------:|--------:|--------:|:------------------|--------------:|-----------:|\n|(Intercept)  | 4354.8658| 0.95|  4169.07052| 4547.0432| 1.0000| 1.001107| 1217.127|normal             |         3932.8|    9973.599|\n|cutGood      | -426.0173| 0.95|  -648.67945| -208.6854| 1.0000| 1.000706| 1425.390|normal             |            0.0|   34685.376|\n|cutIdeal     | -896.5401| 0.95| -1099.02567| -704.1566| 1.0000| 1.000850| 1238.594|normal             |            0.0|   20362.277|\n|cutPremium   |  231.1998| 0.95|    26.52966|  435.0068| 0.9875| 1.001244| 1291.555|normal             |            0.0|   22862.493|\n|cutVery Good | -371.8452| 0.95|  -575.61301| -174.4921| 1.0000| 1.001360| 1236.940|normal             |            0.0|   23922.148|\n\n</div>\n:::\n:::\n\n\n\nWie man sieht, sind negative Werte auch *aposteriori* plausibel für $\\beta_1$, `cutGood`:\n\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](unnamed-chunk-5-1.png){fig-pos='H' width=384}\n:::\n:::\n\n\n\n\n\n\n\nAnswerlist\n----------\n\n\n* Falsch. Es gibt mehrere Parameter im Modell (Achsenabschnitt, 4 Prädiktoren, sigma)\n* Wahr. Für `cutGood` sind negative Werte plausibel.\n* Falsch. `prior = normal()` werden Regressionskoeffizienten in ihren Prioris definiert.\n* Falsch. sigma ist in Stans Voreinstellung exponentialverteilt.\n\n\n\n\n\n---\n\nCategories: \n\n- bayes\n- regression\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}