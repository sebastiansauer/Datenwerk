{
  "hash": "1f29fcf60cb3e84d0f779ae290199427",
  "result": {
    "engine": "knitr",
    "markdown": "---\nexname: fattails01\nextype: schoice\nexsolution: 1\nexshuffle: no\nextol: 1\nexpoints: 1\ncategories:\n- probability\n- simulation\n- fat-tails\n- bayes\n- bayesbox\n- normal-distribution\ndate: '2022-11-23'\nslug: fattails01\ntitle: fattails01\n\n---\n\n\n\n\n\n\n\n\n\n\n\n# Exercise\n\nIn seinem Buch [\"Statistical Consequences of Fat Tails\"](https://nassimtaleb.org/2020/01/final-version-fat-tails/) schreibt der Autor, Nassim Taleb (S. 53):\n\n\n>   In the summer of 1998, the hedge fund called \"Long Term Capital Management\" (LTCM) proved to have a very short life; it went bust from some deviations in the markets –those \"of an unexpected nature\". The loss was a yuuuge deal because two of the partners received the Swedish Riksbank Prize, marketed as the \"Nobel\" in economics. (...)  At least two of the partners made the statement that it was a \"10 sigma\" event (10 standard deviations), hence they should be absolved of all accusations of incompetence (I was ﬁrst hand witness of two such statements).\n\nWir testen in diesem Zusammenhang zwei Hypothesen: $H_N$, dass der Finanzmarkt normalverteilt ist und $H_F$, dass die Variable *fat tailed* ist, also nicht normalverteilt, sondern einer Verteilung entspringt, in der \"Extremereignisse\" üblicher sind als in einer Normalverteilung.\n\n\nUm die Fat-Tails-Verteilung mit $n=100$ zu simulieren, nutzen wir hier folgende Funktion:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nfat_tail_data <- rt(n = 100, df = 2)\nfat_tail_data\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  [1]  1.07191553  0.72657936 -2.80806303 -0.85734696 -1.04171088 -0.28511071\n  [7] -2.75731766  3.40892560 -0.04349465  0.47287150  0.45974792 -1.46049304\n [13] -3.74368779  2.04522523 -0.66975671  4.07853948 -1.17612519  0.38781548\n [19] -0.33177745  1.65383190 -1.26904428  0.27299761  0.73593247  4.61849952\n [25] -1.44744698  0.50048936  0.43025422  0.82865545 -0.29585177  1.45277039\n [31] -0.19685570  2.03453595 -2.80819124 -1.23728166  1.68274260  0.07762617\n [37]  1.93997804  1.42263539  0.29633265 -1.59313972  1.92145539  1.34359698\n [43] -1.06202057  1.06301775 -1.18618803 -0.84320470  0.30827389  0.30204104\n [49]  0.23887092 -0.24805784  0.73815822  0.95554468  0.25865658  0.43817601\n [55] -1.19220151  2.63504876  2.43347344 -0.55008682  0.45452923 -0.68099639\n [61] -1.16186463 -1.07633371 -2.51757583  0.26391561  2.89981158 -0.51761706\n [67]  0.35357062  1.47791202  0.66371887  0.02602585  0.64872915  0.06521705\n [73] -0.82166280 -1.35420194 -0.46883260 -3.74712138 -0.36786794 -1.32467679\n [79]  0.52858969 -4.23238733 -0.36714337  1.91162691  0.65455221 -2.27650824\n [85] -1.62695648 -0.01502936 -1.63442072 -0.39442218  0.02307418 -0.43621203\n [91]  5.01808414  2.40812328  0.94164588  1.61395555  1.23642268  1.41891769\n [97] -1.24735187 -7.22070070  1.36514248 -0.05180149\n```\n\n\n:::\n:::\n\n\n\nDabei bedeutet `df = 2`, dass die Verteilung sehr randlastig (fat tailed) sein soll \n(genauer gesagt eine t-Verteilung mit zwei Freiheitsgraden).\nDetails zu dieser R-Funktion sollen uns hier nicht interessieren. \n*Nur* für diejenigen, die neugierig sind: `r` steht für `random`, \nalso eine Zufallszahl. Diese soll aus der sog. *t-Verteilung* mit df=2 stammen. \nDas ist, einfach gesagt, eine \"plattgedrückte\" Normalverteilung, \nalso eine Verteilung mit mehr Verteilung in den Rändern als die Normalverteilung.\n\n\nBerechnen wir die Wahrscheinlichkeit, dass die Daten einer Normalverteilung entspringen (und nicht der Fat-Tail-Verteilung).\n\n\nDie Wahrscheinlichkeit eines 10-Sigma-Events ist übrigens ... klein. Taleb berichtet sie mit $1.31 \\cdot 10^{-23}$:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nL_norm <- 1.31e-23\n```\n:::\n\n\n\nDas ist eine Zahl mit 23 Nullen hinter dem Komma und vor der Eins: 0.0000000000000000000000131.\n\n\n\nFür die t-Verteilung ist der entsprechende Wert:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nL_fat <- 1 - pt(q = 10, df = 2)\nL_fat\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.004926229\n```\n\n\n:::\n:::\n\n\n\nAuch hier soll der Befehl `pt` nicht interessieren.\n*Nur* für die Neugierigen: *p*  steht für *probability*, *t* für die t-Verteilung.\nDer Befehl gibt uns also die Wahrscheintlichkeit, $p$, für ein bestimmten Quartil, $q$,\naus einer t-Verteilung mit 2 Freiheitsgraden.\n\n\n\n*Wie hoch ist die Post-Wahrscheinlichkeit, dass die Variable normalverteilt ist?*\n\n\n\n\nHinweise:\n\n- Geben Sie Anteile oder Wahrscheinlichkeiten stets mit zwei Dezimalstellen an (sofern nicht anders verlangt).\n- Apriori sollen uns beide Hypothesen gleich plausibel sein.\n\n\nAnswerlist\n==========\n* kleiner als 50%\n* kleiner als 5%\n* kleiner als 0.5%\n* kleiner als 0.05%\n* kleiner als 0.005%\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Solution\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\nErstellen wir erstmal den ersten Teil einer Bayes-Box:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <-\n  tibble(H = c(\"Normalverteilt\", \"Randlastig verteilt\"),\n         Prior = c(1,1))\n\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  H                   Prior\n  <chr>               <dbl>\n1 Normalverteilt          1\n2 Randlastig verteilt     1\n```\n\n\n:::\n:::\n\n\n\nDann fügen wir den Likelihood jeder Hypothese dazu:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <-\n  d %>% \n  mutate(L = c(L_norm, L_fat))\n\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 3\n  H                   Prior        L\n  <chr>               <dbl>    <dbl>\n1 Normalverteilt          1 1.31e-23\n2 Randlastig verteilt     1 4.93e- 3\n```\n\n\n:::\n:::\n\n\n\n\nDann berechnen wir die Post-Wahrscheinlichkeit:\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nd <-\n  d %>% \n  mutate(Post_unstand = Prior * L,\n         Post = Post_unstand / sum(Post_unstand))\nd\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 5\n  H                   Prior        L Post_unstand     Post\n  <chr>               <dbl>    <dbl>        <dbl>    <dbl>\n1 Normalverteilt          1 1.31e-23     1.31e-23 2.66e-21\n2 Randlastig verteilt     1 4.93e- 3     4.93e- 3 1   e+ 0\n```\n\n\n:::\n:::\n\n\n\n\nDie Wahrscheinlichkeit, dass die Variable normalverteilt ist, ist seeeeehr klein, ca. $10^{-21}$.\n\nDas ist kleiner als kleiner als 0.005%.\n\n\nAnswerlist\n==========\n* FALSE\n* FALSE\n* FALSE\n* FALSE\n* TRUE\n\n\n\n\n---\n\nCategories: \n\n- probability\n- simulation\n- fat-tails\n- normal-distribution\n- fat-tails\n\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}