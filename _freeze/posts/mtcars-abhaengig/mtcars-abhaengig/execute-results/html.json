{
  "hash": "d27875810fed356b4ab7752035a5e6b6",
  "result": {
    "engine": "knitr",
    "markdown": "---\nextype: string\nexsolution: NA\nexname: mtcars-abhaengig\nexpoints: 1\ncategories:\n- probability\n- dependent\n- mtcars\ndate: '2022-10-24'\nslug: mtcars-abhaengig\ntitle: mtcars-abhaengig\n\n---\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n# Exercise\n\nOb wohl die *PS-Zahl* (Ereignis $A$) und der *Spritverbrauch* (Ereignis $B$) voneinander abhängig sind? \nWas meinen Sie? Was ist Ihre Einschätzung dazu? \nVermutlich haben Sie ein (wenn vielleicht auch implizites) Vorab-Wissen zu dieser Frage. \nLassen wir dieses Vorab-Wissen aber einmal außen vor und schauen uns rein Daten dazu an. \nVereinfachen wir die Frage etwas, indem wir fragen, \nob die Ereignisse \"hoher Spritverbrauch\" (A) und \"hohe PS-Zahl\" voneinander abhängig sind.\n\nUm es konkret zu machen, nutzen wir den Datensatz `mtcars`:\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-1_6022d8882103c0b572c419d0602e02c1'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ndata(mtcars)\nglimpse(mtcars)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 32\nColumns: 11\n$ mpg  <dbl> 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8, 19.2, 17.8,…\n$ cyl  <dbl> 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4, 4, 4, 4, 8,…\n$ disp <dbl> 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146.7, 140.8, 16…\n$ hp   <dbl> 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, 180, 180, 180…\n$ drat <dbl> 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92, 3.92, 3.92,…\n$ wt   <dbl> 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.190, 3.150, 3.…\n$ qsec <dbl> 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20.00, 22.90, 18…\n$ vs   <dbl> 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0,…\n$ am   <dbl> 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0,…\n$ gear <dbl> 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4, 4, 4, 3, 3,…\n$ carb <dbl> 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1, 2, 1, 1, 2,…\n```\n\n\n:::\n:::\n\n\n\n\n\nWeitere Infos zum Datensatz bekommen Sie mit `help(mtcars)` in R.\n\nDefinieren wir uns das Ereignis \"hohe PS-Zahl\" (und nennen wir es `hp_high`, klingt cooler). \nSagen wir, wenn die PS-Zahl größer ist als der Median,\ndann trifft `hp_high` zu, ansonsten nicht:\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-2_d138801abc6f6b6193e15b073972577a'}\n\n```{.r .cell-code}\nmtcars %>% \n  summarise(median(hp))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  median(hp)\n1        123\n```\n\n\n:::\n:::\n\n\n\n\nMit dieser \"Wenn-Dann-Abfrage\" können wir die Variable `hp_high` \nmit den Stufen `TRUE` und `FALSE` definieren:\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-3_63ea7d7ddf6dd1f6387c68a4d332c2c7'}\n\n```{.r .cell-code}\nmtcars <-\n  mtcars %>% \n  mutate(hp_high = case_when(\n    hp > 123 ~ TRUE,\n    hp <= 123 ~ FALSE\n  ))\n```\n:::\n\n\n\n\n\nGenauso gehen wir mit dem Spritverbrauch vor (`mpg_high`):\n\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-4_69ada679a0b617a20a2c202ab7adcb6e'}\n\n```{.r .cell-code}\nmtcars <- \n  mtcars %>% \n  mutate(mpg_high = case_when(\n    mpg > median(mpg) ~ TRUE,\n    mpg <= median(mpg) ~ FALSE\n  ))\n```\n:::\n\n\n\n\n\na) Schauen Sie im Datensatz nach, ob unser Vorgehen (Erstellung von `hp_high` und `mpg_high`) überhaupt funktioniert hat. Probieren geht über Studieren.\n\nb) Visualisieren Sie in geeigneter Form den Zusammenhang.\n\nc) Berechnen Sie $Pr(\\text{mpg high}|\\text{hphigh})$ und $Pr(\\text{mpg high}|\\neg \\text{hp high})$ !\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Solution\n\na) Schauen wir mal in den Datensatz: \n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-5_4e4f2c0188714d72ea78cdae15f26564'}\n\n```{.r .cell-code}\nmtcars %>% \n  select(hp, hp_high, mpg, mpg_high) %>% \n  slice_head(n = 5)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n                   hp hp_high  mpg mpg_high\nMazda RX4         110   FALSE 21.0     TRUE\nMazda RX4 Wag     110   FALSE 21.0     TRUE\nDatsun 710         93   FALSE 22.8     TRUE\nHornet 4 Drive    110   FALSE 21.4     TRUE\nHornet Sportabout 175    TRUE 18.7    FALSE\n```\n\n\n:::\n:::\n\n\n\n\nb)\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-6_83bab401ee5de79d5864e8e0a083f784'}\n\n```{.r .cell-code}\nmtcars %>% \n  #select(hp_high, mpg_high) %>% \n  ggplot() +\n  aes(x = hp_high, fill = mpg_high) +\n  geom_bar(position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](unnamed-chunk-6-1.png){fig-pos='H' width=384}\n:::\n:::\n\n\n\n\n\nHey, sowas von abhängig voneinander, die zwei Variablen, `mpg_high` und `hp_high`!\n\nDer *rechte* Balken zeigt $Pr(\\text{mpghigh}|\\text{hp high})$ und $Pr(\\neg \\text{mpg high}|\\text{hp high})$.Der *linke* Balken zeigt $Pr(\\text{mpg high}|\\neg \\text{hp high})$ und $Pr(\\neg \\text{mpg high}|\\neg \\text{hp high})$.\n\n\n\nc) Berechnen wir die relevanten Anteile:\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-7_412d516079d4435cf1e7618e16f4da78'}\n\n```{.r .cell-code}\nmtcars %>% \n  #select(hp_high, mpg_high) %>% \n  count(hp_high, mpg_high) %>%  # Anzahl pro Zelle der Kontingenztabelle\n  group_by(hp_high) %>%  # die Anteile pro \"Balken\" s. Diagramm\n  mutate(prop = n / sum(n))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 4 × 4\n# Groups:   hp_high [2]\n  hp_high mpg_high     n   prop\n  <lgl>   <lgl>    <int>  <dbl>\n1 FALSE   FALSE        3 0.176 \n2 FALSE   TRUE        14 0.824 \n3 TRUE    FALSE       14 0.933 \n4 TRUE    TRUE         1 0.0667\n```\n\n\n:::\n:::\n\n\n\n\n\n\nAm besten, Sie führen den letzten Code Schritt für Schritt aus und schauen sich jeweils das Ergebnis an, das hilft beim Verstehen.\n\nAlternativ kann man sich die Häufigkeiten auch schön bequem ausgeben lassen:\n\n\n\n\n::: {.cell hash='mtcars-abhaengig_cache/html/unnamed-chunk-8_2020053aee3341849d23b41af91253fc'}\n\n```{.r .cell-code}\nlibrary(mosaic)\ntally(mpg_high ~ hp_high, \n      data = mtcars, \n      format = \"proportion\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n        hp_high\nmpg_high       TRUE      FALSE\n   TRUE  0.06666667 0.82352941\n   FALSE 0.93333333 0.17647059\n```\n\n\n:::\n:::\n\n\n\n\n\n\n\n\n---\n\nCategories: \n\n- probability\n- dependent\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}