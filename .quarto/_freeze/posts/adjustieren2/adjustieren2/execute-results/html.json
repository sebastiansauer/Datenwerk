{
  "hash": "cab624635628b7818e3dad525c74ba05",
  "result": {
    "engine": "knitr",
    "markdown": "---\nextype: cloze\nexclozetype: num|string\nexsolution: 3932.5|r regression_formel\nexname: adjustieren2\nexpoints: 0.5\ncategories:\n- regression\n- lm\n- qm2\n- bayes\n- adjust\n- qm2-pruefung\ndate: '2022-09-04'\nslug: adjustieren2\ntitle: adjustieren2\n\n---\n\n\n\n\n\n\n\n\n\n\n# Exercise\n\n\nBetrachten Sie folgendes Modell, das den Zusammenhang des Preises (`price`) \nund dem Gewicht (`carat`) von Diamanten untersucht (Datensatz `diamonds`).\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-1_d5afc048a1d2c93d27c0a1a2d6d5ae04'}\n\n```{.r .cell-code}\nlibrary(tidyverse)\ndiamonds <- read_csv(\"https://vincentarelbundock.github.io/Rdatasets/csv/ggplot2/diamonds.csv\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nRows: 53940 Columns: 11\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (3): cut, color, clarity\ndbl (8): rownames, carat, depth, table, price, x, y, z\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n```\n\n\n:::\n:::\n\n\n\n\nAber zuerst zentrieren wir den metrischen Prädiktor `carat`, \num den Achsenabschnitt besser interpretieren zu können. \n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-2_823902193fa37a28ec641ff0d565b05c'}\n\n```{.r .cell-code}\ndiamonds <-\n  diamonds %>% \n  mutate(carat_z = carat - mean(carat, na.rm = TRUE))\n```\n:::\n\n\nDann berechnen wir ein (bayesianisches) Regressionsmodell, \nwobei wir auf die Standardwerte der Prior zurückgreifen.\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-3_56eb21d718a171d482ffcfa03cccddeb'}\n\n```{.r .cell-code}\nlibrary(rstanarm)\nlibrary(easystats)\nlm1 <- stan_glm(price ~ carat_z, data = diamonds,\n                chains = 1,  # nur ein Mal Stichproben ziehen, spart Zeit (auf Kosten der Genauigkeit)\n                refresh = 0)\nparameters(lm1)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nParameter   |  Median |             95% CI |   pd |  Rhat |     ESS |                       Prior\n-------------------------------------------------------------------------------------------------\n(Intercept) | 3933.53 | [3919.66, 3944.37] | 100% | 1.008 |  346.00 | Normal (3932.80 +- 9973.60)\ncarat_z     | 7756.60 | [7728.28, 7786.16] | 100% | 0.999 | 1453.00 |   Normal (0.00 +- 21040.85)\n```\n\n\n:::\n:::\n\n\n\n\n\nZur Verdeutlichung ein Diagramm zum Modell:\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-4_594f422e4fa9409340e1d02e3ca0c593'}\n\n```{.r .cell-code}\ndiamonds %>% \n  ggplot() +\n  aes(x = carat_z, y = price) +\n  geom_point() + \n  geom_smooth(method = \"lm\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](unnamed-chunk-4-1.png){fig-pos='H' width=384}\n:::\n:::\n\n\nAnswerlist\n----------\na) Was kostet in Diamant mittlerer Größe laut Modell `lm1`? Runden Sie auf eine Dezimale. Geben Sie nur eine Zahl ein.\nb) Geben Sie eine Regressionsformel an, die `lm1` ergänzt, so dass die Schliffart (`cut`) des Diamanten kontrolliert (adjustiert) wird. Anders gesagt: Das Modell soll die mittleren Preise für jede der fünf Schliffarten angeben. Geben Sie nur die Regressionsformel an. Lassen Sie zwischen Termen jeweils ein Leerzeichen Abstand.\n\n\n\n\n\n*Hinweis*: Es gibt (laut Datensatz) folgende Schliffarten (und zwar in der folgenden Reihenfolge):\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-5_8ffc737ecd5fb21b97eee8086bb98e59'}\n\n```{.r .cell-code}\ndiamonds %>% \n  distinct(cut)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 5 × 1\n  cut      \n  <chr>    \n1 Ideal    \n2 Premium  \n3 Good     \n4 Very Good\n5 Fair     \n```\n\n\n:::\n:::\n\n\n\n\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n</br>\n\n# Solution\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-6_57c75b9f9586124ee53e2adb542116ce'}\n\n:::\n\n\n\na) Unser Modell `lm1` schätzt den Preis eines Diamanten mittlerer Größe auf etwa `3932.5` (was immer auch die Einheiten sind, Dollar vermutlich).\n\nb) `price ~ carat_z + cut` \n\nDieses zweite Modell könnten wir so berechnen:\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-7_edc00df6a7373e4f8a52fd601946b2eb'}\n\n```{.r .cell-code}\nlm2 <- stan_glm(price ~ carat_z + cut, data = diamonds,\n                chains = 1,\n                refresh = 0)\nparameters(lm2)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nParameter    |  Median |             95% CI |   pd |  Rhat |     ESS |                       Prior\n--------------------------------------------------------------------------------------------------\n(Intercept)  | 2402.38 | [2327.06, 2477.63] | 100% | 1.000 |  350.00 | Normal (3932.80 +- 9973.60)\ncarat_z      | 7870.54 | [7843.65, 7898.28] | 100% | 0.999 | 1316.00 |   Normal (0.00 +- 21040.85)\ncutGood      | 1121.55 | [1038.30, 1211.83] | 100% | 0.999 |  415.00 |   Normal (0.00 +- 34685.38)\ncutIdeal     | 1802.74 | [1723.50, 1885.39] | 100% | 1.000 |  357.00 |   Normal (0.00 +- 20362.28)\ncutPremium   | 1440.18 | [1363.77, 1522.87] | 100% | 1.000 |  361.00 |   Normal (0.00 +- 22862.49)\ncutVery Good | 1510.11 | [1432.93, 1596.07] | 100% | 1.001 |  351.00 |   Normal (0.00 +- 23922.15)\n```\n\n\n:::\n:::\n\n\n\nEin \"normales\" (frequentistisches) `lm` käme zu ähnlichen Ergebnissen:\n\n\n::: {.cell hash='adjustieren2_cache/html/unnamed-chunk-8_c172ec20cc56c7f2b190cfb3c7457c53'}\n\n```{.r .cell-code}\nlm(price ~ carat_z + cut, data = diamonds)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\nCall:\nlm(formula = price ~ carat_z + cut, data = diamonds)\n\nCoefficients:\n (Intercept)       carat_z       cutGood      cutIdeal    cutPremium  \n        2405          7871          1120          1801          1439  \ncutVery Good  \n        1510  \n```\n\n\n:::\n:::\n\n\n\n\n\nMan könnte hier noch einen Interaktionseffekt ergänzen, wenn man Grund zur Annahme hat,\ndass es einen gibt.\n\n\n\n\n\n---\n\nCategories: \n\n- regression\n- lm\n- qm2\n- bayes\n- adjust\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}